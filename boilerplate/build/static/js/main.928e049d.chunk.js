(this["webpackJsonpprobook-client"]=this["webpackJsonpprobook-client"]||[]).push([[0],{461:function(e,t,a){},582:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){},595:function(e,t,a){},596:function(e,t,a){},597:function(e,t,a){},840:function(e,t,a){},841:function(e,t,a){},843:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(52),s=a.n(n),o=a(36),i=a.n(o),l=a(530),d=a(1011),u=(a(582),a(532)),j=a(462),b=a(464),p=a(1031),f="https://api.i18nexus.com/project_resources/translations/{{lng}}/{{ns}}.json?api_key=".concat("JfMdrKKmBHuC9YGlc3kDSw");u.a.use(j.a).use(b.a).use(p.a).init({fallbackLng:"en",ns:["default"],defaultNS:"default",supportedLngs:["en","hi","mr"],backend:{loadPath:f}});var h,O=a(6),m=a(12),x=a(963),g=a(106),v=a(58),y=a(1034),w=a(5),k=a(4),C=a(17),S=a.n(C),F=a(31),D=a(35);function P(e){return new Promise((function(t){return setTimeout(t,e)}))}var A=Object(D.b)("customer/getCustomers",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/customers");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),N=Object(D.b)("customer/getCustomersProfileCompleteness",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(200);case 2:return e.next=4,i.a.get("/profile");case 4:return t=e.sent,a=t.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))),I=Object(D.b)("customer/getCustomerDetails",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/customers/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(D.b)("customer/getCustomerServicesHistory",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/service-customer-mappings/"+t);case 2:return a=e.sent,r=a.data,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(D.b)("customer/getCustomerRemarks",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/customers/remarks/"+t);case 2:return a=e.sent,r=a.data,console.log("Remarks in thunk",r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(D.c)({name:"customer",initialState:{status:"idle",customers:[],customerDetails:{},customerProfileCompletion:null,customerServiceHistory:[],fetchedPofileCompleteness:!1,customerServiceHistoryStatus:"idle",customerDetailsStatus:"idle",customerRemarks:[],remarksStatus:"idle"},reducers:{setCurrentCustomer:function(e,t){e.customerDetails=t.payload},setCurrentCustomerProfileCompletion:function(e,t){e.customerProfileCompletion=t.payload},clearCurrentCustomer:function(e,t){e.customerDetailsStatus="idle"}},extraReducers:(h={},Object(w.a)(h,A.pending,(function(e){e.status="loading"})),Object(w.a)(h,A.fulfilled,(function(e,t){e.status="success";var a={},r={};e.customers.map((function(e){return a[e.id]=e})),t.payload.customer_details.map((function(e){return r[e.id]=e})),e.customers=Object.values(Object.assign(a,r))})),Object(w.a)(h,A.rejected,(function(e){e.status="failed"})),Object(w.a)(h,I.pending,(function(e){e.customerDetailsStatus="loading"})),Object(w.a)(h,I.fulfilled,(function(e,t){e.customerDetailsStatus="success",e.customerDetails=t.payload})),Object(w.a)(h,I.rejected,(function(e){e.customerDetailsStatus="failed"})),Object(w.a)(h,N.pending,(function(e){e.status="loading"})),Object(w.a)(h,N.fulfilled,(function(e,t){e.status="success";var a=e.customers.map((function(e){var a=t.payload.profileCompletion?t.payload.profileCompletion[e.id]:0;return Object(k.a)(Object(k.a)({},e),{},{profile_completion:a})}));e.customers=a,e.fetchedPofileCompleteness=!0})),Object(w.a)(h,N.rejected,(function(e){e.status="failed"})),Object(w.a)(h,E.pending,(function(e){e.customerServiceHistoryStatus="loading"})),Object(w.a)(h,E.fulfilled,(function(e,t){e.customerServiceHistoryStatus="success",e.customerServiceHistory=t.payload.data})),Object(w.a)(h,E.rejected,(function(e){e.customerServiceHistoryStatus="failed"})),Object(w.a)(h,z.pending,(function(e){e.remarksStatus="loading"})),Object(w.a)(h,z.fulfilled,(function(e,t){e.remarksStatus="success",e.customerRemarks=t.payload})),Object(w.a)(h,z.rejected,(function(e){e.remarksStatus="failed"})),h)}),M=T.reducer,R=T.actions,B=(R.setCurrentCustomer,R.clearCurrentCustomer),_=R.setCurrentCustomerProfileCompletion,L=a(234),K={customers:[],loading:!1,error:null,pagination:{from:0,size:10},searchQuery:"",columnSearchQuery:{}};console.log("Initializing elasticCustomersSlice with initialState:",K);var U=Object(D.b)("elasticCustomers/fetchPaginatedResults",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,c=void 0===r?0:r,n=t.size,s=void 0===n?10:n,o=a.rejectWithValue,console.log("Fetching paginated results: from=".concat(c,", size=").concat(s)),e.prev=3,e.next=6,i.a.get("/customers/elastic/fetch-paginated-results",{params:{from:c,size:s}});case 6:return l=e.sent,console.log("Fetched paginated results successfully",l.data),e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error fetching paginated results:",e.t0.message),e.abrupt("return",o(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}()),H=Object(D.b)("elasticCustomers/performGlobalSearch",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.searchTerm,c=t.from,n=t.size,s=a.rejectWithValue,console.log("Performing global search: searchTerm=".concat(r,", from=").concat(c,", size=").concat(n)),e.prev=3,e.next=6,i.a.get("/customers/elastic/global-search",{params:{searchTerm:r,from:c,size:n}});case 6:return o=e.sent,console.log("Global search results:",o.data),e.abrupt("return",o.data);case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error in global search:",e.t0.message),e.abrupt("return",s(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}()),q=Object(D.b)("elasticCustomers/performCompoundSearch",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.searchTerms,c=t.from,n=t.size,s=a.rejectWithValue,console.log("Performing compound search: searchTerms=".concat(JSON.stringify(r),", from=").concat(c,", size=").concat(n)),e.prev=3,e.next=6,i.a.get("/customers/elastic/compound-search",{params:Object(k.a)(Object(k.a)({},r),{},{from:c,size:n})});case 6:return o=e.sent,console.log("Compound search results:",o.data),e.abrupt("return",o.data);case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error in compound search:",e.t0.message),e.abrupt("return",s(e.t0.response.data));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}()),G=Object(D.c)({name:"elasticCustomers",initialState:K,reducers:{resetSearch:function(e){console.log("Resetting search queries"),e.searchQuery="",e.columnSearchQuery={}},loadingStateElasticCustomers:function(e){console.log("load state for elastic customer true"),e.loading=!0}},extraReducers:function(e){e.addCase(U.pending,(function(e){console.log("Fetching paginated results pending"),e.loading=!0})).addCase(U.fulfilled,(function(e,t){console.log("Fetching paginated results fulfilled"),e.customers=t.payload,e.loading=!1,e.error=null})).addCase(U.rejected,(function(e,t){console.log("Fetching paginated results rejected",t.payload),e.error=t.payload,e.loading=!1})).addCase(H.fulfilled,(function(e,t){console.log("Global search fulfilled"),e.customers=t.payload,e.loading=!1,e.error=null})).addCase(q.fulfilled,(function(e,t){console.log("Compound search fulfilled"),e.customers=t.payload,e.loading=!1,e.error=null}))}}),W=G.actions,Y=W.resetSearch,V=(W.loadingStateElasticCustomers,G.reducer),J=function(e){return console.log("Selecting customers"),e.elasticCustomers.customers},Z=function(e){return console.log("Checking if loading"),e.elasticCustomers.loading},Q=function(e){return console.log("Selecting pagination"),e.elasticCustomers.pagination},X=(Object(L.a)([J,function(e,t){return t}],(function(e,t){return console.log("Filtering customers with filter: ".concat(t)),e.filter((function(e){return e.name.includes(t)}))})),a(25)),$=a(1014),ee=a(69),te=a(145),ae=a(47),re=a(108),ce=a(149),ne=a(933),se=a(1032),oe=a(1033),ie=a(264),le=a(1024),de=a(1),ue=["columns","data","onRowClick","topProps"],je=function(e){var t=e.columns,a=e.data,r=e.onRowClick,c=e.topProps,n=Object(ae.a)(e,ue),s=Object(g.e)(),o=Object(l.a)({shadows:Array(25).fill("none").map((function(e,t){return 2===t?"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)":"none"})),spacing:function(e){return"".concat(.25*e,"rem")},palette:{background:{default:"#00000000"},text:{primary:"light"==s.colorScheme?"#0E0E0F":"#A6A7AB"}}}),i=Object(ce.c)({useKeysAsHeaders:!0,filename:"exported_customers"});return console.log("topProps",c),Object(de.jsx)(d.a,{theme:o,children:Object(de.jsx)(re.e,Object(k.a)({columns:t,data:a,defaultColumn:{maxSize:300},enableColumnActions:!1,enableDensityToggle:!1,state:{density:"compact"},initialState:{density:"compact"},muiTableProps:{sx:{tableLayout:"fixed"}},muiTablePaperProps:{sx:{borderRadius:"20px",backgroundColor:"dark"===s.colorScheme?"#25262B":"white",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}},muiTableBodyRowProps:function(e){var t=e.row;return{onClick:function(){return r(t.original)},sx:{cursor:"pointer",transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{transform:"scale(0.99)",backgroundColor:"#F3F6FF90"}}}},muiTableBodyCellProps:{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},muiTableHeadRowProps:{sx:{backgroundColor:"#F3F6FF"}},muiTablePaginationProps:{sx:{color:"#0d5ff9"}},renderTopToolbarCustomActions:function(e){var t=e.table;return Object(de.jsx)(X.a,{w:"100%",pt:10,children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsxs)(oe.a,{children:[Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",onClick:function(){return function(e){var t=Object(ce.b)(i)(e.map((function(e){return e.original})));Object(ce.a)(i)(t)}(t.getRowModel().rows)},children:Object(de.jsx)(ne.a,{})}),Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Export"})]}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(le.a,{children:c?c():null})})]})})},renderToolbarInternalActions:function(e){var t=e.table;return Object(de.jsxs)(X.a,{w:160,children:[Object(de.jsx)(re.d,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.c,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.b,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.a,{style:{color:"#0d5ff9"},table:t})]})}},n))})};var be=function(){var e=Object(g.e)(),t=Object(m.b)(),a=Object(v.h)(),c=Object(m.c)(J),n=Object(m.c)(Z),s=Object(m.c)(Q),o=s.from,i=s.size,u=Object(r.useState)(""),j=Object(O.a)(u,2),b=j[0],p=j[1],f=Object(r.useState)({}),h=Object(O.a)(f,2),x=(h[0],h[1],Object(m.c)((function(e){return e.customer.customerDetailsStatus})));Object(r.useEffect)((function(){var e=function(){var e=Object(F.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(b?H({searchTerm:b,from:0,size:i}):U({from:o,size:i}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,o,i,b]),Object(r.useEffect)((function(){return function(){t(Y())}}),[t]);var y=Object(r.useMemo)((function(){return[{accessorKey:"name",header:"Name"},{accessorFn:function(e){return"CLID".concat(e.customerId.slice(0,6),"...")},id:"customerId",header:"Customer ID"},{accessorKey:"email",header:"Email",minSize:300},{accessorKey:"source",header:"Source"},{accessorKey:"mobile",header:"Mobile"},{accessorKey:"profile_percentage",header:"Profile Completion (%)"}]}),[]),w=Object(r.useCallback)((function(e){var a=e.pageIndex,r=e.pageSize,c=e.globalFilter,n=e.filters,s=void 0===n?{}:n,o=isNaN(a*r)?0:a*r;c?t(H({searchTerm:c,from:o,size:r})):Object.keys(s).length?t(q({searchTerms:s,from:o,size:r})):t(U({from:o,size:r}))}),[t]),C=Object(r.useCallback)((function(e){var t=Object(ce.b)(Object(ce.c)({filename:"exported_customers",useKeysAsHeaders:!0}))(e.map((function(e){return e.original})));Object(ce.a)(t)}),[]),D=Object(r.useCallback)((function(e){console.log(e),t(I(e.customerId)),t(_(e.profile_percentage))}),[t]);Object(r.useEffect)((function(){"success"===x&&(t(B()),a("/dashboard"))}),[x,a]);var P=Object(l.a)({palette:{mode:"dark"===e.colorScheme?"dark":"light"}});return Object(de.jsx)(d.a,{theme:P,children:Object(de.jsx)(re.e,{columns:y,data:c,loading:n,onRowClick:function(e){var t=e.row;return console.log(t)},defaultColumn:{maxSize:300},enableColumnActions:!1,enableDensityToggle:!1,enablePagination:!0,manualPagination:!0,rowCount:i,state:{density:"compact",globalFilter:b,pagination:{pageIndex:o/i,pageSize:i}},onGlobalFilterChange:function(e){return p(e)},onPaginationChange:function(e){return w(Object(k.a)({},e))},muiTableProps:{sx:{tableLayout:"fixed"}},muiTablePaperProps:{sx:{borderRadius:"20px",backgroundColor:"dark"===e.colorScheme?"#25262B":"white",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}},muiTableBodyRowProps:function(e){var t=e.row;return{onClick:function(){return D(t.original)},sx:{cursor:"pointer",transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{transform:"scale(0.99)",backgroundColor:"#F3F6FF90"}}}},muiTableBodyCellProps:{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},muiTableHeadRowProps:{sx:{backgroundColor:"#F3F6FF"}},muiTablePaginationProps:{sx:{color:"#0d5ff9"}},renderTopToolbarCustomActions:function(e){var t=e.table;return Object(de.jsx)(X.a,{w:"100%",pt:10,children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsxs)(oe.a,{children:[Object(de.jsx)(ie.a,{color:"#0d5ff9",size:"sm",onClick:function(){return C(t.getRowModel().rows)},children:Object(de.jsx)(ne.a,{})}),Object(de.jsx)(ee.a,{fontWeight:"bold",color:"#0d5ff9",size:"sm",children:"Export"})]}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(le.a,{})})]})})},renderToolbarInternalActions:function(e){var t=e.table;return Object(de.jsxs)(X.a,{w:160,children:[Object(de.jsx)(re.d,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.c,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.b,{style:{color:"#0d5ff9"},table:t}),Object(de.jsx)(re.a,{style:{color:"#0d5ff9"},table:t})]})}})})},pe=function(){var e=Object(m.b)();return Object(r.useEffect)((function(){e(B())}),[]),Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("div",{style:{display:"flex"},children:Object(de.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(de.jsxs)("div",{style:{padding:"10px"},children:[Object(de.jsx)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"5px"},children:Object(de.jsx)("span",{children:Object(de.jsx)(y.a,{pl:5,children:"Customers"})})}),Object(de.jsx)(be,{})]})})})})},fe=a(1035),he=a(265),Oe=a(936),me=a(1025),xe=a(1015),ge=a(1019),ve=a(49);function ye(){return Object(de.jsxs)(fe.a,{size:420,my:40,children:[Object(de.jsx)(y.a,{align:"center",sx:function(e){return{fontFamily:"Greycliff CF, ".concat(e.fontFamily),fontWeight:900}},children:"Customer Profiling"}),Object(de.jsx)(ee.a,{color:"dimmed",size:"sm",align:"center",mt:5,component:ve.b,to:"/",children:Object(de.jsxs)(oe.a,{children:["Already have an account?",Object(de.jsx)(ee.a,{c:"blue",children:"Login"})]})}),Object(de.jsxs)(he.a,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[Object(de.jsx)(Oe.a,{label:"Email",placeholder:"you@ea.in",required:!0}),Object(de.jsx)(me.a,{label:"Password",placeholder:"Your password",required:!0,mt:"md"}),Object(de.jsx)(le.a,{position:"apart",mt:"lg",children:Object(de.jsx)(xe.a,{label:"Remember me",sx:{lineHeight:1}})}),Object(de.jsx)(ve.b,{to:"/dashboard",children:Object(de.jsx)(ge.a,{fullWidth:!0,mt:"xl",children:"Register"})})]})]})}var we=a(7),ke=a(1041),Ce=a(1039),Se=a(1017),Fe=a(1037),De=a(939),Pe=a(940),Ae=a(941),Ne=a(942),Ie=a(943),Ee=a(944),ze=a(945),Te=a(946),Me=a(947),Re=a(948),Be=a(949),_e=a(950),Le=a(951),Ke=a(953),Ue=a(858),He=a(938),qe=a(1020),Ge=a(1036),We=a(1021),Ye=Object(Ue.a)((function(e){var t;return{link:Object(k.a)(Object(k.a)({},e.fn.focusStyles()),{},{display:"flex",alignItems:"center",textDecoration:"none",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:e.colors.gray[7],borderRadius:e.radius.md,marginTop:5,fontWeight:500,"&":{color:"dark"===e.colorScheme?e.colors.dark[6]:"#0D5FF9",boxShadow:"\n rgba(13, 95, 249, 1) 0px 1px 1px,\n rgba(13, 95, 249, 0.5) 0px 2px 2px,\n rgba(13, 95, 249, 0.5) 0px 2px 5px,\n rgba(13, 95, 249, 0.5) 0px 2px 5px,\n rgba(13, 95, 249, 0.5) 0px 3px 5px\n      ",background:"rgba(, 1)",borderRadius:"16px",backdropFilter:"blur(5.1px)",border:"1px solid rgba(, 0.42)",webkitBackdropFilter:"blur(5.1px)"},"&:focus":{outline:"none"},"&:hover":(t={backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff990",color:"dark"===e.colorScheme?e.white:"#FFFFFF"},Object(w.a)(t,"& .".concat(Object(He.a)("icon")),{color:"dark"===e.colorScheme?e.white:e.black}),Object(w.a)(t,"transition","transform 0.3s ease"),Object(w.a)(t,"&:hover",{transform:"translateX(5px)"}),t)}),linkIcon:{ref:Object(He.a)("icon"),color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6],marginRight:e.spacing.sm},linkActive:{"&, &:hover":Object(w.a)({backgroundColor:"dark"===e.colorScheme?"#252D3B":"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF"},"& .".concat(Object(He.a)("icon")),{color:e.fn.variant({variant:"light",color:e.primaryColor}).color})},stickyNavbar:{position:"sticky",height:"100%",top:0}}})),Ve=[{link:"personalInformation",label:"Personal Information",icon:Object(de.jsx)(De.a,{})},{link:"keywords",label:"Keywords",icon:Object(de.jsx)(Pe.a,{})},{link:"profiling",label:"Profiling",icon:Object(de.jsx)(Ae.a,{})},{link:"interests",label:"Interests",icon:Object(de.jsx)(Ne.a,{})},{link:"remarks",label:"Remarks",icon:Object(de.jsx)(Ie.a,{})},{link:"occupation",label:"Occupation",icon:Object(de.jsx)(Ee.a,{})},{link:"activity",label:"Activity",icon:Object(de.jsx)(ze.a,{})},{link:"familydetails",label:"Family Details",icon:Object(de.jsx)(Te.a,{})},{link:"fi",label:"Financial Information",icon:Object(de.jsx)(Me.a,{})},{link:"id",label:"Insurance Details  ",icon:Object(de.jsx)(Re.a,{})},{link:"vd",label:"Vehicle",icon:Object(de.jsx)(Be.a,{})},{link:"Health",label:"Health",icon:Object(de.jsx)(_e.a,{})},{link:"Social Media",label:"Social Media",icon:Object(de.jsx)(Le.a,{})}],Je=function(){var e=Ye(),t=e.classes,a=e.cx,c=Object(r.useState)("Personal Information"),n=Object(O.a)(c,2),s=n[0],o=n[1],i=(Object(g.e)(),Object(v.g)(),Object(m.c)((function(e){return e.auth})).myRole),l=Ve.filter((function(e,t){return"qc"!==i||t<2})).map((function(e){return Object(de.jsx)(qe.a,{className:a(t.link,Object(w.a)({},t.linkActive,e.label===s)),icon:e.icon,component:ve.b,variant:"subtle",to:e.link,label:e.label,onClick:function(t){o(e.label)}},e.label)}));return Object(de.jsx)(X.a,{height:700,p:"md",width:{sm:200,lg:300},withBorder:!1,children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(X.a,{sx:{borderRadius:10,padding:2},children:Object(de.jsx)(We.a.Section,{grow:!0,children:l})}),Object(de.jsx)(We.a.Section,{children:Object(de.jsx)(qe.a,{icon:Object(de.jsx)(Ke.a,{}),component:ve.b,variant:"subtle",to:"/customers",c:"#0d5ff9",sx:{cursor:"pointer",borderRadius:10},label:"Go Back",rightSection:!0})})]})})},Ze=a(62),Qe=a(1012),Xe=a(1038),$e=Object(Ze.b)(60),et=Object(Ue.a)((function(e){return{card:{position:"relative",overflow:"visible",padding:e.spacing.xl,paddingTop:"calc(".concat(e.spacing.xl," * 1.5 + ").concat($e," / 3)")},icon:{position:"absolute",top:"calc(-".concat($e," / 3)"),left:"calc(50% - ".concat($e," / 2)")},title:{fontFamily:"Greycliff CF, ".concat(e.fontFamily),lineHeight:1}}}));function tt(e){var t,a=e.title,r=e.url,c=e.percentage,n=(e.frequency,e.lastUpdated,et().classes);return Object(de.jsxs)(he.a,{radius:"md",withBorder:!0,className:n.card,mt:"calc(".concat($e," / 3)"),children:[Object(de.jsx)(Qe.a,{className:n.icon,size:$e,radius:$e,src:r}),Object(de.jsx)(ee.a,{ta:"center",fw:700,className:n.title,children:a}),Object(de.jsx)(ee.a,{c:"dimmed",ta:"center",fz:"sm",children:(t=c,t>=0&&t<=10?"Clueless Newbie":t>10&&t<=25?"Bumbling Beginner":t>25&&t<=40?"Somewhat Savvy":t>40&&t<=60?"Eager Explorer":t>60&&t<=75?"Amusingly Advanced":t>75&&t<=90?"Whimsical Wizard":"Expert Extraordinaire")}),Object(de.jsxs)(le.a,{position:"apart",mt:"xs",children:[Object(de.jsx)(ee.a,{fz:"sm",color:"dimmed",children:"Percentage Completed"}),Object(de.jsx)(ee.a,{fz:"sm",color:"dimmed",children:Object(de.jsxs)(Fe.a,{size:"lg",children:[c,"%"]})})]}),Object(de.jsx)(Xe.a,{value:c,mt:5})]})}var at,rt=Object(D.b)("profiling/fetchData",function(){var e=Object(F.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/customer-mapping/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),ct=Object(D.b)("profiling/fetchProfileTypes",Object(F.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-types"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),nt=Object(D.b)("profiling/fetchProfileMappings",function(){var e=Object(F.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/profile-customer-mappings-by-profile/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response.data;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),st=Object(D.c)({name:"profiling",initialState:{data:[],profileTypes:[],profileMappings:[],status:"idle",profileTypesStatus:"idle",profileMappingsStatus:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(rt.pending,(function(e){e.status="loading",e.error=null})).addCase(rt.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload})).addCase(rt.rejected,(function(e,t){e.status="failed",e.error=t.error.message||"Failed to fetch profile types for the customer"})).addCase(ct.pending,(function(e){e.profileTypesStatus="loading",e.error=null})).addCase(ct.fulfilled,(function(e,t){e.profileTypesStatus="succeeded",e.profileTypes=t.payload})).addCase(ct.rejected,(function(e,t){e.profileTypesStatus="failed",e.error=t.error.message||"Failed to fetch profile types"})).addCase(nt.pending,(function(e){e.profileMappingsStatus="loading",e.error=null})).addCase(nt.fulfilled,(function(e,t){e.profileMappingsStatus="succeeded",e.profileMappings=[],e.profileMappings=t.payload})).addCase(nt.rejected,(function(e,t){e.profileMappingsStatus="failed",e.error=t.error.message||"Failed to fetch profile mappings"}))}}).reducer,ot=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.profileTypesCustomerMapping.data})),a=Object(m.c)((function(e){return e.customer})).customerDetails;console.log("Profiling data",t),Object(r.useEffect)((function(){e(rt(a.id))}),[e,a]);var c=t.map((function(e){return Object(de.jsx)(Ce.a.Col,{span:4,children:Object(de.jsx)(tt,{title:e.profileType.name,url:e.profileType.srcUrl,percentage:Math.round(e.profileCompletion)})},e.profileType.id)}));return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(Ce.a,{gutter:"xl",children:c})})},it=function(e){var t=e.title,a=e.subject;return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(ee.a,{fz:"sm",c:"dimmed",children:t}),Object(de.jsx)(ee.a,{children:a})]})},lt=a(206),dt=function(e){var t=e.selectedCustomer,a=Object(r.useState)(Object(k.a)({},t.profiling.personal_details)),c=Object(O.a)(a,2),n=c[0],s=(c[1],Object(m.c)((function(e){return e.customer})).customerDetails);console.log("state",s);t.profile_completion,t.source;var o=Object(r.useMemo)((function(){return t}),[t.id,t.profiling.personal_details]),i=Object(r.useMemo)((function(){return{randomLocation:lt.a.location.city(),randomState:lt.a.location.state(),randomAddress:lt.a.location.streetAddress(),randomPincode:lt.a.location.zipCode()}}),[o]);return n?Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(fe.a,{children:[Object(de.jsxs)("div",{children:[Object(de.jsx)(ee.a,{fw:500,children:"Address & Other Info"}),Object(de.jsxs)(Ce.a,{gutter:"xl",children:[Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Location(city)",subject:i.randomLocation})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"State",subject:i.randomState})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"PINCODE",subject:i.randomPincode})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Country",subject:"India"})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Address Line",subject:i.randomAddress})})]})]}),Object(de.jsx)("div",{children:Object(de.jsxs)(Ce.a,{gutter:"xl",children:[Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Marital status",subject:n.marital_status})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Travel Address",subject:n.travel_address})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Anniversary",subject:n.anniversary})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(it,{title:"Employment",subject:n.employment})})]})})]})}):Object(de.jsx)(de.Fragment,{children:"Fetching profile ..."})},ut=a(1016),jt=a(1007),bt=Object(D.b)("keywords/getKeywords",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/keywords");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),pt=Object(D.b)("keywords/getCustomerKeywords",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/keywords/customer/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ft=Object(D.b)("keywords/searchKeywords",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/keywords/search/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ht=Object(D.b)("keywords/searchKeywords",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/keywords/update/many",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ot=Object(D.c)({name:"keyword",initialState:{KeywordsStatus:"idle",customerKeywordsStatus:"idle",updateKeywordsStatus:"idle",keywords:[],customerKeywords:[]},reducers:{updateKeywords:function(e,t){console.log(t.payload),e.customerDetails=t.payload}},extraReducers:(at={},Object(w.a)(at,bt.pending,(function(e,t){e.keywordsStatus="loading"})),Object(w.a)(at,bt.fulfilled,(function(e,t){e.keywordsStatus="success";var a={},r={};e.keywords.map((function(e){return a[e.id]=e})),t.payload.data.map((function(e){return r[e.id]=e})),e.keywords=Object.values(Object.assign(a,r))})),Object(w.a)(at,bt.rejected,(function(e,t){e.keywordsStatus="failed"})),Object(w.a)(at,pt.pending,(function(e,t){e.customerKeywordsStatus="loading"})),Object(w.a)(at,pt.fulfilled,(function(e,t){e.customerKeywordsStatus="success",e.customerKeywords=t.payload.data})),Object(w.a)(at,pt.rejected,(function(e,t){e.customerKeywordsStatus="failed"})),Object(w.a)(at,ft.pending,(function(e,t){e.keywordsStatus="loading"})),Object(w.a)(at,ft.fulfilled,(function(e,t){})),Object(w.a)(at,ft.rejected,(function(e,t){e.keywordsStatus="failed"})),Object(w.a)(at,ht.pending,(function(e,t){e.updateKeywordsStatus="loading"})),Object(w.a)(at,ht.fulfilled,(function(e,t){e.updateKeywordsStatus="success",e.customerKeywords=t.payload.data})),Object(w.a)(at,ht.rejected,(function(e,t){e.updateKeywordsStatus="failed"})),at)}).reducer,mt=a(90),xt=a.n(mt);function gt(e,t){return e.some((function(e){return e.name===t}))}var vt=function(e){var t=e.updateKeywordValuesParent,a=e.handleSubmitKeywords,c=Object(r.useState)([]),n=Object(O.a)(c,2),s=n[0],o=n[1],i=Object(m.c)((function(e){return e.customer})),l=(i.status,i.customerDetails),d=Object(m.c)((function(e){return e.rolePermission})),u=d.userPermissions,j=(d.rolesPermissionsStatus,Object(m.b)()),b=Object(m.c)((function(e){return e.keyword})),p=b.customerKeywords,f=b.keywords,h=b.keywordsStatus,x=b.customerKeywordsStatus,g=Object(r.useState)(),v=Object(O.a)(g,2),y=v[0],w=v[1],k=Object(r.useState)(""),C=Object(O.a)(k,2),S=C[0],F=C[1],D=Object(r.useState)([]),P=Object(O.a)(D,2),A=(P[0],P[1]),N=Object(r.useState)(!1),I=Object(O.a)(N,2),E=I[0],z=I[1],T=Object(r.useMemo)((function(){return xt.a.map(p,(function(e){var t=e.id,a=e.value,r=e.category;return{value:t,label:"".concat(a," [").concat(r,"]")}}))}),[p]),M=Object(r.useMemo)((function(){return xt.a.map(f,(function(e){var t=e.id,a=e.value,r=e.category;return{value:t,label:"".concat(a," [").concat(r,"]")}}))}),[f]),R=xt.a.map(xt.a.filter(f,{category:"unknown"}),"value");Object(r.useEffect)((function(){"success"==h&&"success"==x&&(o(M),w(T.map((function(e){return e.value}))),A(R))}),[p,f]),Object(r.useEffect)((function(){t(y)}),[s,y]),Object(r.useEffect)((function(){j(pt(l.id)),j(bt())}),[]),Object(r.useEffect)((function(){var e=!xt.a.isEqual(y,T.map((function(e){return e.value})));z(e)}),[y,T]);var B=Object(r.useMemo)((function(){return xt.a.debounce((function(e){F(e)}),200)}),[]);return Object(de.jsxs)(de.Fragment,{children:[console.log(u,gt(u,"keywords_edit")),"success"==h&&"success"==x&&u&&Array.isArray(u)?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(ut.a,{data:s,value:y,onChange:function(e){return w(e)},label:"Keywords",searchable:!0,searchValue:S,onSearchChange:function(e){return B(e)},clearable:!0,withinPortal:!0,placeholder:"Add keywords",creatable:!0,getCreateLabel:function(e){return"+ Create ".concat(e)},onCreate:function(e){var t={value:e,label:e};return o((function(e){return[].concat(Object(we.a)(e),[t])})),t},readOnly:!gt(u,"keywords_edit")}),Object(de.jsx)("div",{style:{alignSelf:"center",padding:"10px"},children:E&&gt(u,"keywords_edit")&&Object(de.jsx)(ge.a,{variant:"light",onClick:function(){return a()},children:"Update keywords"})})]}):Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("p",{children:"Please wait......."})})]})},yt=a(1042),wt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.customer})),a=t.status,n=t.customerDetails,s=Object(m.c)((function(e){return e.keyword})),o=s.customerKeywords,i=s.customerKeywordsStatus,l=Object(r.useState)([]),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useMemo)((function(){var e=xt.a.groupBy(o,"category");return xt.a.map(e,(function(e,t){return{category:t,values:xt.a.uniq(xt.a.map(e,"value"))}}))}),[o]);return Object(r.useEffect)((function(){a&&e(pt(n.id))}),[]),Object(r.useEffect)((function(){"success"==i&&j(b)}),[o]),Object(de.jsx)(de.Fragment,{children:"success"==i?Object(de.jsx)(de.Fragment,{children:u.map((function(e){return Object(de.jsxs)(c.a.Fragment,{children:[Object(de.jsx)(ee.a,{fw:700,children:e.category}),e.values.map((function(e){return Object(de.jsx)(Fe.a,{variant:"gradient",gradient:{from:"indigo",to:"cyan"},children:e},e)}))]},e.category)}))}):Object(de.jsx)(de.Fragment,{children:"Loading interests..."})})},kt=a(531),Ct=a(1040),St=a(956),Ft=a(957),Dt=a(958),Pt=a(959),At=a(960),Nt=Object(Ue.a)((function(e){return{rowSelected:{backgroundColor:"dark"===e.colorScheme?e.fn.rgba(e.colors[e.primaryColor][7],.2):e.colors[e.primaryColor][0]}}}));function It(e){var t=e.title,a=e.initialData,c=e.headerData,n=e.createEmptyRow,s=e.customInputs,o=Nt(),i=o.classes,l=o.cx,d=Object(r.useState)([]),u=Object(O.a)(d,2),j=u[0],b=u[1],p=Object(r.useState)(a),f=Object(O.a)(p,2),h=f[0],m=f[1],x=Object(r.useState)(null),g=Object(O.a)(x,2),v=g[0],y=g[1],C=Object(r.useState)(null),S=Object(O.a)(C,2),F=S[0],D=S[1],P=Object(r.useState)(null),A=Object(O.a)(P,2),N=A[0],I=A[1],E=c.map((function(e,t){return Object(de.jsx)("th",{children:e},t)})),z=function(e,t,a){I((function(r){return r&&r.id===e?Object(k.a)(Object(k.a)({},r),{},Object(w.a)({},t,a)):r}))},T=function(e,t){F&&D(Object(k.a)(Object(k.a)({},F),{},Object(w.a)({},e,t)))},M=F?Object(de.jsxs)("tr",{children:[Object.keys(F).filter((function(e){return"id"!==e})).map((function(e){return Object(de.jsx)("td",{children:s&&s[e]?s[e](F&&F[e]||"",(function(t){return T(e,t)})):Object(de.jsx)(Oe.a,{value:F&&F[e]||"",onChange:function(t){return T(e,t.currentTarget.value)}})},e)})),Object(de.jsx)("td",{children:Object(de.jsx)(ge.a,{onClick:function(){F&&(m((function(e){return[].concat(Object(we.a)(e),[Object(k.a)(Object(k.a)(Object(k.a)({},n()),F),{},{id:(h.length+1).toString()})])})),D(null))},bg:"#4E70EA",children:"Save"})})]}):null,R=h.map((function(e){var t=j.includes(e.id);return Object(de.jsxs)("tr",{className:l(Object(w.a)({},i.rowSelected,t)),children:[Object(de.jsx)("td",{children:Object(de.jsx)(xe.a,{checked:j.includes(e.id),onChange:function(){return t=e.id,b((function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(we.a)(e),[t])}));var t},transitionDuration:0})}),Object.keys(e).filter((function(e){return"id"!=e})).map((function(t){return v===e.id&&s&&s[t]?Object(de.jsx)("td",{children:s[t](N&&N[t]||"",(function(a){return z(e.id,t,a)}))},t):v===e.id?Object(de.jsx)("td",{children:Object(de.jsx)(Oe.a,{value:N&&N[t]||"",onChange:function(a){return z(e.id,t,a.currentTarget.value)}})},t):Object(de.jsx)("td",{children:e[t]},t)})),Object(de.jsx)("td",{children:v===e.id?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(ie.a,{onClick:function(){return t=e.id,m((function(e){return e.map((function(e){return e.id===t?Object(k.a)(Object(k.a)({},e),N):e}))})),y(null),void I(null);var t},color:"green",variant:"subtle",size:"sm",children:Object(de.jsx)(St.a,{})}),Object(de.jsx)(ie.a,{onClick:function(){return e.id,y(null),void I(null)},color:"red",variant:"subtle",size:"sm",children:Object(de.jsx)(Ft.a,{})})]}):Object(de.jsx)(ie.a,{onClick:function(){return t=e.id,I(h.find((function(e){return e.id===t}))||null),void y((function(e){return e===t?null:t}));var t},color:"#4E70EA",variant:"subtle",size:"sm",children:Object(de.jsx)(Dt.a,{color:"#4E70EA"})})})]},e.id)}));return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)(le.a,{position:"apart",children:[Object(de.jsx)(X.a,{mb:5,children:Object(de.jsx)(ee.a,{fw:700,children:t||""})}),Object(de.jsx)(X.a,{mb:5,children:Object(de.jsxs)(le.a,{children:[Object(de.jsxs)(le.a,{onClick:function(){m((function(e){return e.filter((function(e){return!j.includes(e.id)}))})),b([])},style:{cursor:"pointer"},children:[Object(de.jsx)(ie.a,{color:"red",variant:"subtle",size:"sm",children:Object(de.jsx)(Pt.a,{})}),Object(de.jsx)(ee.a,{ml:-18,color:"red",size:"sm",children:"Delete"})]}),Object(de.jsxs)(le.a,{onClick:function(){D(F?null:n())},style:{cursor:"pointer"},children:[Object(de.jsx)(ie.a,{color:"blue",variant:"subtle",size:"sm",children:Object(de.jsx)(At.a,{color:"#4E70EA"})}),Object(de.jsx)(ee.a,{ml:-18,color:"#4E70EA",size:"sm",children:"Add More"})]})]})})]}),Object(de.jsx)(kt.a,{style:{maxHeight:"100%",fontSize:"10px"},children:Object(de.jsxs)(Ct.a,{children:[Object(de.jsx)("thead",{children:Object(de.jsxs)("tr",{children:[Object(de.jsx)("th",{children:Object(de.jsx)(xe.a,{checked:j.length===h.length&&h.length>0,onChange:function(){return b((function(e){return e.length===h.length?[]:h.map((function(e){return e.id}))}))},transitionDuration:0})}),E,Object(de.jsx)("th",{})]})}),Object(de.jsxs)("tbody",{children:[R,M]})]})})]})}var Et=[{id:"1",type:"Property Dealer",industry:"Business",to:"2005",from:"2009",incomeBracket:"\u20b97,00,000 - \u20b915,00,000"},{id:"2",type:"Stock Exchange",industry:"Finance",to:"2008",from:"Present",incomeBracket:"\u20b915,00,000 - \u20b930,00,000"}],zt=["Type","Industry","To","From","Income Bracket"],Tt=function(){return{id:"",type:"",industry:"",to:"",from:"",incomeBracket:""}};function Mt(){return Object(de.jsx)(It,{title:"Occupation",initialData:Et,headerData:zt,createEmptyRow:Tt})}var Rt=[{id:"1",name:"Sushma Sharma",gender:"Female",relationship:"Spouse",phone:"+91 834273824",email:"sushmasharma123@email.com"},{id:"2",name:"Anand Sharma",gender:"Male",relationship:"Son",phone:"+91 873624782",email:"anandsharma123@email.com"},{id:"3",name:"Sarthak Sharma",gender:"Male",relationship:"Son",phone:"-",email:"-"}],Bt=["Name","Gender","Relationship","Phone No.","Email Address","",""],_t=function(){return{id:"",name:"",gender:"",relationship:"",phone:"",email:""}};function Lt(){return Object(de.jsx)(It,{title:"Family Details",initialData:Rt,headerData:Bt,createEmptyRow:_t,rowData:{id:"",name:"",gender:"",relationship:"",phone:"",email:""}})}function Kt(){var e=Object(m.c)((function(e){return e.customer})),t=e.customerDetails,a=e.customerServiceHistory,c=Object(m.b)();Object(r.useEffect)((function(){c(E(t.id))}),[t]);var n=a.map((function(e){return{ticket_id:e.ticket_id,order_id:e.order_id,source_of_booking:e.source_of_booking,ticket_type:e.ticket_type,ticket_date:e.ticket_date,action:e.action,tat:e.tat,name:e.service.name,subType:e.service.subType}}));return Object(de.jsx)(de.Fragment,{children:Array.isArray(n)&&n.length>0?Object(de.jsx)(It,{title:"Activity",initialData:n,headerData:["Ticket ID","Order ID","Source of Booking","Ticket Type","Ticket Date","Action","TAT","Name","SubType"],createEmptyRow:function(){return{ticket_id:"",order_id:"",source_of_booking:"",ticket_type:"",ticket_date:"",action:"",tat:"",name:"",subType:""}}}):Object(de.jsx)(te.a,{})})}var Ut=a(1013),Ht=function(){return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(Ut.a,{label:Object(de.jsx)(ee.a,{fw:700,children:"Remarks"}),radius:"md",variant:"filled"})})},qt=a(961),Gt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.customer.customerRemarks})),a=Object(m.c)((function(e){return e.customer.remarksStatus})),c=Object(m.c)((function(e){return e.customer.customerDetails.id})),n=Object(qt.a)(!1),s=Object(O.a)(n,2),o=s[0],i=s[1],l=i.open,d=i.close,u=Object(r.useState)(null),j=Object(O.a)(u,2),b=j[0],p=j[1];Object(r.useEffect)((function(){c&&e(z(c))}),[e,c]);var f=Object(r.useMemo)((function(){return[{accessorKey:"agentName",header:"Agent Name"},{accessorKey:"date",header:"Date"},{accessorKey:"time",header:"Time"},{accessorKey:"remark",header:"Remark"}]}),[]);return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(X.a,{children:"success"===a?Object(de.jsx)(je,{columns:f,data:t,onRowClick:function(e){p(e),l()}}):"loading"===a?Object(de.jsx)("p",{children:"Loading..."}):Object(de.jsx)("p",{children:"Failed to load remarks."})}),Object(de.jsx)(jt.a,{opened:o,onClose:d,title:"Remark Details",centered:!0,children:b&&Object(de.jsxs)("div",{children:[Object(de.jsxs)("p",{children:[Object(de.jsx)("strong",{children:"Agent Name:"})," ",b.agentName]}),Object(de.jsxs)("p",{children:[Object(de.jsx)("strong",{children:"Date:"})," ",b.date]}),Object(de.jsxs)("p",{children:[Object(de.jsx)("strong",{children:"Time:"})," ",b.time]}),Object(de.jsxs)("p",{children:[Object(de.jsx)("strong",{children:"Remark:"})," ",b.remark]})]})})]})},Wt=[],Yt=["Name","Acc. No","Variant","IFSC code","Branch"],Vt=function(){return{id:"",name:"",acc_no:"",variant:"",ifsc:"",branch:""}};function Jt(){return Object(de.jsx)(It,{title:"Financial Information",initialData:Wt,headerData:Yt,createEmptyRow:Vt,rowData:{id:"",name:"",acc_no:"",variant:"",ifsc:"",branch:""}})}var Zt=[],Qt=["Source","Product Type","Validity(in years)","Expiry date","Status"],Xt=function(){return{id:"",source:"",validity:"",expiry:"",status:""}};function $t(){return Object(de.jsx)(It,{title:"Insurance Details",initialData:Zt,headerData:Qt,createEmptyRow:Xt,rowData:{id:"",source:"",validity:"",expiry:"",status:""}})}var ea=[],ta=["Name","VIN/Chassis no.","Product Type","Validity(in years)","Expiry date","Status"],aa=function(){return{id:"",name:"",vin:"",product_type:"",validity:"",expiry:"",status:""}};function ra(){return Object(de.jsx)(It,{title:"Vehicle Details",initialData:ea,headerData:ta,createEmptyRow:aa,rowData:{id:"",name:"",vin:"",product_type:"",validity:"",expiry:"",status:""}})}var ca,na,sa=function(e){var t=e.title,a=e.subject;return Object(de.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"-10px"},children:[Object(de.jsx)(ee.a,{fz:"sm",c:"dimmed",style:{alignSelf:"start"},children:t}),Object(de.jsx)(ee.a,{style:{alignSelf:"end"},children:a})]})},oa=function(){var e,t=Object(v.h)(),a=Object(m.c)((function(e){return e.customer})),c=a.status,n=a.customerDetails,s=a.customerProfileCompletion,o=Object(r.useState)(Object(k.a)({},null===(e=n.profiling)||void 0===e?void 0:e.personal_details)),i=Object(O.a)(o,2),l=i[0],d=(i[1],n.profile_completion,Object(m.c)((function(e){return e.keyword})).updateKeywordsStatus,Object(r.useState)(!1)),u=Object(O.a)(d,2),j=u[0],b=(u[1],Object(r.useState)("")),p=Object(O.a)(b,2),f=(p[0],p[1]),h=Object(r.useState)([]),x=Object(O.a)(h,2),y=x[0],w=x[1],C=Object(r.useState)(!1),S=Object(O.a)(C,2),F=S[0],D=S[1],A=(Object(m.c)((function(e){return e.auth})).isLoggedIn,Object(r.useState)()),N=Object(O.a)(A,2),I=(N[0],N[1],Object(r.useState)(!0)),E=Object(O.a)(I,2),z=(E[0],E[1],Object(v.g)()),T=Object(m.b)();Object(r.useEffect)((function(){n&&0!==Object.keys(n).length||t("/customers")}),[n,t]);Object(g.e)();var M=Object(r.useState)(!1),R=Object(O.a)(M,2);R[0],R[1];Object(r.useEffect)((function(){f((function(e){return[].concat(Object(we.a)(e),[z.pathname])}))}),[z]);return"loading"==c?Object(de.jsx)(ke.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}}):Object(de.jsx)(X.a,{children:Object(de.jsxs)(Ce.a,{children:[Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsx)(X.a,{children:Object(de.jsx)(Je,{})})}),Object(de.jsxs)(Ce.a.Col,{span:9,children:[Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(Se.a,{children:Object(de.jsxs)(Ce.a,{children:[Object(de.jsxs)(Ce.a.Col,{span:2,children:[Object(de.jsx)(Ce.a.Col,{span:12,style:{textAlign:"center"},children:Object(de.jsx)(Qe.a,{color:"blue",size:"lg",children:Object(de.jsx)(De.a,{size:"lg"})})}),n.isHNI&&Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(Fe.a,{color:"yellow",variant:"filled",size:"lg",children:"HNI"})})]}),Object(de.jsxs)(Ce.a.Col,{span:6,children:[Object(de.jsx)(ee.a,{fw:500,children:"Basic Info"}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(sa,{title:"Name",subject:l.full_name})}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(sa,{title:"Mobile Number",subject:l.phone_number})}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(sa,{title:"Email Address",subject:n.email})}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(sa,{title:"Gender",subject:l.gender})})]}),Object(de.jsx)(Ce.a.Col,{span:4,children:Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsxs)(oe.a,{children:[" ",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(de.jsx)("div",{children:Object(de.jsx)($.a,{mt:0,size:100,thickness:8,sections:[{value:e,color:e>75?"#1D9B25":e>60?"#CFA400":"#D85972"}],label:Object(de.jsxs)(ee.a,{color:"",weight:20,align:"center",size:"xs",children:[e,"%"]})})})}(s)]})})})]})})}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(Se.a,{shadow:"lg",radius:"md",children:Object(de.jsx)(v.d,{children:Object(de.jsxs)(v.b,{children:[Object(de.jsx)(v.b,{index:!0,element:Object(de.jsx)(dt,{selectedCustomer:n})}),Object(de.jsx)(v.b,{path:"/personalInformation",element:Object(de.jsx)(dt,{selectedCustomer:n})}),Object(de.jsx)(v.b,{path:"/profiling",element:Object(de.jsx)(ot,{})}),Object(de.jsx)(v.b,{path:"/keywords",element:Object(de.jsx)(vt,{submitKeywords:j,updateKeywordValuesParent:function(e){w(e)},handleSubmitKeywords:function(){var e={customerId:n.id,keywordsPayload:y};D(!0),P(5e3).then((function(e){return D(!1)})),T(ht(e))}})}),Object(de.jsx)(v.b,{path:"/interests",element:Object(de.jsx)(wt,{})}),Object(de.jsx)(v.b,{path:"/remarks",element:Object(de.jsx)(Gt,{})}),Object(de.jsx)(v.b,{path:"/occupation",element:Object(de.jsx)(Mt,{})}),Object(de.jsx)(v.b,{path:"/familydetails",element:Object(de.jsx)(Lt,{})}),Object(de.jsx)(v.b,{path:"/activity",element:Object(de.jsx)(Kt,{})}),Object(de.jsx)(v.b,{path:"/fi",element:Object(de.jsx)(Jt,{})}),Object(de.jsx)(v.b,{path:"/id",element:Object(de.jsx)($t,{})}),Object(de.jsx)(v.b,{path:"/vd",element:Object(de.jsx)(ra,{})})]})})})}),F&&Object(de.jsx)(yt.a,{loading:!0,title:"Syncing keywords",withCloseButton:!0,style:{backgroundColor:"red !important"},children:Object(de.jsx)("p",{style:{color:"red"},children:"Uploading latest keywords data onto server"})})]})]})})};function ia(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(window.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}var la,da,ua,ja=Object(D.b)("auth/loginUser",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/auth/signin",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ba=Object(D.b)("auth/registerUser",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/auth/signup",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pa=Object(D.b)("auth/getProfile",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/profile/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fa=Object(D.b)("auth/getUsers",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/users/all");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),ha=Object(D.b)("auth/addUser",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("/users/create",t);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),Oa=Object(D.c)({name:"auth",initialState:{status:"idle",myRole:null,isLoggedIn:!1,user:{},profile:{},userStatus:"idle",users:[]},reducers:(ca={setAuth:function(e,t){e.isLoggedIn=t.payload.isLoggedIn},logout:function(e,t){localStorage.clear(),e.isLoggedIn=!1,i.a.defaults.headers.common.authorization=null,window.location.reload()}},Object(w.a)(ca,"setAuth",(function(e,t){var a=JSON.parse(localStorage.getItem("login"));if(Object.keys(a).length>0){var r=a.email,c=a._id;e.user.email=r,e.user._id=c,e.status="success",e.isLoggedIn=!0}else e.isLoggedIn=!1})),Object(w.a)(ca,"setMyRole",(function(e,t){e.myRole=t.payload})),ca),extraReducers:(na={},Object(w.a)(na,ja.pending,(function(e,t){e.status="loading"})),Object(w.a)(na,ja.fulfilled,(function(e,t){var a=t.payload.access_token,r=ia(a),c=r.email,n=r.sub,s=a;localStorage.setItem("login",JSON.stringify({token:s,email:c,_id:n,isLoggedIn:!0})),e.user.email=c,e.user._id=n,e.status="success",e.isLoggedIn=!0})),Object(w.a)(na,ja.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(w.a)(na,ba.pending,(function(e,t){e.status="loading"})),Object(w.a)(na,ba.fulfilled,(function(e,t){e.status="success";var a=t.payload.access_token,r=ia(a),c=r.email,n=r.sub,s=a;localStorage.setItem("login",JSON.stringify({token:s,email:c,_id:n,isLoggedIn:!0})),e.user.email=c,e.user._id=n,e.status="success",e.isLoggedIn=!0})),Object(w.a)(na,ba.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(w.a)(na,pa.pending,(function(e,t){e.status="loading"})),Object(w.a)(na,pa.fulfilled,(function(e,t){e.status="success",e.profile=t.payload.profile})),Object(w.a)(na,pa.rejected,(function(e,t){e.status="failed"})),Object(w.a)(na,fa.pending,(function(e,t){e.userStatus="loading"})),Object(w.a)(na,fa.fulfilled,(function(e,t){e.userStatus="success",e.users=t.payload})),Object(w.a)(na,fa.rejected,(function(e,t){e.userStatus="failed"})),Object(w.a)(na,ha.pending,(function(e,t){e.status="loading"})),Object(w.a)(na,ha.fulfilled,(function(e,t){e.status="success",e.users=[].concat(Object(we.a)(e.users),[t.payload])})),Object(w.a)(na,ha.rejected,(function(e,t){e.status="failed"})),na)}),ma=Oa.reducer,xa=Oa.actions,ga=xa.setAuth,va=xa.logout,ya=xa.setMyRole,wa=Object(D.b)("rolesPermissions/getAllRolesPermissionsMappings",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/user-role-permission-mappings");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),ka=Object(D.b)("rolesPermissions/updateRolesIntoPermission",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r,c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.permissionId,r=t.roleIds,e.next=3,i.a.patch("/permissions/update_roles/".concat(a),{roleIds:r});case 3:return c=e.sent,n=c.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ca=Object(D.b)("rolesPermissions/createRoles",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,e.next=3,i.a.post("/roles",{name:a});case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Sa=Object(D.b)("rolesPermissions/createPermission",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/permissions",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fa=Object(D.b)("rolesPermissions/createPermissionRolesMapping",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/user-role-permission-mappings",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Da=Object(D.b)("rolesPermissions/getAllRoles",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/roles");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),Pa=Object(D.b)("rolesPermissions/getAllPermissions",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/permissions");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))),Aa=Object(D.b)("permissions/byRoleId",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/permissions/roles/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Na=Object(D.b)("rolesPermissions/byUserId",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/user-role-permission-mappings/users/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ia=Object(D.b)("rolesPermissions/deactivate",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/user-role-permission-mappings/deactivate/"+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ea=Object(D.c)({name:"rolesPermission",initialState:{rolesPermissionsStatus:"idle",rolesPermissions:[],updateRolesStatus:"idle",createRolesStatus:"idle",createPermissionStatus:"idle",getAllRolesStatus:"idle",getAllPermissionsStatus:"idle",permissionsByRoleStatus:"idle",createRolesPermissionMappingStatus:"idle",getAllRolesPermissionsMappingsByUserStatus:"idle",deactivateMappingStatus:"idle",roles:[],permissions:[],userRoles:[],userPermissions:[],permissionsByRole:[]},reducers:{getUserRolesPermissionsByMapping:function(e,t){e.userRoles=[],e.userPermissions=[],e.rolesPermissions.map((function(a){a.userId===t.payload&&(a.role&&e.userRoles.push(a.role),a.permission&&e.userPermissions.push(a.permission))}))},clearUserPermissions:function(e){e.userPermissions=[],e.userRole=[],e.rolesPermissions=[]}},extraReducers:(la={},Object(w.a)(la,wa.pending,(function(e,t){e.rolesPermissionsStatus="loading"})),Object(w.a)(la,wa.fulfilled,(function(e,t){e.rolesPermissionsStatus="success",e.rolesPermissions=t.payload})),Object(w.a)(la,wa.rejected,(function(e,t){e.rolesPermissionsStatus="failed"})),Object(w.a)(la,ka.pending,(function(e,t){e.updateRolesStatus="loading"})),Object(w.a)(la,ka.fulfilled,(function(e,t){e.updateRolesStatus="success"})),Object(w.a)(la,ka.rejected,(function(e,t){e.updateRolesStatus="failed"})),Object(w.a)(la,Ca.pending,(function(e,t){e.createRolesStatus="loading"})),Object(w.a)(la,Ca.fulfilled,(function(e,t){e.createRolesStatus="success"})),Object(w.a)(la,Ca.rejected,(function(e,t){e.createRolesStatus="failed"})),Object(w.a)(la,Sa.pending,(function(e,t){e.createPermissionStatus="loading"})),Object(w.a)(la,Sa.fulfilled,(function(e,t){e.createPermissionStatus="success",e.permissions=[].concat(Object(we.a)(e.permissions),[t.payload])})),Object(w.a)(la,Sa.rejected,(function(e,t){e.createPermissionStatus="failed"})),Object(w.a)(la,Da.pending,(function(e,t){e.getAllRolesStatus="loading"})),Object(w.a)(la,Da.fulfilled,(function(e,t){e.getAllRolesStatus="success",e.roles=t.payload})),Object(w.a)(la,Da.rejected,(function(e,t){e.getAllRolesStatus="failed"})),Object(w.a)(la,Pa.pending,(function(e,t){e.getAllPermissionsStatus="loading"})),Object(w.a)(la,Pa.fulfilled,(function(e,t){e.getAllPermissionsStatus="success",e.permissions=t.payload})),Object(w.a)(la,Pa.rejected,(function(e,t){e.getAllPermissionsStatus="failed"})),Object(w.a)(la,Aa.pending,(function(e,t){e.permissionsByRoleStatus="loading"})),Object(w.a)(la,Aa.fulfilled,(function(e,t){e.permissionsByRoleStatus="success",e.permissionsByRole=t.payload})),Object(w.a)(la,Aa.rejected,(function(e,t){e.permissionsByRoleStatus="failed"})),Object(w.a)(la,Fa.pending,(function(e,t){e.createRolesPermissionMappingStatus="loading"})),Object(w.a)(la,Fa.fulfilled,(function(e,t){e.createPermissionStatus="success",e.rolesPermissions=[].concat(Object(we.a)(e.rolesPermissions),[t.payload])})),Object(w.a)(la,Fa.rejected,(function(e,t){e.createRolesPermissionMappingStatus="failed"})),Object(w.a)(la,Na.pending,(function(e,t){e.getAllRolesPermissionsMappingsByUserStatus="loading"})),Object(w.a)(la,Na.fulfilled,(function(e,t){e.getAllRolesPermissionsMappingsByUserStatus="success",console.log(t.payload),t.payload.map((function(t){t.role&&e.userRoles.push(t.role),t.permission&&e.userPermissions.push(t.permission)}))})),Object(w.a)(la,Na.rejected,(function(e,t){e.getAllRolesPermissionsMappingsByUserStatus="failed"})),Object(w.a)(la,Ia.pending,(function(e,t){e.deactivateMappingStatus="loading"})),Object(w.a)(la,Ia.fulfilled,(function(e,t){e.deactivateMappingStatus="success"})),Object(w.a)(la,Ia.rejected,(function(e,t){e.deactivateMappingStatus="failed"})),la)}),za=Ea.actions,Ta=(za.getUserRolesPermissionsByMapping,za.clearUserPermissions),Ma=Ea.reducer,Ra=Object(D.b)("campaignManagement/fetchRowData",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o,i,l,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.getState,c=r().campaignManagement,n="".concat("https://custprofileapi.europ-assistance.in","/customers/search_customers_by_attr"),s=[],o=null,i=S.a.mark((function e(){var t,a,r,i,u,j;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d[l],(a=c.rows[t]).first&&a.second&&a.third){e.next=4;break}throw new Error("Row has empty/default values. Fetching aborted.");case 4:return r={information_type:a.first.toLowerCase().split(" ").join("_"),category:a.second.toLowerCase().split(" ").join("_"),value:a.third.toLowerCase().split(" ").join("_")},e.next=7,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:return i=e.sent,e.next=10,i.json();case 10:u=e.sent,j=u.map((function(e){return e.id})),o=null===o?new Set(j):new Set(Object(we.a)(o).filter((function(e){return j.includes(e)}))),s.push({rowKey:t,figures:o.size,customerIDs:Object(we.a)(o)});case 14:case"end":return e.stop()}}),e)})),l=0,d=Object.keys(c.rows);case 7:if(!(l<d.length)){e.next=12;break}return e.delegateYield(i(),"t0",9);case 9:l++,e.next=7;break;case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Ba=Object(D.b)("campaignManagement/fetchFiguresForRow",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o,i,l,d,u,j,b,p;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.getState,c=r().campaignManagement,(n=c.rows[t])&&n.first&&n.second&&n.third){e.next=5;break}throw new Error("Row data is missing or incomplete. Fetching aborted.");case 5:return s="".concat("https://custprofileapi.europ-assistance.in","/customers/search_customers_by_attr"),o={information_type:n.first.toLowerCase().split(" ").join("_"),category:n.second.toLowerCase().split(" ").join("_"),value:n.third.toLowerCase().split(" ").join("_")},e.next=9,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 9:return i=e.sent,e.next=12,i.json();case 12:for(l=e.sent,d=l.map((function(e){return e.id})),u=d,j=0,b=Object.keys(c.rows);j<b.length;j++)p=b[j],Number(p)<Number(t)&&function(){var e=c.rows[p];u=u.filter((function(t){return e.customerIDs.includes(t)}))}();return e.abrupt("return",{rowId:t,figures:u.length,customerIDs:u});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),_a=Object(D.b)("campaignManagement/createCampaign",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o,i,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.getState,c=a.rejectWithValue,n=r().campaignManagement,s="".concat("https://custprofileapi.europ-assistance.in","/campaign"),o=n.selectedCombinations.filter((function(e){return"Interests"===e.first&&e.third})).map((function(e){return e.third.value})),i={name:n.eventName,eventBased:!0,triggerTime:n.tabData.Email.timelineState.recurrence.recurrenceTime,type:"EMAIL",recurrenceType:n.tabData.Email.timelineState.recurrence.type.toUpperCase(),start:n.tabData.Email.timelineState.startDate,end:n.tabData.Email.timelineState.endDate,templateText:n.tabData.Email.content,customerIDs:n.allCustomerIDs,keywordsUsed:o},console.log("Publish body",i),e.prev=6,e.next=9,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 9:if(l=e.sent,console.log("response",l),l.ok){e.next=13;break}throw new Error("Failed to create campaign");case 13:return e.abrupt("return",l.json());case 16:return e.prev=16,e.t0=e.catch(6),e.abrupt("return",c(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,a){return e.apply(this,arguments)}}()),La={isModalOpen:!1,dropdownData:{"Personal Information":{Age:["25-30","31-35"],Gender:["Male","Female"],"Marital Status":["Single","Married"],Location:["Delhi","Mumbai"]},Interests:{},Occupation:"",Activity:"","Family Details":"","Financial Information":"","Insurance Details":"",Vehicle:"",Health:""},rows:Object(w.a)({},Date.now().toString(),{first:"",second:"",third:"",figures:null,customerIDs:[]}),allCustomerIDs:[],selectedCombinations:[],eventName:"",eventDate:null,step:1,activeTab:"Email",startDate:null,endDate:null,tabData:{Email:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:500},SMS:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:160},Notification:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:250},Whatsapp:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:2e3}},radarData:[{count:120,subject:"EZ-Auto"},{count:98,subject:"Cyberior"},{count:86,subject:"Homecare"},{count:99,subject:"E-Portal 2.0"},{count:85,subject:"EZ-Travel"}],downloadDataStatus:null,error:null,rowIdsArray:[],loadingStates:{},errors:{}},Ka=Object(D.c)({name:"campaignManagement",initialState:La,reducers:{toggleModal:function(e,t){e.isModalOpen=t.payload},updateDropdownData:function(e,t){e.dropdownData=t.payload},updateRows:function(e,t){e.rows=t.payload,e.rowIdsArray=[],e.allCustomerIDs=Object(we.a)(new Set(Object.values(e.rows).filter((function(e){return e.customerIDs&&e.customerIDs.length})).flatMap((function(e){return e.customerIDs}))))},updateSelectedCombinations:function(e,t){e.selectedCombinations=t.payload},setCampaignName:function(e,t){e.campaignName=t.payload},setEventName:function(e,t){e.eventName=t.payload},setEventDate:function(e,t){e.eventDate=t.payload},setStep:function(e,t){e.step=t.payload},setStartDate:function(e,t){e.startDate=t.payload},setEndDate:function(e,t){e.endDate=t.payload,e.eventDate=t.payload},setActiveTab:function(e,t){e.activeTab=t.payload},updateTabData:function(e,t){e.tabData=t.payload},setRadarData:function(e,t){e.radarData=t.payload},resetModal:function(e){e.step=La.step,e.campaignName=La.campaignName,e.eventName=La.eventName,e.activeTab=La.activeTab,e.tabData=La.tabData,e.eventDate=La.eventDate}},extraReducers:(da={},Object(w.a)(da,Ra.pending,(function(e){e.downloadDataStatus="loading"})),Object(w.a)(da,Ra.fulfilled,(function(e,t){e.downloadDataStatus="success",t.payload.forEach((function(t){e.rows[t.rowKey].figures=t.figures,e.rows[t.rowKey].customerIDs=t.customerIDs})),e.rowIdsArray=Object(we.a)(new Set([].concat(Object(we.a)(e.rowIdsArray),Object(we.a)(t.payload.map((function(e){return e.rowKey}))))));var a=Math.max.apply(Math,Object(we.a)(e.rowIdsArray.map(Number)));e.allCustomerIDs=Object(we.a)(e.rows[a].customerIDs)})),Object(w.a)(da,Ra.rejected,(function(e,t){e.downloadDataStatus="failed",e.error=t.error.message})),Object(w.a)(da,Ba.pending,(function(e,t){var a=t.meta.arg;e.loadingStates[a]="loading",e.errors[a]=null})),Object(w.a)(da,Ba.fulfilled,(function(e,t){var a=t.payload,r=a.rowId,c=a.figures,n=a.customerIDs;e.rows[r].figures=c,e.rows[r].customerIDs=n,e.loadingStates[r]="loaded";var s=Math.max.apply(Math,Object(we.a)(Object.keys(e.rows).map(Number)));Number(r)===s&&(e.allCustomerIDs=Object(we.a)(n))})),Object(w.a)(da,Ba.rejected,(function(e,t){var a=t.meta.arg;e.loadingStates[a]="error",e.errors[a]=t.error.message})),da)}),Ua=Ka.actions,Ha=Ua.toggleModal,qa=Ua.updateDropdownData,Ga=Ua.updateRows,Wa=Ua.updateSelectedCombinations,Ya=(Ua.setCampaignName,Ua.setEventName),Va=Ua.setEventDate,Ja=Ua.setStep,Za=(Ua.setStartDate,Ua.setEndDate,Ua.setActiveTab),Qa=Ua.updateTabData,Xa=(Ua.setRadarData,Ua.resetModal),$a=function(e){return e.campaignManagement.radarData},er=Ka.reducer,tr=Object(D.b)("campaign/fetchData",Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://custprofileapi.europ-assistance.in","/campaign/reports/all"));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Network response was not ok");case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))),ar=Object(D.c)({name:"campaign",initialState:{data:[],campaignNames:[],selectedCampaigns:[],status:"idle",error:null},reducers:{selectCampaign:function(e,t){e.selectedCampaigns=t.payload}},extraReducers:function(e){e.addCase(tr.pending,(function(e){e.status="loading"})).addCase(tr.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload,e.campaignNames=t.payload.map((function(e){return e.campaignName}))})).addCase(tr.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),rr=ar.actions.selectCampaign,cr=ar.reducer,nr="".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/groupByAll"),sr=Object(D.b)("profileDataCard/fetchProfileData",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n,s,o,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.getState,console.log("Entered from dispatch",t),c=r().profileDataCard.profileTypeDemoStats,console.log("profileTypeDemoStats",c),!(t.profileType&&t.demographic&&c[t.profileType]&&c[t.profileType][t.demographic])){e.next=6;break}return e.abrupt("return",{});case 6:return e.next=8,i.a.post(nr,t);case 8:if(n=e.sent,console.log("Response ",n),!t.profileType||!t.demographic){e.next=13;break}return s=n.data[t.demographic],e.abrupt("return",{profileType:t.profileType,demographic:t.demographic,data:s,requestBody:t});case 13:return o=n.data.profiles.map((function(e){var t=or.displayAndColorMappings[e.profileType].displayName||e.profileType;return{name:"".concat(t),value:e.count,color:or.displayAndColorMappings[e.profileType].color||"#DE896599",src:"".concat(t)}})),l=o.reduce((function(e,t){return e+t.value}),0),e.abrupt("return",{transformedData:o,totalCount:l,requestBody:t});case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),or={hoveredItem:null,data:[],totalCount:0,status:"idle",error:null,profileTypeDemoStats:{},requestBody:null,displayAndColorMappings:{food:{displayName:"Foodie",color:"#DE896599"},sports:{displayName:"Sports Fan",color:"#ff990099"},travel:{displayName:"Avid Traveller",color:"#2745D999"},music:{displayName:"Musicophile",color:"#E54B4B99"},fitness:{displayName:"Fitness Freak",color:"#80008099"},automobile:{displayName:"Auto Lover",color:"#00ff0099"},gadget:{displayName:"Gadgets Freaks",color:"#56C3A699"},technology:{displayName:"Techie",color:"#66003399"}}},ir=Object(D.c)({name:"profileDataCard",initialState:or,reducers:{setHoveredItem:function(e,t){e.hoveredItem=t.payload},clearHoveredItem:function(e){e.hoveredItem=null}},extraReducers:function(e){e.addCase(sr.pending,(function(e){e.status="loading"})).addCase(sr.fulfilled,(function(e,t){e.status="succeeded",t.payload.transformedData&&(e.data=t.payload.transformedData,e.totalCount=t.payload.totalCount),t.payload.profileType&&t.payload.demographic&&(e.profileTypeDemoStats[t.payload.profileType]||(e.profileTypeDemoStats[t.payload.profileType]={}),e.profileTypeDemoStats[t.payload.profileType][t.payload.demographic]=t.payload.data),e.requestBody=t.payload.requestBody})).addCase(sr.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}),lr=ir.actions,dr=lr.setHoveredItem,ur=lr.clearHoveredItem,jr=function(e){return e.profileDataCard.data},br=function(e){return e.profileDataCard.requestBody},pr=function(e){return e.profileDataCard.profileTypeDemoStats},fr=ir.reducer,hr=("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly"),Object(D.b)("customerProfileTool/fetchCustomerProfileData",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly/").concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch customer data");case 5:return e.next=7,a.json();case 7:return r=e.sent,console.log("month api",r),e.abrupt("return",r.map((function(e){return{name:e.month,customers:e.count,profiles:0}})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),Or=Object(D.c)({name:"customerProfileTool",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(hr.pending,(function(e){e.status="loading"})).addCase(hr.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload})).addCase(hr.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}).reducer,mr=("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly"),Object(D.b)("profileCount/fetchProfileCount",function(){var e=Object(F.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly/").concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch customer data");case 5:return e.next=7,a.json();case 7:return r=e.sent,console.log("month api",r),e.abrupt("return",r.map((function(e){return{name:e.month,customers:0,profiles:e.count}})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),xr=Object(D.c)({name:"profileCount",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(mr.pending,(function(e){e.status="loading"})).addCase(mr.fulfilled,(function(e,t){e.status="succeeded",e.data=t.payload})).addCase(mr.rejected,(function(e,t){e.status="failed",e.error=t.error.message}))}}).reducer,gr=Object(D.b)("campaigns/fetchCampaigns",function(){var e=Object(F.a)(S.a.mark((function e(t,a){var r,c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/campaign"));case 4:return c=e.sent,console.log("Campaign List response data",c.data),e.abrupt("return",c.data);case 9:return e.prev=9,e.t0=e.catch(1),console.error("Error fetching campaigns:",e.t0),e.abrupt("return",r((null===(n=e.t0.response)||void 0===n?void 0:n.data)||"Unable to fetch campaigns"));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}());function vr(e){var t=new Date,a=new Date(e.start),r=new Date(e.end);return r<t?"Closed":a>t?"Pending":t>=a&&t<=r?e.isActive?"On-going":"Cancelled":"Unknown"}var yr=Object(D.c)({name:"campaign",initialState:{campaignStatus:"idle",campaigns:[],error:null},reducers:{},extraReducers:(ua={},Object(w.a)(ua,gr.pending,(function(e){e.campaignStatus="loading",e.error=null})),Object(w.a)(ua,gr.fulfilled,(function(e,t){console.log("Received campaigns:",t.payload),e.campaignStatus="success",e.campaigns=t.payload.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{status:vr(e)})})),console.log("Final campaigns for table:",t.payload)})),Object(w.a)(ua,gr.rejected,(function(e,t){e.campaignStatus="failed",e.error=t.payload})),ua)}).reducer,wr=Object(D.a)({reducer:{auth:ma,customer:M,keyword:Ot,rolePermission:Ma,campaignManagement:er,campaign:cr,profileDataCard:fr,customerProfileTool:Or,profileCount:xr,profileTypesCustomerMapping:st,campaignListSlice:yr,elasticCustomers:V}}),kr=["path"];function Cr(e){var t=e.path,a=Object(ae.a)(e,kr);return Object(m.c)((function(e){return e.auth})).isLoggedIn?Object(de.jsx)(v.b,Object(k.a)({path:t},a)):Object(de.jsx)(v.a,{to:"/login"})}var Sr=a(1043),Fr=a(1026),Dr=a.p+"static/media/login.fb9a0a6a.png",Pr=a.p+"static/media/eaLogo.f8ac5978.png",Ar=a(534),Nr=function(e){var t=e.setCaptchaStatus;return Object(de.jsx)("div",{children:Object(de.jsx)(Ar.a,{sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onChange:function(e){console.log("Captcha value:",e),e&&t(!0)}})})},Ir=function(e){var t=Object(g.e)(),a={visibilityToggle:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"}},label:{color:"#0d5ff999"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(de.jsx)(me.a,Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e))},Er=function(e){var t=Object(g.e)(),a={rightSection:{pointerEvents:"none"},label:{color:"#0d5ff999"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(de.jsx)(Oe.a,Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e))},zr=function(e){var t=Object(g.e)(),a={root:{width:"100%",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white","&:hover":{backgroundImage:"dark"===t.colorScheme?t.colors.teal[9]:"radial-gradient(#FFFFFF 1% ,#F3F6FF)",color:"dark"===t.colorScheme?t.white:"#0d5ff9",border:"1px solid #0d5ff9"}}};return Object(de.jsx)(ge.a,Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e))};function Tr(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(""),s=Object(O.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)(!1),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(m.b)(),p=Object(v.h)(),f=Object(m.c)((function(e){return e.auth})),h=f.status,x=f.isLoggedIn,g=f.user,w=Object(m.c)((function(e){return e.rolePermission})),k=(w.rolesPermissionsStatus,w.rolesPermissions,w.userPermissions),C=w.getAllRolesPermissionsMappingsByUserStatus,S={profile_dashboard:"/",customer_dashboard:"/customers"};return Object(r.useEffect)((function(){"success"===h&&x&&(b(Na(g._id)),b(fa()))}),[h]),Object(r.useEffect)((function(){"success"==C&&(k.length>0&&S[k[0].name]?p(S[k[0].name]):p("/pd"))}),[C,p]),Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(X.a,{h:"100vh",sx:{backgroundImage:"radial-gradient(#F2F2F2 50% ,#F3F6FF)"},children:Object(de.jsxs)(Ce.a,{pt:"8%",grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(oe.a,{children:Object(de.jsx)(X.a,{children:Object(de.jsx)(Sr.a,{style:{width:"500px",height:"550px"},src:Dr,radius:"md",children:Object(de.jsx)(Ge.a,{p:"5%",h:"100%",justify:"end",children:Object(de.jsx)(ee.a,{c:"white",children:Object(de.jsx)(se.a,{justify:"end",children:Object(de.jsx)(y.a,{variant:"gradient",gradient:{from:"#0d5ff9",to:"#F3F6FF",deg:45},children:"Customer Profiling"})})})})})})})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(X.a,{children:Object(de.jsx)(oe.a,{children:Object(de.jsxs)(Ge.a,{w:"80%",justify:"center",align:"stretch",children:[Object(de.jsx)(X.a,{children:Object(de.jsx)(oe.a,{children:Object(de.jsx)(Fr.a,{width:150,height:128,src:Pr,bg:"#F2F2F2"})})}),Object(de.jsx)(Se.a,{shadow:"lg",radius:"md",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(Er,{label:"Email",placeholder:"you@ea.in",value:a,required:!0,onChange:function(e){return c(e.target.value)}}),Object(de.jsx)(Ir,{label:"Password",placeholder:"Your password",required:!0,onChange:function(e){return i(e.target.value)}}),Object(de.jsx)(le.a,{position:"apart",children:Object(de.jsx)(ee.a,{size:"sm",c:"#0d5ff9",children:"Forgot Password"})}),Object(de.jsx)(Nr,{setCaptchaStatus:j}),Object(de.jsx)(zr,{type:"submit",disabled:!u,onClick:function(e){e.preventDefault(),b(ja({email:a,password:o}))},children:"loading"===h?Object(de.jsx)(de.Fragment,{children:"Signing in"}):Object(de.jsx)(de.Fragment,{children:"Sign in"})}),"failed"===h&&Object(de.jsx)(ee.a,{style:{color:"red"},children:"Invalid credentials !"})]})})]})})})})]})})})}var Mr={"Avid Traveler":a.p+"static/media/Avid Traveler.153391f9.png","Fitness Freak":a.p+"static/media/Fitness Freak.46faf880.png",Foodie:a.p+"static/media/Foodie.2aa654ef.png","Sports Fan":a.p+"static/media/Sports Fan.2152ca0c.png",Techie:a.p+"static/media/Techie.4d48204f.png",AddProfile:a.p+"static/media/AddProfile.4fbe8ef9.png"},Rr=(a(592),function(e){var t=e.shouldBounce,a=e.onClick,c=Object(r.useState)(""),n=Object(O.a)(c,2),s=n[0],o=n[1];return Object(r.useEffect)((function(){o(t?"bounce 1s ease 3":"")}),[t]),Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)("div",{style:{cursor:"pointer",animation:s,width:"100px",height:"100px",borderRadius:"50%",backgroundImage:"url(".concat(Mr.AddProfile,")"),backgroundSize:"cover",backgroundPosition:"center"},onClick:a})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:700,size:"sm",mt:-10,children:"Add Profile Details"})})]})})}),Br={625888:"64898d22d5fb0269864e8a28",1234561236:"6489b89ca22035a008b7186e",9493486611:"6489b89da22035a008b71872",63252:"6489b8a0a22035a008b71877",9632389602:"6489b8a0a22035a008b7187b",6232522:"6489b8a2a22035a008b71881",5222200:"6489b8a3a22035a008b71884",8801214640:"6489b8a6a22035a008b7188c",9831015310:"6489b8b3a22035a008b718a1",9818403793:"6489b8b4a22035a008b718a4",8141405397:"6489b8b4a22035a008b718a7",212114:"6489b8b5a22035a008b718aa",9844521636:"6489b8b6a22035a008b718af",7978341669:"6489b8b8a22035a008b718b4",6378564387:"6489b8b8a22035a008b718b7",1212121313:"6489b8b9a22035a008b718bb",9748248996:"6489b8bba22035a008b718bf",1234561238:"6489b8bba22035a008b718c2",12022224:"6489b8bca22035a008b718c5"},_r=function(){var e=Object(g.e)(),t=Object(r.useState)(!1),a=Object(O.a)(t,2),c=a[0],n=a[1],s=Object(r.useState)(!1),o=Object(O.a)(s,2),l=o[0],d=o[1],u=Object(r.useRef)(null),j=Object(r.useState)(""),b=Object(O.a)(j,2),p=b[0],f=b[1],h=Object(r.useState)(!1),m=Object(O.a)(h,2),x=m[0],v=m[1],y=Object(r.useState)(""),w=Object(O.a)(y,2),C=w[0],D=w[1],P=Object(r.useState)(""),A=Object(O.a)(P,2),N=A[0],I=A[1];Object(r.useEffect)((function(){var e=function(e){"closeIframe"===e.data&&d(!1)};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[]);var E=function(){var e=Object(F.a)(S.a.mark((function e(){var t,a,r,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=30;break}if(!(t=Br[p])){e.next=28;break}return e.prev=3,e.next=6,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/customers/").concat(t));case 6:return a=e.sent,e.next=9,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile_mapping/").concat(t));case 9:return r=e.sent,e.next=12,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile/").concat(t));case 12:if(c=e.sent,console.log("profile response",a),s={name:a.data.customer_details.personal_details.full_name||"-",email:a.data.customer_details.email||"-",mobileNo:a.data.customer_details.mobile||"-",source:a.data.customer_details.source||"-",city:a.data.customer_details.personal_details.location||"-",customerId:t},console.log("details",s),console.log("response Categories data",r),!(a.data&&r.data&&c.data)){e.next=21;break}I("/agent?".concat(new URLSearchParams(Object(k.a)(Object(k.a)({},s),{},{profileCompletion:c.data.completionPercentage.toString(),categories:JSON.stringify(r.data.categories),profilingTypes:"Foodie"})))),e.next=22;break;case 21:throw new Error("Failed to get updated profile details");case 22:n(!0),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),console.error("Failed to fetch updated profile details:",e.t0);case 28:e.next=31;break;case 30:n(!1);case 31:case"end":return e.stop()}}),e,null,[[3,25]])})));return function(){return e.apply(this,arguments)}}(),z=function(){d((function(e){return!e}))};return Object(de.jsxs)("div",{children:[Object(de.jsx)(oe.a,{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(Oe.a,{label:"Mobile Number",value:p,onChange:function(e){var t=e.currentTarget.value;f(t),function(e){var t=/^([6-9]{1}\d{9})$/.test(e);v(!0),D(t?"":"Please enter a valid mobile number")}(t)},required:!0,error:C}),Object(de.jsx)(ge.a,{onClick:E,disabled:!x,children:"Simulate Call"}),Object(de.jsx)(ge.a,{onClick:function(){n(!1)},children:"End Call"})]})}),c&&Object(de.jsx)("div",{style:{position:"fixed",bottom:e.spacing.xs,right:e.spacing.xs,zIndex:1e3},children:Object(de.jsx)(Rr,{shouldBounce:c,onClick:z})}),l&&Object(de.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[Object(de.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",zIndex:1001},children:Object(de.jsx)(ie.a,{onClick:z,size:"xl",c:"white",children:Object(de.jsx)(Ft.a,{size:24})})}),Object(de.jsx)("iframe",{ref:u,src:N,title:"Sample iFrame",style:{position:"absolute",top:"50%",left:"50%",width:"60%",height:"75%",transform:"translate(-50%, -50%)",border:"none",borderRadius:e.radius.md},allowFullScreen:!0})]})]})},Lr=a(329),Kr=a(962),Ur=a(2);var Hr=a(535),qr=function(e){var t=e.details,a=e.onDetailChange,r=e.editable;return Object(de.jsx)(X.a,{children:Object.entries(t).filter((function(e){var t=Object(O.a)(e,2),a=t[0];t[1];return"customerId"!=a})).map((function(e){var t=Object(O.a)(e,2),c=t[0],n=t[1];return Object(de.jsxs)(Ce.a,{gutter:"5",justify:"start",align:"center",children:[Object(de.jsx)(Hr.a,{span:3,children:Object(de.jsx)(ee.a,{fw:550,size:12,children:c.replace(/^\w/,(function(e){return e.toUpperCase()}))})}),Object(de.jsx)(Hr.a,{span:1,children:Object(de.jsx)(ee.a,{children:":"})}),Object(de.jsx)(Hr.a,{span:8,children:r&&"mobileNo"!==c?Object(de.jsx)(Oe.a,{size:"12",sx:{input:{backgroundColor:"#F1F5F9",border:0}},fz:"sm",c:"dimmed",value:n,onChange:function(e){return a&&a(c,e.currentTarget.value)}}):Object(de.jsx)(ee.a,{fz:"sm",c:"dimmed",children:n})})]},c)}))})},Gr=function(e){var t=e.percentage;return Object(de.jsx)("div",{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(ee.a,{fw:550,size:15,children:"Profile Completion"}),Object(de.jsx)(oe.a,{mb:20,children:Object(de.jsx)($.a,{size:70,thickness:5,sections:[{value:t,color:t>75?"#1D9B25":t>60?"#CFA400":"#D85972"}],label:Object(de.jsxs)(ee.a,{color:"",weight:20,align:"center",size:"xs",children:[t,"%"]})})})]})})},Wr=function(e){var t=e.profilingInterests;return Object(de.jsx)(le.a,{position:"center",children:t.map((function(e){if(e){var t=Mr[e];return Object(de.jsxs)("div",{children:[Object(de.jsx)(Qe.a,{size:80,radius:80,src:t}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:550,size:15,children:e})})]},e)}}))})},Yr=["label","onRemove"];function Vr(e){var t=e.setKeywordsAdded,a=e.customerId,c=Object(r.useState)([]),n=Object(O.a)(c,2),s=n[0],o=n[1],l=Object(r.useState)([]),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useRef)(null),p=function(e){j(e)},f=function(e){var t=e.label,a=e.onRemove,r=Object(ae.a)(e,Yr),c=Object(de.jsx)(ie.a,{onMouseDown:a,size:"xs",color:"blue",radius:"xl",variant:"transparent",children:Object(de.jsx)(Ft.a,{size:Object(Ze.b)(10)})});return Object(de.jsx)("div",Object(k.a)(Object(k.a)({},r),{},{children:Object(de.jsx)(Fe.a,{size:"sm",variant:"outline",rightSection:c,children:t},t)}))};Object(r.useEffect)((function(){i.a.get("".concat("https://custprofileapi.europ-assistance.in","/keywords")).then(function(){var e=Object(F.a)(S.a.mark((function e(t){var r,c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat("https://custprofileapi.europ-assistance.in","/keywords/customer/").concat(a));case 2:r=e.sent,console.log("customer Keywords Data",r),c=xt.a.differenceWith(t.data.data,r.data.data,xt.a.isEqual),n=c.map((function(e){var t=e.id,a=e.category,r=e.value;return{value:t,label:"".concat(r," [").concat(a,"]")}})),o(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){var e;null===(e=b.current)||void 0===e||e.focus(),t(u)}),[u]);var h=function(){return Object(de.jsx)(ut.a,{hoverOnSearchChange:!0,variant:"filled",radius:"md",label:Object(de.jsx)(ee.a,{fw:700,children:"Keywords (".concat(u.length,")")}),value:u,data:s,searchable:!0,creatable:!0,getCreateLabel:function(e){return"+ Create ".concat(e)},onChange:p,placeholder:"Enter customer's keywords",clearable:!0,filter:function(e,t,a){return!t},onCreate:function(e){var t={value:e,label:e};return o((function(e){return[].concat(Object(we.a)(e),[t])})),t},styles:{input:{minHeight:"7rem"}},valueComponent:f,transitionProps:{duration:150,transition:"pop-top-left",timingFunction:"ease"},ref:b})};return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"},children:Object(de.jsx)(h,{})})})}a(593);var Jr=function(e){var t=e.categories,a=e.setQuestionsHistory,c=Object(r.useState)({}),n=Object(O.a)(c,2),s=n[0],o=n[1],l=Object(r.useState)([]),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!0),p=Object(O.a)(b,2),f=p[0],h=p[1];return Object(r.useEffect)((function(){h(!0);var e=function(){var e=Object(F.a)(S.a.mark((function e(){var r,c,n,s,o,l,d,u,b,p,f,O,m,x,g,v,y,w,k,C;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=Object.keys(t),c=[],n=0;n<3;n++)s=Math.floor(Math.random()*r.length),o=r[s],l=t[o],c.push(l),r.splice(s,1);d=[],u=0,b=c;case 5:if(!(u<b.length)){e.next=24;break}p=b[u],f=[],O=Object(Ur.a)(p);try{for(O.s();!(m=O.n()).done;)x=m.value,f.push("key: ".concat(x.key,", level: ").concat(x.level))}catch(S){O.e(S)}finally{O.f()}return g={input:f.join(", ")},e.next=13,i.a.post("".concat("https://custprofileapi.europ-assistance.in","/process"),g,{headers:{"Content-Type":"application/json"}});case 13:v=e.sent,y=v.data.result,w=void 0,k=void 0,C=void 0;try{w=y.split(": ")[2].split(", level")[0],k=parseInt(y.split(", level: ")[1].split(", Answers")[0]),C=y.split("Answers: ")[1].split(", ")}catch(F){console.error("Failed to get a question "),w="Test Question",k=2,C=["Test Answer 1","Test Answer 2","Test Answer 3","None"]}C.push("None"),d.push({id:d.length+1,question:w,answers:C.map((function(e,t){return{id:t+1,text:e}})),type:"multiple",level:k,category:p[0].key});case 21:u++,e.next=5;break;case 24:j(d),a(d),h(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){var e=u.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{selectedAnswers:s[e.id]||[]})}));a(e)}),[s]),f?Object(de.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(de.jsx)(te.a,{color:"red",variant:"bars"})}):Object(de.jsx)("div",{children:Object(de.jsx)(Ge.a,{spacing:"xs",children:Object(de.jsx)(kt.a.Autosize,{mah:220,maw:400,mx:"auto",children:u.map((function(e,t){return Object(de.jsxs)("div",{children:[Object(de.jsx)(ee.a,{pt:15,fz:"sm",c:"dimmed",children:"Q".concat(t+1,": ").concat(e.question)}),Object(de.jsx)(le.a,{spacing:1,children:e.answers.map((function(t){var a;return Object(de.jsx)("label",{children:Object(de.jsxs)(le.a,{spacing:4,children:[Object(de.jsx)("input",{type:"checkbox",checked:(null===(a=s[e.id])||void 0===a?void 0:a.includes(t.id))||!1,onChange:function(){return a=e.id,r=t.id,c="multiple"===e.type,void o((function(e){return c&&e[a]?e[a].includes(r)?Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},a,e[a].filter((function(e){return e!==r})))):Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},a,[].concat(Object(we.a)(e[a]),[r]))):Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},a,[r]))}));var a,r,c}}),Object(de.jsx)(ee.a,{fz:"sm",mr:5,c:"dimmed",children:t.text})]})},t.id)}))})]},e.id)}))})})})},Zr=a(162),Qr={name:"",email:"",mobileNo:"",source:"",city:"",customerId:""},Xr=function(){var e=function(){var e,t=Object(v.g)(),a=new URLSearchParams(t.search),r={},c=Object(Ur.a)(a.entries());try{for(c.s();!(e=c.n()).done;){var n=Object(O.a)(e.value,2),s=n[0],o=n[1];r[s]=o}}catch(i){c.e(i)}finally{c.f()}return r}(),t=e.name,a=e.email,c=e.source,n=e.city,s=e.mobileNo,l=e.customerId,d=e.categories,u=e.profileCompletion,j=e.profilingTypes,b=void 0===j?"":j,p=Object(r.useState)({name:t,email:a,mobileNo:s,source:c,city:n,customerId:l}),f=Object(O.a)(p,2),h=f[0],m=f[1],x=Object(r.useState)(parseInt(u,10)),g=Object(O.a)(x,2),y=g[0],C=g[1],D=Object(r.useState)(b.split(",")),P=Object(O.a)(D,2),A=P[0],N=P[1],I=Object(r.useState)(d?JSON.parse(d):{}),E=Object(O.a)(I,2),z=E[0],T=(E[1],Object(r.useState)([{details:h,categories:z,profileCompletion:y,profilingTypes:A}])),M=Object(O.a)(T,2),R=M[0],B=M[1],_=Object(r.useState)(!1),L=Object(O.a)(_,2),K=L[0],U=L[1],H=Object(r.useState)(!1),q=Object(O.a)(H,2),G=q[0],W=q[1],Y=Object(r.useState)([]),V=Object(O.a)(Y,2),J=V[0],Z=V[1],Q=Object(r.useState)([]),$=Object(O.a)(Q,2),te=$[0],ae=$[1];Object(r.useEffect)((function(){var e=R.find((function(e){return e.details.mobileNo===s}));e?(m(e.details),C(e.profileCompletion),N(e.profilingTypes)):(m(Object(k.a)(Object(k.a)({},Qr),{},{mobileNo:s})),C(0))}),[s,R]),Object(r.useEffect)((function(){console.log("questionHistory",J),console.log("categories in AgentEntry",d)}),[J]);var re=function(e){return Zr.a.show({id:"submit-error",withCloseButton:!0,onClose:function(){return console.log("unmounted")},onOpen:function(){return console.log("mounted")},autoClose:5e3,title:e.message,message:"There seems to be a problem with the network",color:"red",icon:Object(de.jsx)(Ft.a,{}),className:"my-notification-class",loading:!1})},ce=function(){Zr.a.show({id:"submit-success",withCloseButton:!0,onClose:function(){return console.log("unmounted")},onOpen:function(){return console.log("mounted")},autoClose:5e3,title:"Success",message:"Profile has been submitted successfully",color:"teal",icon:Object(de.jsx)(St.a,{}),className:"my-notification-class",loading:!1})},ne=function(){var e=Object(F.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat("https://custprofileapi.europ-assistance.in","/question/process"),a={customerId:l,keywords:te,history:J},console.log("body =>",a),console.dir(a),e.next=7,i.a.post(t,a).then(console.log).then(ce).then((function(){return B((function(e){return[].concat(Object(we.a)(e),[{details:h,categories:z,profileCompletion:0,profilingTypes:[]}])}))})).then((function(){return setTimeout((function(){window.parent.postMessage("closeIframe","*")}),2e3)})).catch(re).catch(console.log);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),re(new o.AxiosError("Failed to submit questionHistory!"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ue=function(e){ne()},je=R.some((function(e){return e.details.mobileNo===s}));return Object(de.jsxs)(he.a,{p:10,children:[Object(de.jsxs)(X.a,{children:[Object(de.jsxs)(le.a,{position:"apart",children:[Object(de.jsx)(X.a,{}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:550,children:"Customer"})}),Object(de.jsxs)(se.a,{justify:"flex-end",direction:"column",style:{marginBottom:"10px"},children:[Object(de.jsx)(ie.a,{onClick:ne,children:Object(de.jsx)(Ft.a,{size:15})}),Object(de.jsx)(ie.a,{onClick:function(){G?(document.exitFullscreen(),W(!1)):(document.documentElement.requestFullscreen(),W(!0))},children:Object(de.jsx)(Kr.a,{size:15})})]})]}),Object(de.jsx)(Lr.a,{size:"xs"})]}),Object(de.jsxs)(jt.a,{opened:K,onClose:function(){return U(!1)},title:"Confirm action",size:"xs",transitionProps:{transition:"fade",duration:600,timingFunction:"linear"},children:[Object(de.jsx)(ee.a,{children:"Do you want to submit the changes?"}),Object(de.jsx)(ge.a,{onClick:function(){return ue()},children:"Submit"}),Object(de.jsx)(ge.a,{onClick:function(){return ue()},children:"Discard"})]}),Object(de.jsx)(he.a,{pl:10,pr:10,radius:"md",mt:5,bg:"#f1f3f5",children:Object(de.jsxs)(le.a,{position:"apart",grow:!0,children:[Object(de.jsx)(qr,{details:h,onDetailChange:function(e,t){m((function(a){return Object(k.a)(Object(k.a)({},a),{},Object(w.a)({},e,t))}))},editable:!je}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(Gr,{percentage:y})}),Object(de.jsx)(Wr,{profilingInterests:A})]})}),Object(de.jsxs)(le.a,{position:"apart",grow:!0,children:[Object(de.jsxs)(X.a,{pt:10,children:[Object(de.jsx)(Vr,{setKeywordsAdded:ae,customerId:l}),Object(de.jsx)(Ht,{})]}),Object(de.jsx)(X.a,{children:Object(de.jsx)(Jr,{categories:z,setQuestionsHistory:Z})})]}),Object(de.jsx)(Lr.a,{my:"md",size:"xs"}),Object(de.jsx)(se.a,{justify:"flex-end",children:Object(de.jsx)(ge.a,{bg:"#EF3E42",onClick:ne,children:"Submit"})})]})},$r=a(1045),ec=a(964),tc=a(965);function ac(){var e=Object(x.b)(),t=e.colorScheme,a=e.toggleColorScheme,r="dark"===t;return Object(de.jsx)(ie.a,{variant:"subtle",c:r?"yellow":"white",onClick:function(){return a()},title:"Toggle color scheme",children:r?Object(de.jsx)(ec.a,{size:"1.1rem"}):Object(de.jsx)(tc.a,{size:"1.1rem"})})}var rc=a(967),cc=a(968),nc=a(969),sc=(a(970),a(971)),oc=(a(972),a(966)),ic=a(1027),lc=function(e){var t=e.isModalOpen,a=e.handleModalClose,r=e.selectedUserRoleName,c=e.selectedUser,n=e.setSelectedUser,s=e.permissions,o=e.selectedPermission,i=e.setSelectedPermission,l=e.rolesPermissions,d=e.handleAssignPermission,u=e.users,j=e.selectedRole;return Object(de.jsxs)(de.Fragment,{children:[" ",Object(de.jsxs)(jt.a,{opened:t,onClose:a,title:"Assign permissions",size:"lg",style:{content:{maxHeight:"80vh"}},children:[Object(de.jsx)(ee.a,{fz:"xl",children:"Select user below assigning new permission"}),r&&Object(de.jsxs)(ee.a,{children:[" ROLE : ",r]}),Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),Object(de.jsx)(ic.a,{label:"Select user",placeholder:"Pick one",data:u.map((function(e){return{value:e.id,label:e.agentName||e.email}})),value:c,onChange:n}),Array.isArray(s)&&s.length>0?Object(de.jsx)(ic.a,{label:"Select permission",placeholder:"Pick one",disabled:null===j,data:null===s||void 0===s?void 0:s.map((function(e){return{value:e.id,label:e.name,disabled:l.some((function(t){return t.permissionId===e.id&&t.userId===c}))}})),value:o,onChange:i,dropdownComponent:"div"}):Object(de.jsx)(ee.a,{children:"Loading permissions"}),Object(de.jsx)("br",{}),Object(de.jsx)(ge.a,{variant:"gradient",gradient:{from:"indigo",to:"red"},className:"mt-4",onClick:d,disabled:null===j||null===o||null===j,children:"Assign"})]})]})},dc=function(e){var t=e.useStyles,a=e.initialData,c=e.title,n=t(),s=n.classes,o=n.cx,i=Object(r.useState)(!1),l=Object(O.a)(i,2),d=l[0],u=l[1],j=a.map((function(e){return Object(de.jsxs)("tr",{children:[Object(de.jsx)("td",{children:e.rolename}),Object(de.jsx)("td",{children:e.permissionname}),Object(de.jsx)("td",{children:e.username}),Object(de.jsx)("td",{children:Object(de.jsx)(ge.a,{color:"teal",size:"xs",compact:!0,children:e.isactive})}),Object(de.jsx)("td",{children:e.created_at}),Object(de.jsx)("td",{children:Object(de.jsx)(ie.a,{variant:"light",children:Object(de.jsx)(rc.a,{size:"1rem"})})})]},e.id)}));return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(y.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:c}),Object(de.jsx)(kt.a,{h:600,onScrollPositionChange:function(e){var t=e.y;return u(0!==t)},children:Object(de.jsxs)(Ct.a,{miw:700,striped:!0,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(de.jsx)("thead",{className:o(s.header,Object(w.a)({},s.scrolled,d)),children:Object(de.jsxs)("tr",{children:[Object(de.jsx)("th",{children:"Role Name"}),Object(de.jsx)("th",{children:"Permission Name"}),Object(de.jsx)("th",{children:"User Email"}),Object(de.jsx)("th",{children:"Status"}),Object(de.jsx)("th",{children:"Created At"}),Object(de.jsx)("th",{children:"Action"})]})}),Object(de.jsx)("tbody",{children:j})]})})]})},uc=a(1028),jc=(a(973),a(974),a.p,a(975)),bc=a(180);a(1044);jc.a,jc.a,jc.a,jc.a;var pc=function(e){var t=e.initialData,a=e.title,r=[{header:"Name",accessorKey:"name"},{header:"Permissions",accessorKey:"permissions"},{header:"Created At",accessorKey:"created_at"},{header:"Action",accessorKey:"action",Cell:function(e){var t=e.row;e.column;return Object(de.jsx)(ie.a,{variant:"light",onClick:function(e){e.preventDefault(),console.log("Clicked action for ID: ".concat(t.original.id))},children:Object(de.jsx)(rc.a,{size:"1rem"})})}}];return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(y.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:a}),Object(de.jsx)(je,{columns:r,data:t,onRowClick:function(e){return console.log("Row clicked:",e)}})]})};var fc=function(e){var t=e.initialData,a=e.title,r=t.map((function(e){return{id:e.id,name:e.name,isactive:e.isactive,created_at:e.created_at}})),c=[{header:"Name",accessorKey:"name"},{header:"Status",accessorKey:"isactive",Cell:function(e){var t=e.value;return Object(de.jsx)(zr,{w:80,c:"teal",size:"xs",compact:!0,children:t})}},{header:"Created At",accessorKey:"created_at"}];return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(y.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:a}),Object(de.jsx)(je,{columns:c,data:r,onRowClick:function(e){return console.log("Row clicked:",e)}})]})},hc=a(1029),Oc=a(976),mc=a(1005),xc=function(e){var t=Object(g.e)(),a={rightSection:{pointerEvents:"none",color:"#0d5ff9"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},calendarHeader:{backgroundColor:"#F3F6FF"},day:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},monthList:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},weekday:{color:"dark"===t.colorScheme?t.white:"#0d5ff9"},calendarHeaderLevel:{backgroundColor:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},calendarHeaderControlIcon:{color:"#0d5ff9"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(de.jsx)(mc.a,Object(k.a)(Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e),{},{valueFormat:"DD MMM YYYY",popoverProps:{withinPortal:!0},rightSection:Object(de.jsx)(ie.a,{children:Object(de.jsx)(Oc.a,{color:"#0d5ff9"})})}))},gc=a(977),vc=function(e){var t=Object(g.e)(),a={rightSection:{pointerEvents:"none"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},item:{"&":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"},"&[data-selected]":{"&, &:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"}}}};return Object(de.jsx)(ic.a,Object(k.a)(Object(k.a)({},e),{},{withinPortal:!0,transitionProps:{transition:"scale-y",duration:500,timingFunction:"ease"},styles:Object(k.a)(Object(k.a)({},a),e.styles),rightSection:e.rightSection||Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(gc.a,{})})}))},yc=function(e){var t=e.isModalOpen,a=e.handleModalClose,r=e.handleAddUser,c=e.userDetails,n=e.setUserDetails,s=e.rolesData;return Object(de.jsxs)(jt.a,{opened:t,onClose:a,title:"Create User",style:{content:{maxHeight:"80vh"}},children:[Object(de.jsxs)(hc.a,{cols:2,children:[Object(de.jsx)(Er,{placeholder:"First Name",label:"First Name",value:c.firstname,onChange:function(e){return n(Object(k.a)(Object(k.a)({},c),{},{firstname:e.target.value}))},withAsterisk:!0,required:!0}),Object(de.jsx)(Er,{placeholder:"Last Name",label:"Last Name",value:c.lastname,onChange:function(e){return n(Object(k.a)(Object(k.a)({},c),{},{lastname:e.target.value}))},withAsterisk:!0})]}),Object(de.jsx)(Er,{placeholder:"Email",label:"Email",value:c.email,onChange:function(e){return n(Object(k.a)(Object(k.a)({},c),{},{email:e.target.value}))},withAsterisk:!0,required:!0,type:"email"}),Object(de.jsx)(Er,{placeholder:"Mobile",label:"Mobile",value:c.mobile,withAsterisk:!0,onChange:function(e){return n(Object(k.a)(Object(k.a)({},c),{},{mobile:e.target.value}))}}),Object(de.jsx)(Er,{placeholder:"State",label:"State",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"City",label:"City",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"Address",label:"Address",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"Pincode",label:"Pincode",withAsterisk:!0}),Object(de.jsx)(xc,{placeholder:"Date Of Birth",label:"Date Of Birth",rightSection:Object(de.jsx)(ie.a,{variant:"subtle",children:Object(de.jsx)(Oc.a,{})}),withAsterisk:!0,maxDate:new Date}),Object(de.jsx)(vc,{label:"Role",placeholder:"Select Role",data:s,value:c.role,onChange:function(e){return n(Object(k.a)(Object(k.a)({},c),{},{role:e}))},withAsterisk:!0,required:!0}),Object(de.jsx)(zr,{className:"mt-4",onClick:r,disabled:!c.firstname||!c.lastname||!c.email||!c.role,children:"Submit"})]})},wc=a(1022);function kc(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}function Cc(e){Zr.a.show({title:"Success",message:e,styles:function(e){return{root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}}}})}var Sc=function(e){var t=e.isModalOpen,a=e.curr_user,c=e.handleModalClose,n=e.userRolesPermissions,s=e.userPermissionsOptions,o=e.classes,i=e.cx,l=Object.keys(n).length>0?n.map((function(e){return{id:e.id,permission:e.permission.name,isactive:e.isActive?"active":"disabled",created_at:kc(e.created_at)}})):[],d=Object(g.e)(),u=Object(m.b)(),j=Object(r.useState)(l),b=Object(O.a)(j,2),p=b[0],f=b[1],h=Object(r.useState)(!1),x=Object(O.a)(h,2),v=x[0],k=(x[1],Object(r.useState)(!1)),C=Object(O.a)(k,2),S=C[0],F=C[1],D=Object(r.useState)(null),P=Object(O.a)(D,2),A=P[0],N=P[1],I=Array.isArray(p)?p.map((function(e){return Object(de.jsxs)("tr",{children:[Object(de.jsx)("td",{children:e.permission?e.permission:Object(de.jsx)(ic.a,{label:"Permission",placeholder:"Select Permission",data:s,value:A,onChange:function(e){return N(e)},withAsterisk:!0,required:!0})}),Object(de.jsx)("td",{children:Object(de.jsx)(wc.a,{onClick:function(){return t=e.id,u(Ia(t)),u(wa()),Cc("changed status successfully"),void c();var t},checked:"active"==e.isactive,color:"teal",onLabel:"ACTIVE",offLabel:"DISABLE"})}),Object(de.jsx)("td",{children:e.created_at})]},e.id)})):[];return Object(de.jsxs)(de.Fragment,{children:[console.log(a),Object(de.jsxs)(jt.a,{opened:t,title:"User Actions",onClose:c,overlayProps:{color:"dark"===d.colorScheme?d.colors.dark[9]:d.colors.gray[2],opacity:.55,blur:3},size:"auto",children:[Object(de.jsxs)(Ce.a,{children:[Object(de.jsx)(Ce.a.Col,{span:2,children:Object(de.jsx)(Qe.a,{src:null,alt:"no image here",color:"indigo",radius:"0",size:50})}),Object(de.jsx)(Ce.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Name:"})," ",a.email]})}),Object(de.jsx)(Ce.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Role:"})," ",a.role]})})]}),Object(de.jsx)(Ce.a,{children:Object(de.jsxs)(Ce.a.Col,{span:12,children:[Object(de.jsx)(oc.a,{h:"xl"}),Object(de.jsx)(y.a,{order:4,c:"#4E70EA",children:"User Permissions"}),Object(de.jsx)(oc.a,{h:"xl"}),Object(de.jsxs)(Ct.a,{miw:300,striped:!0,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(de.jsx)("thead",{className:i(o.header,Object(w.a)({},o.scrolled,v)),children:Object(de.jsxs)("tr",{children:[Object(de.jsxs)("th",{children:[Object(de.jsx)(ee.a,{color:"white",children:"Permission"})," "]}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Status"})}),Object(de.jsxs)("th",{children:[Object(de.jsx)(ee.a,{color:"white",children:"Created At"})," "]})]})}),Object(de.jsx)("tbody",{children:I})]}),Object(de.jsx)(oc.a,{h:"xl"}),!S&&Object(de.jsx)(ge.a,{style:{backgroundColor:"black",fontColor:"white"},onClick:function(){var e={id:Math.random(),permission:"",isactive:"active",created_at:kc(new Date)};f([].concat(Object(we.a)(p),[e])),F(!0)},children:"Add Permission"}),S&&Object(de.jsx)(ge.a,{color:"teal",onClick:function(){u(Fa({roleId:a.roleId,permissionId:A,userId:a.id})),u(wa()),Cc("added permission successfully"),c()},children:"Save"})]})})]})]})};var Fc=function(e){var t,a=e.initialData,c=Object(Ue.a)((function(e){return{header:{position:"sticky",top:0,backgroundColor:"#0d5ff9",fontColor:"red",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Ze.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.sm}}}))(),n=c.classes,s=c.cx,o=Object(r.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(!1),j=Object(O.a)(u,2),b=j[0],p=j[1],f=Object(r.useState)(!1),h=Object(O.a)(f,2),x=h[0],g=h[1],k=(Object(v.g)(),Object(m.b)()),C=Object(m.c)((function(e){return e.rolePermission})),D=C.rolesPermissions,P=C.roles,A=C.permissions,N=Object(m.c)((function(e){return e.auth})).users,I={},E=Object(r.useState)({firstname:null,lastname:null,email:null,role:null,mobile:null}),z=Object(O.a)(E,2),T=z[0],M=z[1],R=Object(r.useState)(null),B=Object(O.a)(R,2),_=B[0],L=B[1],K=Object(Ur.a)(D);try{for(K.s();!(t=K.n()).done;){var U=t.value,H=U.userId,q=U.permission.name;I.hasOwnProperty(H)?I[H].push(q):I[H]=[q]}}catch(re){K.e(re)}finally{K.f()}var G,W=N.map((function(e){return e.id})),Y=Object(Ur.a)(W);try{for(Y.s();!(G=Y.n()).done;){var V=G.value;I.hasOwnProperty(V)||(I[V]=[])}}catch(re){Y.e(re)}finally{Y.f()}var J=_&&D.filter((function(e){return e.userId===_.id})),Z=[];_&&A.map((function(e){I[_.id].includes(e.name)||Z.push({value:e.id,label:e.name})}));var Q=Array.isArray(a)?a.map((function(e){return Object(de.jsxs)("tr",{children:[Object(de.jsx)("td",{children:e.email}),Object(de.jsx)("td",{children:e.role}),Object(de.jsx)("td",{children:e.permissions}),Object(de.jsx)("td",{children:Object(de.jsx)(ge.a,{color:"teal",size:"xs",compact:!0,children:e.isactive})}),Object(de.jsx)("td",{children:e.created_at}),Object(de.jsx)("td",{onClick:function(){return L(e),void g(!0)},children:Object(de.jsx)(ie.a,{variant:"light",children:Object(de.jsx)(rc.a,{size:"1rem"})})})]},e.id)})):[],$=P&&Array.isArray(P)&&P.map((function(e){return{value:e.id,label:e.name}})),te=function(){b&&p(!1),x&&g(!1)},ae=function(){var e=Object(F.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={email:T.email,mobile:T.mobile,fullname:"".concat(T.firstname," ").concat(T.lastname),roleId:T.role},e.next=4,k(ha(t));case 4:return e.next=6,k(wa());case 6:p(!1),a="added user successfully",Zr.a.show({title:"Success",message:a,styles:function(e){return{root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}}}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}var a}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return N&&0!==N.length?Object(de.jsx)(de.Fragment,{children:Object(de.jsx)($r.a,{padding:"md",children:Object(de.jsx)(X.a,{sx:{backgroundColor:"white",padding:"50px",marginTop:"-80px"},children:Object(de.jsx)("div",{style:{display:"flex"},children:Object(de.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(de.jsxs)("div",{style:{padding:"10px"},children:[Object(de.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"-65px"},children:[Object(de.jsx)("span",{style:{padding:"10px"},children:Object(de.jsx)(y.a,{pl:5,children:"Users Permisssions"})}),Object(de.jsx)("span",{children:Object(de.jsx)(fe.a,{children:Object(de.jsx)(oe.a,{children:Object(de.jsxs)(se.a,{mt:5,children:[Object(de.jsx)(ge.a,{className:"mt-4",onClick:function(){p(!0)},style:{backgroundColor:"black",fontColor:"white"},children:"+ Create User"}),Object(de.jsx)(yc,{isModalOpen:b,handleAddUser:ae,handleModalClose:te,userDetails:T,setUserDetails:M,rolesData:$})]})})})})]}),Object(de.jsxs)("div",{children:[x&&Object(de.jsx)(Sc,{isModalOpen:x,handleModalClose:te,curr_user:_,userRolesPermissions:J,userPermissionsOptions:Z,classes:n,cx:s}),Object(de.jsx)(kt.a,{h:600,onScrollPositionChange:function(e){var t=e.y;return d(0!==t)},children:Object(de.jsxs)(Ct.a,{miw:700,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(de.jsx)("thead",{className:s(n.header,Object(w.a)({},n.scrolled,l)),children:Object(de.jsxs)("tr",{children:[Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Email"})}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Role"})}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Permissions"})}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Status"})}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Created At"})}),Object(de.jsx)("th",{children:Object(de.jsx)(ee.a,{color:"white",children:"Action"})})]})}),Object(de.jsx)("tbody",{children:Q})]})})]})]})})})})})}):Object(de.jsx)(ke.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}})};function Dc(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}var Pc=function(){var e,t=Object(Ue.a)((function(e){return{header:{position:"sticky",top:0,backgroundColor:"#c2c2c2",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Ze.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.sm}}})),a=Object(r.useState)(!1),c=Object(O.a)(a,2),n=c[0],s=c[1],o=Object(r.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(null),j=Object(O.a)(u,2),b=j[0],p=j[1],f=Object(r.useState)(null),h=Object(O.a)(f,2),x=h[0],g=h[1],y=Object(r.useState)(null),w=Object(O.a)(y,2),k=w[0],C=w[1],S=Object(r.useState)(null),F=Object(O.a)(S,2),D=F[0],P=F[1],A=Object(r.useState)(""),N=Object(O.a)(A,2),I=(N[0],N[1],Object(v.g)()),E=Object(m.b)(),z=Object(m.c)((function(e){return e.rolePermission})),T=z.rolesPermissionsStatus,M=z.rolesPermissions,R=(z.userPermissions,z.permissionsByRole,z.permissionsByRoleStatus,z.permissions),B=z.roles,_=Object(m.c)((function(e){return e.auth})),L=(_.user,_.users),K={},U=Object(Ur.a)(M);try{for(U.s();!(e=U.n()).done;){var H=e.value,q=H.userId,G=H.permission.name;K.hasOwnProperty(q)?K[q].push(G):K[q]=[G]}}catch(te){U.e(te)}finally{U.f()}var W,Y=L.map((function(e){return e.id})),V=Object(Ur.a)(Y);try{for(V.s();!(W=V.n()).done;){var J=W.value;K.hasOwnProperty(J)||(K[J]=[])}}catch(te){V.e(te)}finally{V.f()}Object(r.useEffect)((function(){E(wa()),E(fa()),E(Pa()),E(Da())}),[]),Object(r.useEffect)((function(){if(null!==b){var e=L.find((function(e){return e.id===b}));e.role&&(g(e.role.id),P(e.role.name))}}),[b]),Object(r.useEffect)((function(){null!==x&&E(Aa(x)),C(null)}),[x]);var Z=M.map((function(e){return{id:e.id,rolename:e.role.name,permissionname:e.permission.name,username:e.user.email,isactive:e.isActive?"active":"inactive",created_at:Dc(e.created_at)}})),Q=(Object.keys(K).length>0&&L.map((function(e){return{id:e.id,email:e.email,isactive:"active",role:e.role.name,permissions:K[e.id].join(" / "),created_at:Dc(e.created_at)}})),Object.keys(K).length>0?L.map((function(e){return{id:e.id,roleId:e.roleId,email:e.email,isactive:"active",role:e.role.name,permissions:K[e.id].join(" / "),created_at:Dc(e.created_at)}})):[]);L.map((function(e){console.log(K[e.id])}));var X=B.map((function(e){return{id:e.id,name:e.name,permissions:e.defaultPermissions.map((function(e){return e.name})).join(" / "),created_at:Dc(e.created_at)}})),$=R.map((function(e){return{id:e.id,name:e.name,isactive:"active",created_at:Dc(e.created_at)}})),ee=function(){n&&(s(!1),p(null),g(null),C(null)),l&&d(!1)};return"loading"!==T&&L&&0!==L.length?Object(de.jsx)(de.Fragment,{children:Object(de.jsx)($r.a,{padding:"md",children:Object(de.jsx)("div",{style:{display:"flex"},children:Object(de.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(de.jsxs)("div",{style:{padding:"10px"},children:[Object(de.jsx)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"-65px"},children:Object(de.jsx)("span",{children:Object(de.jsx)(fe.a,{children:Object(de.jsx)(oe.a,{children:Object(de.jsx)(se.a,{mt:5,children:"/acl/permissionrolemappings"===I.pathname&&Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(ge.a,{className:"mt-4",onClick:function(){s(!0)},compact:!0,children:"Assign permissions"}),Object(de.jsx)(lc,{isModalOpen:n,handleModalClose:ee,selectedUserRoleName:D,selectedUser:b,setSelectedUser:p,permissions:R,selectedPermission:k,setSelectedPermission:C,rolesPermissions:M,handleAssignPermission:function(){E(Fa({roleId:x,permissionId:k,userId:b})),E(wa()),ee()},users:L,selectedRole:x})]})})})})})}),Object(de.jsx)("div",{children:Object(de.jsx)(v.d,{children:Object(de.jsxs)(v.b,{children:[Object(de.jsx)(v.b,{index:!0,element:Object(de.jsx)(de.Fragment,{children:"Default page"})}),Object(de.jsx)(v.b,{path:"/permissionrolemappings",element:Object(de.jsx)(dc,{title:"acl/permissions vs users",useStyles:t,initialData:Z})}),Object(de.jsx)(v.b,{path:"/rolesvspermissions",element:Object(de.jsx)(pc,{title:"acl/roles vs permissions",useStyles:t,initialData:X})}),Object(de.jsx)(v.b,{path:"/permissions",element:Object(de.jsx)(fc,{title:"acl/all permissions",useStyles:t,initialData:$})}),Object(de.jsx)(v.b,{path:"/userpermissions",element:Object(de.jsx)(Fc,{initialData:Q})})]})})})]})})})})}):Object(de.jsx)(ke.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}})},Ac=function(){return Object(Zr.b)({type:"warning",title:"Permission Denied!!",message:"You do not have access to this page. Please contact the admin"}),Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fz:"xl",fw:700,children:"Permission Denied :("})})})},Nc=a(978),Ic=a(979),Ec=function(e){var t=e.row,a=e.rowId,r=e.handleDropdownChange,n=e.dropdownData,s=e.selectedCombinations,o=e.deleteRow,i=t.figures,l=t.first?Object.keys(n[t.first]):[],d=t.second?n[t.first][t.second].filter((function(e){var r=t.first,c=t.second,n="Interests"===t.first?e.value:e,o=s.some((function(e){return e.first===r&&e.second===c&&("Interests"===t.first?e.third.value:e.third)===n})),i=s.some((function(e){return e.rowId===a&&e.first===r&&e.second===c&&("Interests"===t.first?e.third.value:e.third)===n}));return!o||i})):[],u=Object(m.b)(),j=Object(m.c)((function(e){return e.campaignManagement.loadingStates[a]})),b=(Object(m.c)((function(e){return e.campaignManagement.errors[a]})),function(){u(Ba(a))});return Object(de.jsxs)(c.a.Fragment,{children:[Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(de.jsx)(vc,{data:Object.keys(n).map((function(e){return{value:e,label:"string"===typeof e?e:null}})),searchable:!0,value:t.first,placeholder:"Select Information Type",onChange:function(e){return r(a,"first",e)}})})}),Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(de.jsx)(vc,{data:l.map((function(e){return{value:e,label:"string"===typeof e?e:null}})),searchable:!0,value:t.second,placeholder:"Select Category",onChange:function(e){return r(a,"second",e)}})})}),Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(de.jsx)(vc,{data:d.map((function(e){return"string"===typeof e?{value:e,label:e}:e})),searchable:!0,value:t.third,placeholder:"Select Sub-category",onChange:function(e){r(a,"third",e),u(Ba(a,e))}})})}),Object(de.jsx)("div",{className:"col-12 col-lg-1",children:Object(de.jsx)(ie.a,{onClick:function(){return o(a)},color:"red",variant:"subtle",size:"sm",children:Object(de.jsx)(Pt.a,{})})}),Object(de.jsxs)("div",{className:"col-12 col-lg-2",children:["loading"===j&&Object(de.jsx)(te.a,{type:"dots",color:"#0d5ff9"}),"error"===j&&Object(de.jsxs)(se.a,{children:[Object(de.jsx)(ie.a,{c:"red",children:Object(de.jsx)(Nc.a,{})}),Object(de.jsx)(ie.a,{c:"#0d5ff9",onClick:b,children:Object(de.jsx)(Ic.a,{})})]}),"loading"!==j&&"error"!==j&&Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(se.a,{children:[Object(de.jsx)(ie.a,{children:null!==i?i:"-"}),Object(de.jsx)(ie.a,{c:"#0d5ff9",onClick:b,children:Object(de.jsx)(Ic.a,{})})]})})]})]})},zc=(a(594),a(595),a(596),a(597),a(598),a(599),a(1047)),Tc=a(980),Mc=a(981),Rc=a(176),Bc=a(516),_c=function(){var e=Object(m.c)($a).map((function(e){return Object(k.a)(Object(k.a)({},e),{},{subject:"".concat(e.subject," \n ").concat(e.count)})})),t=function(e){var t=e.x,a=e.y,r=e.payload.value.split("\n");return Object(de.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:r.filter((function(e,t){return 0===t})).map((function(e,t){return Object(de.jsx)("text",{x:0,y:5*t,dy:0===t?-5:5,textAnchor:"middle",fill:"#666",children:e},t)}))})};return Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsxs)(Tc.a,{cx:"50%",cy:"50%",outerRadius:"80%",data:e,children:[Object(de.jsx)(Mc.a,{}),Object(de.jsx)(Rc.a,{dataKey:"subject",tick:Object(de.jsx)(t,{})}),Object(de.jsx)(Bc.a,{name:"Customer Campaign",dataKey:"count",stroke:"#0d5ff9",fill:"#0d5ff9",fillOpacity:.6})]})})},Lc=a(983),Kc=(a(840),function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.campaignManagement.eventName})),a=Object(m.c)((function(e){return e.campaignManagement.eventDate}));return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("div",{className:"",style:{minHeight:"100px"},children:Object(de.jsxs)(se.a,{justify:"space-around",children:[Object(de.jsx)(Ge.a,{children:Object(de.jsx)(Er,{label:"Event Name",id:"eventName",w:400,name:"eventName",placeholder:"Event Name",type:"text",value:t,onChange:function(t){return e(Ya(t.currentTarget.value))}})}),Object(de.jsx)(Ge.a,{children:Object(de.jsx)(xc,{label:"Event Date",value:a,onChange:function(t){console.log("Selected Date:",t),e(Va(t))},minDate:new Date,w:200})})]})})})});var Uc=function(e){var t=e.setSelectedDate;return Object(de.jsx)(xc,{label:"Date",placeholder:"Select Date",onChange:function(e){return t(e)},mx:"auto",maw:400})},Hc=a(1048),qc=a(982),Gc=function(e){var t=Object(g.e)(),a={rightSection:{pointerEvents:"none",color:"#0d5ff9"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},calendarHeader:{backgroundColor:"#F3F6FF"},day:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},monthList:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},weekday:{color:"dark"===t.colorScheme?t.white:"#0d5ff9"},calendarHeaderLevel:{backgroundColor:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},calendarHeaderControlIcon:{color:"#0d5ff9"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(de.jsx)(Hc.a,Object(k.a)(Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e),{},{valueFormat:"HH:MM",onClick:function(e){return e.target.showPicker()},popoverProps:{withinPortal:!0},rightSection:Object(de.jsx)(ie.a,{c:"#0d5ff9",children:Object(de.jsx)(qc.a,{})})}))};var Wc=function(e){var t=e.setSelectedTime,a=e.timeSelected;return Object(de.jsx)(Gc,{value:a||"",label:"Time",onChange:function(e){return t(e.target.value)}})},Yc=a(327),Vc=a.n(Yc);function Jc(e,t){var a="".concat(Vc()(e).format("YYYY-MM-DD")," ").concat(t);return Vc()(a).format("DD-MMM-YYYY | hh:mm A")}var Zc=function(e){var t=Object(g.e)(),a={root:{cursor:"pointer",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundImage:"dark"===t.colorScheme?t.colors.teal[9]:"radial-gradient(#FFFFFF 1% ,#F3F6FF)",color:"dark"===t.colorScheme?t.white:"#0d5ff9",border:"1px solid #0d5ff9"}}};return Object(de.jsx)(Fe.a,Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e))},Qc=function(e){var t=Object(g.e)(),a={input:{cursor:"pointer",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{border:"2px solid #0d5ff9",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}}};return Object(de.jsx)(xe.a,Object(k.a)(Object(k.a)({styles:Object(k.a)(Object(k.a)({},a),e.styles)},e),{},{size:25,radius:"xl",color:"grape"}))},Xc=function(e){var t=e.initialState,a=e.onUpdate,c=e.onApplyForAll,n=Object(m.b)(),s=Object(m.c)((function(e){return e.campaignManagement.eventDate})),o=new Date,i={startDate:o,endDate:null,recurrence:{type:"",recurrenceTime:"",dailyFrequency:1,weeklyDays:[],monthlyDay:"",monthlyFrequency:"",monthlyWeekday:"",customDateTimes:[]}},l=Object(r.useState)(t.startDate||o),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(t.recurrence?t:i),p=Object(O.a)(b,2),f=p[0],h=p[1];console.log("results",f);var x=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],g=Object(r.useState)(!1),v=Object(O.a)(g,2),y=v[0],C=v[1],S=Object(r.useState)(f.recurrence.customDateTimes||[]),F=Object(O.a)(S,2),D=F[0],P=F[1],A=Object(r.useState)(null),N=Object(O.a)(A,2),I=N[0],E=N[1],z=Object(r.useState)(null),T=Object(O.a)(z,2),M=T[0],R=T[1],B=Object(r.useState)(f.recurrence.recurrenceTime||""),_=Object(O.a)(B,2),L=_[0],K=_[1];Object(r.useEffect)((function(){L&&h((function(e){return Object(k.a)(Object(k.a)({},e),{},{recurrence:Object(k.a)(Object(k.a)({},e.recurrence),{},{recurrenceTime:L})})}))}),[L]),Object(r.useEffect)((function(){I&&M&&function(){if(I&&M){var e={date:I,time:M};P([].concat(Object(we.a)(D),[e])),h((function(t){return Object(k.a)(Object(k.a)({},t),{},{recurrence:Object(k.a)(Object(k.a)({},t.recurrence),{},{customDateTimes:[].concat(Object(we.a)(t.recurrence.customDateTimes),[e])})})})),E(null),R(null),C(!1)}}()}),[I,M]),Object(r.useEffect)((function(){a(f)}),[f]),Object(r.useEffect)((function(){!s||f.endDate&&f.endDate===s||(h((function(e){return Object(k.a)(Object(k.a)({},e),{},{endDate:s})})),n(Va(s)))}),[s,n,f.endDate]);var U=function(e,t){h((function(a){return Object(k.a)(Object(k.a)({},a),{},Object(w.a)({},e,t))})),"startDate"===e?j(t):"endDate"===e&&n(Va(t))},H=function(e,t){K(""),h((function(a){return Object(k.a)(Object(k.a)({},a),{},{recurrence:Object(k.a)(Object(k.a)({},a.recurrence),{},Object(w.a)({},e,t))})}))},q=function(e,t){H(e,parseInt(t,10))};return Object(de.jsxs)("div",{children:[Object(de.jsx)(Lr.a,{c:"#0d5ff9",mb:10}),Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(ee.a,{size:"lg",fw:"normal",c:"#0d5ff9",children:"Timeline"}),Object(de.jsx)(Zc,{onClick:function(){return c(f)},children:"Apply For All"})]}),Object(de.jsxs)(le.a,{grow:!0,children:[Object(de.jsx)("div",{className:"col-6 col-lg-6",children:Object(de.jsx)("div",{className:"mb-40",children:Object(de.jsx)(xc,{label:"Start Date",value:u,onChange:function(e){return U("startDate",e)},minDate:new Date})})}),Object(de.jsx)("div",{className:"col-6 col-lg-6",children:Object(de.jsx)("div",{className:"mb-40",children:Object(de.jsx)(xc,{label:"End Date",value:s,onChange:function(e){return U("endDate",e)},minDate:new Date})})})]})]}),Object(de.jsxs)(ee.a,{size:"lg",fw:"normal",c:"#0d5ff9",children:[" ","Recurrence"," "]}),Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(Qc,{label:"Daily",checked:"Daily"===f.recurrence.type,value:"Daily",onChange:function(e){return H("type",e.target.value)}}),Object(de.jsx)(Qc,{label:"Weekly",value:"Weekly",checked:"Weekly"===f.recurrence.type,onChange:function(e){return H("type",e.target.value)}}),Object(de.jsx)(Qc,{label:"Monthly",value:"Monthly",checked:"Monthly"===f.recurrence.type,onChange:function(e){return H("type",e.target.value)}}),Object(de.jsx)(Qc,{label:"Custom",value:"Custom",checked:"Custom"===f.recurrence.type,onChange:function(e){return H("type",e.target.value)}})]})}),Object(de.jsxs)(Ce.a.Col,{span:9,children:["Daily"===f.recurrence.type&&Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(le.a,{children:[Object(de.jsx)(Qc,{value:"EveryNDays",checked:"EveryNDays"===f.recurrence.dailyFrequency,onChange:function(){return H("dailyFrequency","EveryNDays")}}),"Every"," ",Object(de.jsx)(Er,{w:50,type:"number",min:"1",value:f.recurrence.dailyFrequency,onChange:function(e){return function(e){var t="Everyday"!==e?parseInt(e,10):"Everyday";H("dailyFrequency",t)}(e.target.value)}}),"day(s)"]}),Object(de.jsx)(Qc,{label:"Everyday",value:"Everyday",checked:"Everyday"===f.recurrence.dailyFrequency,onChange:function(){return H("dailyFrequency","Everyday")}})]}),Object(de.jsx)(Ce.a,{grow:!0,children:"Weekly"===f.recurrence.type&&x.map((function(e){return Object(de.jsx)(Ce.a.Col,{span:4,children:Object(de.jsx)(Qc,{label:e,value:e,checked:f.recurrence.weeklyDays.includes(e),onChange:function(){return function(e){var t=f.recurrence.weeklyDays.includes(e)?f.recurrence.weeklyDays.filter((function(t){return t!==e})):[].concat(Object(we.a)(f.recurrence.weeklyDays),[e]);H("weeklyDays",t)}(e)}})})}))}),"Monthly"===f.recurrence.type&&Object(de.jsxs)(X.a,{children:[Object(de.jsxs)(le.a,{grow:!0,children:[Object(de.jsx)(Qc,{}),"Day"," ",Object(de.jsx)(Er,{w:50,type:"number",min:"1",onChange:function(e){return q("monthlyDay",e.target.value)}}),"of every"," ",Object(de.jsx)(Er,{w:50,type:"number",min:"1",onChange:function(e){return q("monthlyFrequency",e.target.value)}})," ","month(s)"]}),Object(de.jsxs)(le.a,{spacing:1,grow:!0,children:[Object(de.jsx)(Qc,{}),"Day",Object(de.jsx)(Er,{type:"number"}),"of every",Object(de.jsx)(vc,{miw:"23%",onChange:function(e){return H("monthlyFrequency",e)},data:["first","second","third","fourth"]}),Object(de.jsx)(vc,{miw:"31%",onChange:function(e){return H("monthlyWeekday",e)},data:x})," ","of every month(s)"]})]}),"Custom"!==f.recurrence.type&&("Daily"===f.recurrence.type||"Weekly"===f.recurrence.type||"Monthly"===f.recurrence.type)&&Object(de.jsx)(oe.a,{children:Object(de.jsx)(X.a,{w:100,children:Object(de.jsx)(Wc,{setSelectedTime:K,timeSelected:L})})}),"Custom"===f.recurrence.type&&Object(de.jsx)("div",{children:Object(de.jsxs)(se.a,{wrap:"wrap",children:[Object(de.jsx)(se.a,{mr:5,wrap:"wrap",children:D.map((function(e,t){return Object(de.jsx)(Zc,{rightSection:Object(de.jsx)(ie.a,{size:"xs",c:"#0d5ff9",radius:"xl",variant:"transparent",onClick:function(){return function(e){var t=D.filter((function(t,a){return a!==e}));P(t),h((function(e){return Object(k.a)(Object(k.a)({},e),{},{recurrence:Object(k.a)(Object(k.a)({},e.recurrence),{},{customDateTimes:t})})}))}(t)},children:Object(de.jsx)(Ft.a,{size:Object(Ze.b)(10)})}),size:"lg",mr:5,mb:5,children:Jc(e.date,e.time)},t)}))}),Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(Fe.a,{bg:"white",c:"gray",styles:{root:{borderWidth:"1px",borderColor:"gray"}},leftSection:Object(de.jsx)(ie.a,{size:Object(Ze.b)(20),children:Object(de.jsx)(At.a,{})}),rightSection:Object(de.jsx)(ie.a,{children:Object(de.jsx)(gc.a,{})}),onClick:function(){return C(!y)},children:"Add More"}),y&&Object(de.jsx)(X.a,{children:Object(de.jsxs)(X.a,{shadow:"lg",w:200,children:[Object(de.jsx)(Uc,{setSelectedDate:E}),Object(de.jsx)(Wc,{setSelectedTime:R,timeSelected:M})]})})]})]})})]})]})]})]})},$c=function(){var e,t=Object(m.b)(),a=Object(m.c)((function(e){return e.campaignManagement.activeTab})),r=Object(m.c)((function(e){return e.campaignManagement.tabData})),c=function(){var e=Object(F.a)(S.a.mark((function e(c){var n,s,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=c.target.files[0])||"text/plain"!==n.type){e.next=9;break}return e.next=4,n.text();case 4:s=e.sent,o=Object(k.a)(Object(k.a)({},r),{},Object(w.a)({},a,Object(k.a)(Object(k.a)({},r[a]),{},{content:s,file:n,fileName:n.name}))),t(Qa(o)),e.next=10;break;case 9:alert("Please select a valid .txt file");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"mb-15",children:[(null===(e=r[a])||void 0===e?void 0:e.fileName)&&Object(de.jsx)(ee.a,{variant:"text",fw:"bold",fz:"xs",children:r[a].fileName}),Object(de.jsx)("input",{type:"file",accept:".txt",onChange:c})]})},en=a(1030),tn=a(1004),an=a(262),rn=a(520),cn=a(529),nn=a(521),sn=a(522),on=a(523),ln=a(524),dn=a(256),un=a.n(dn),jn=function(e){var t=e.initialContent,a=e.onChange,c=e.readOnly,n=e.activeTab,s=Object(an.b)({extensions:[cn.a,nn.a,en.a,on.a,ln.a,rn.a,sn.a.configure({types:["heading","paragraph"]})],content:t.content,onUpdate:function(e){var t=e.editor;a(t.getHTML())}});return Object(r.useEffect)((function(){console.log(n)}),[n]),Object(r.useEffect)((function(){var e=un.a.sanitize(t.content);null===s||void 0===s||s.commands.insertContent(e),console.log("Effect")}),[t.file]),Object(de.jsxs)(tn.a,{editor:s,readOnly:c,styles:{root:{border:"none",position:"relative"},control:{backgroundColor:"transparent",border:"none"},controlsGroup:{position:"relative",height:10},content:{backgroundColor:"transparent",overflow:"auto",maxHeight:"210px"},toolbar:{backgroundColor:"transparent"}},children:[Object(de.jsxs)(tn.a.Toolbar,{sticky:!0,stickyOffset:60,children:[Object(de.jsxs)(tn.a.ControlsGroup,{children:[Object(de.jsx)(tn.a.Bold,{}),Object(de.jsx)(tn.a.Italic,{}),Object(de.jsx)(tn.a.Underline,{}),Object(de.jsx)(tn.a.Strikethrough,{}),Object(de.jsx)(tn.a.ClearFormatting,{}),Object(de.jsx)(tn.a.Highlight,{}),Object(de.jsx)(tn.a.Code,{})]}),Object(de.jsxs)(tn.a.ControlsGroup,{children:[Object(de.jsx)(tn.a.H1,{}),Object(de.jsx)(tn.a.H2,{}),Object(de.jsx)(tn.a.H3,{}),Object(de.jsx)(tn.a.H4,{})]}),Object(de.jsxs)(tn.a.ControlsGroup,{children:[Object(de.jsx)(tn.a.Blockquote,{}),Object(de.jsx)(tn.a.Hr,{}),Object(de.jsx)(tn.a.BulletList,{}),Object(de.jsx)(tn.a.OrderedList,{}),Object(de.jsx)(tn.a.Subscript,{}),Object(de.jsx)(tn.a.Superscript,{})]}),Object(de.jsxs)(tn.a.ControlsGroup,{children:[Object(de.jsx)(tn.a.Link,{}),Object(de.jsx)(tn.a.Unlink,{})]}),Object(de.jsxs)(tn.a.ControlsGroup,{children:[Object(de.jsx)(tn.a.AlignLeft,{}),Object(de.jsx)(tn.a.AlignCenter,{}),Object(de.jsx)(tn.a.AlignJustify,{}),Object(de.jsx)(tn.a.AlignRight,{})]}),"Email"===n?Object(de.jsx)(X.a,{children:Object(de.jsx)(Er,{w:500,placeholder:"Subject"})}):null]}),Object(de.jsx)(tn.a.Content,{})]})},bn=(a(461),a(841),a(984)),pn=a(985),fn=function(e){e.previewStyles;var t=e.sanitizedContent;return Object(de.jsxs)("div",{className:"europ-assistance",children:[Object(de.jsxs)("div",{className:"frame",children:[Object(de.jsx)("div",{className:"be-a-part-of-IPL-wrapper",children:Object(de.jsx)("p",{className:"be-a-part-of-IPL",dangerouslySetInnerHTML:{__html:t}})}),Object(de.jsx)("div",{className:"group",children:Object(de.jsx)("div",{className:"overlap-group",children:Object(de.jsx)("div",{className:"div",children:"Book now"})})})]}),Object(de.jsxs)("div",{className:"overlap",children:[Object(de.jsx)("div",{className:"text-wrapper-2",children:"Europ Assistance India"}),Object(de.jsx)(ie.a,{size:Object(Ze.b)(13),mt:17,c:"white",children:Object(de.jsx)(Lc.a,{})}),Object(de.jsx)("div",{className:"img-wrapper",children:Object(de.jsx)("img",{className:"img",alt:"Img",src:Pr})}),Object(de.jsx)("div",{className:"div-wrapper",children:Object(de.jsx)("div",{className:"text-wrapper-3",children:"7:01 PM"})}),Object(de.jsxs)("div",{className:"group-2",children:[Object(de.jsxs)(se.a,{ml:10,mt:-1,children:[Object(de.jsx)(ie.a,{size:Object(Ze.b)(13),c:"white",children:Object(de.jsx)(bn.a,{})}),Object(de.jsx)(ie.a,{size:Object(Ze.b)(13),c:"white",children:Object(de.jsx)(pn.a,{})})]}),Object(de.jsxs)("div",{className:"three-dots",children:[Object(de.jsx)("div",{className:"ellipse"}),Object(de.jsx)("div",{className:"ellipse-2"}),Object(de.jsx)("div",{className:"ellipse-3"})]})]})]}),Object(de.jsxs)("div",{className:"group-3",children:[Object(de.jsx)("div",{className:"overlap-2",children:Object(de.jsx)("div",{className:"text-wrapper-4",children:"Type a message"})}),Object(de.jsx)("div",{className:"imagevector-wrapper"})]})]})},hn=function(e){var t=e.content,a=e.tab,r=un.a.sanitize(t),c={overflow:"auto",maxHeight:"100%"};switch(a){case"Email":case"SMS":case"Notification":return Object(de.jsx)("div",{style:c,dangerouslySetInnerHTML:{__html:r}});case"Whatsapp":return Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(X.a,{style:c,children:Object(de.jsx)(oe.a,{children:Object(de.jsx)("div",{style:{zoom:"200%"},children:Object(de.jsx)(fn,{previewStyles:c,sanitizedContent:r})})})})});default:return null}},On=function(){var e,t=Object(m.b)(),a=Object(m.c)((function(e){return e.campaignManagement.activeTab})),c=Object(m.c)((function(e){return e.campaignManagement.tabData})),n=Object(r.useState)(!1),s=Object(O.a)(n,2),o=s[0],i=s[1],l=function(){i(!0)},d=function(){i(!1)},u=function(e){var r=Object(k.a)(Object(k.a)({},c),{},Object(w.a)({},a,Object(k.a)(Object(k.a)({},c[a]),{},{content:e,characterCount:e.length})));t(Qa(r))};return Object(de.jsxs)(de.Fragment,{children:[o&&Object(de.jsx)("div",{className:"overlay"}),Object(de.jsx)("div",{className:"modal-body modal-pad",children:Object(de.jsxs)("div",{children:[Object(de.jsxs)("div",{className:"row",children:[Object(de.jsx)("div",{className:"col-md-2",children:Object(de.jsx)("div",{className:"dis-block nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:["Email","SMS","Notification","Whatsapp"].map((function(e){return o?Object(de.jsx)(X.a,{ml:-15,children:Object(de.jsx)(ge.a,{className:"preview-container",onClick:function(){return t(Za(e))},c:a===e?"#0d5ff9":"white",bg:a===e?"white":"#0d5ff9",sx:{"&:hover":{backgroundColor:"white",color:"#524EE1"}},size:"lg",fullWidth:!0,style:{marginBottom:"10px"},children:Object(de.jsx)(ee.a,{size:"xs",children:e})},e)}):Object(de.jsx)(ge.a,{className:"preview-container",onClick:function(){return t(Za(e))},c:a===e?"#white":"#0d5ff9",bg:a===e?"#0d5ff9":"white",sx:{"&:hover":{backgroundColor:"#F3F6FF",color:"#0d5ff9"}},mr:-5,size:"lg",fullWidth:!0,style:{marginBottom:"10px"},children:Object(de.jsx)(ee.a,{size:"xs",children:e})},e)}))})}),Object(de.jsx)("div",{className:"col-md-10",children:Object(de.jsx)("div",{className:"preview-container tab-content tab-content-bg",children:["Email","SMS","Notification","Whatsapp"].map((function(e){var t;return Object(de.jsxs)("div",{className:" tab-pane fade ".concat(a===e?"show active":""),id:"v-pills-".concat(e),role:"tabpanel",children:[Object(de.jsx)(X.a,{children:o?Object(de.jsx)(X.a,{h:250,children:Object(de.jsx)(hn,{content:null===(t=c[e])||void 0===t?void 0:t.content,tab:e})}):Object(de.jsx)(X.a,{h:290,mt:-40,children:Object(de.jsx)(jn,{activeTab:a,initialContent:c[e],onChange:u},a)})}),Object(de.jsxs)(se.a,{direction:"row-reverse",mt:20,children:[Object(de.jsxs)("div",{className:"character-count",children:[c[a].characterCount,"/",c[a].charLimit]}),!o&&Object(de.jsx)(X.a,{ml:5,children:c[a].characterCount>c[a].charLimit&&Object(de.jsx)("div",{className:"character-limit-error",children:"Character limit exceeded!"})})]}),Object(de.jsx)(X.a,{mt:"-4%",children:o?Object(de.jsx)(zr,{w:120,onClick:d,children:"OK"}):Object(de.jsx)(zr,{w:120,onClick:l,children:"Preview"})})]},e)}))})})]}),Object(de.jsx)(X.a,{className:"".concat(o?"":"tab-preview-container"),children:!o&&Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(se.a,{direction:"row-reverse",mr:-100,mt:-20,children:Object(de.jsx)($c,{},a)}),Object(de.jsx)(Xc,{onUpdate:function(e){var r=Object(k.a)(Object(k.a)({},c),{},Object(w.a)({},a,Object(k.a)(Object(k.a)({},c[a]),{},{timelineState:e})));console.log("updatedTabData",Qa),t(Qa(r))},onApplyForAll:function(e){var a=Object(k.a)({},c);["Email","SMS","Notification","Whatsapp"].forEach((function(t){a[t]=Object(k.a)(Object(k.a)({},c[t]),{},{timelineState:e})})),t(Qa(a)),Object(Zr.b)({type:"default",title:"Timelines applied",message:"Timelines have been added for all modes"})},initialState:(null===(e=c[a])||void 0===e?void 0:e.timelineState)||{}},a)]})})]})})]})},mn=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.campaignManagement})),a=t.isModalOpen,c=t.eventName,n=t.step,s=Object(m.c)((function(e){return e.campaignManagement})),o=Object(r.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(!1),j=Object(O.a)(u,2),b=j[0],p=j[1];return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)(jt.a,{opened:a,withCloseButton:!1,closeOnClickOutside:!1,size:"xl",styles:{content:{overflow:"visible"}},children:[Object(de.jsxs)("div",{className:"modal-header modal-header-wrap",children:[Object(de.jsxs)("div",{className:"modeltitle",children:[Object(de.jsx)("h1",{children:1===n?"Create a new Campaign":"Preview Campaign"}),Object(de.jsxs)("h2",{children:["Step: ",n,"/2"]}),2===n&&Object(de.jsx)(Lc.a,{cursor:"pointer",onClick:function(){return e(Ja(1))}})]}),Object(de.jsx)("button",{type:"button",className:"btn-close",onClick:function(){Object(Zr.b)({type:"default",title:"Campaign ".concat(s.eventName," has been Cancelled"),message:"Click Run campaign to run the campaign again"}),e(Ha(!1))},"aria-label":"Close"})]}),Object(de.jsx)("div",{children:1===n?Object(de.jsx)(Kc,{eventName:c,setEventName:function(t){return e(Ya(t))}}):Object(de.jsx)("div",{children:Object(de.jsx)(On,{})})}),Object(de.jsx)("div",{children:1===n?Object(de.jsx)(oe.a,{children:Object(de.jsx)(zr,{w:"30%",onClick:function(){c.trim()?e(Ja(2)):Object(Zr.b)({type:"warning",title:"Please provide an event name",message:"Event name is required to proceed."})},children:"Next"})}):Object(de.jsx)(oe.a,{children:Object(de.jsx)(zr,{w:"30%",onClick:function(){d(!0)},children:"Publish"})})})]}),Object(de.jsxs)(jt.a,{opened:l,withCloseButton:!0,onClose:function(){return d(!1)},title:"Confirm Campaign Publish",size:"md",children:[Object(de.jsx)("p",{children:"Are you sure you want to publish this campaign?"}),Object(de.jsxs)(oe.a,{children:[Object(de.jsx)(zr,{onClick:function(){p(!0),e(_a()).then((function(t){_a.fulfilled.match(t)?(Object(Zr.b)({type:"default",title:"Campaign Published",message:"The campaign has been published successfully",color:"green"}),e(Ha(!1))):(Object(Zr.b)({type:"error",title:"Campaign Failed",message:t.error.message,color:"red"}),p(!1))}))},disabled:b,children:b?"Publishing...":"Yes, Publish"}),Object(de.jsx)(zr,{variant:"outline",onClick:function(){return d(!1)},children:"No, Go back"})]})]})]})},xn=function(){var e=Object(m.b)(),t=(Object(m.c)((function(e){return e.campaignManagement.downloadDataStatus})),Object(m.c)((function(e){return e.campaignManagement.isModalOpen}))),a=Object(m.c)((function(e){return e.campaignManagement.allCustomerIDs}));return Object(de.jsxs)("div",{children:[Object(de.jsx)("button",{type:"button",className:"btn runcamp",onClick:function(){0!==a.length?(e(Ha(!0)),e(Xa()),Object(Zr.b)({title:"Success!",message:"Campaign initiated against customers in pool.",color:"green"})):Object(Zr.b)({title:"Error!",message:"No customers have been selected. Please ensure atleast one customer",color:"red"})},children:"Run Campaign"}),t&&Object(de.jsx)(mn,{isOpen:t,closeModal:function(){return Ha(!1)}})]})},gn=function(){Object(m.b)();var e=Object(m.c)($a),t=Object(m.c)((function(e){return e.campaignManagement.allCustomerIDs}));e.reduce((function(e,t){return e+t.count}),0);return Object(de.jsx)("div",{className:"col-12 col-lg-4",children:Object(de.jsxs)(Se.a,{shadow:"lg",radius:"md",bg:"#F3F6FF",children:[Object(de.jsx)("div",{className:"dem-title mb-4",children:Object(de.jsx)("h1",{children:"Total Demographic"})}),Object(de.jsx)(X.a,{h:200,w:350,children:Object(de.jsx)(_c,{})}),Object(de.jsxs)("div",{className:"row mt-2",children:[Object(de.jsxs)("div",{className:"col-12 col-lg-12 text-center mb-2",children:[Object(de.jsx)("span",{className:"total-numb pe-2"}),Object(de.jsxs)("span",{className:"total-users",children:[t.length," Users matching your criteria"]})]}),Object(de.jsx)(xn,{})]})]})})},vn=a(986),yn=a(987),wn=a(988),kn=a(257),Cn=a(258),Sn=a(208),Fn=a(202),Dn=a(252),Pn=a(119),An=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.campaign.data})),a=Object(m.c)((function(e){return e.campaign.campaignNames})),c=Object(m.c)((function(e){return e.campaign.status})),n=Object(m.c)((function(e){return e.campaign.error})),s=Object(r.useState)([]),o=Object(O.a)(s,2),i=o[0],l=o[1];if(Object(r.useEffect)((function(){"idle"===c&&e(tr())}),[c,e]),"loading"===c)return Object(de.jsx)(te.a,{c:"5c00f2",style:{margin:"0 auto",display:"block"},size:50});if("failed"===c)return Object(de.jsxs)("div",{children:["Error: ",n]});var d=(i.length>0?t.filter((function(e){return i.includes(e.campaignName)})):t).map((function(e){return Object(k.a)(Object(k.a)({},e),{},{delivered:e.totalSent,converted:e.success,interested:e.success,failure:e.failed})}));return Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(X.a,{p:30,children:[Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(y.a,{c:"#0d5ff9",children:"Campaigns"}),Object(de.jsx)(ve.b,{to:"/campaign",children:Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(vn.a,{})})})]}),Object(de.jsx)(X.a,{children:Object(de.jsx)(se.a,{children:Object(de.jsx)(ut.a,{maw:320,mx:"auto",data:a,placeholder:"All",label:Object(de.jsx)(ee.a,{c:"dimmed",children:"Campaign(s)"}),searchable:!0,rightSection:Object(de.jsx)(ie.a,{children:Object(de.jsx)(gc.a,{})}),onChange:function(t){l(t),e(rr(t))},value:i})})}),Object(de.jsx)(X.a,{h:500,w:"100%",children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsxs)(yn.a,{data:d,margin:{top:20,right:30,left:20,bottom:5},maxBarSize:60,children:[Object(de.jsx)(wn.a,{strokeLinecap:"3",horizontalCoordinatesGenerator:function(e){return e.height>250?[75,150,225]:[100,200]},vertical:!1}),Object(de.jsx)(kn.a,{dataKey:"campaignName"}),Object(de.jsx)(Cn.a,{label:{value:"No. of Customers",angle:-90,position:"insideLeft",offset:-4}}),Object(de.jsx)(Sn.a,{}),Object(de.jsx)(Fn.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10}),Object(de.jsx)(Dn.a,{dataKey:"delivered",stackId:"a",fill:"#5C7DF2",stroke:"#5C7DF2",strokeWidth:2.36,fillOpacity:.7}),Object(de.jsx)(Dn.a,{stackId:"a",dataKey:"failure",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7}),Object(de.jsx)(Dn.a,{dataKey:"interested",stackId:"a",fill:"#F78C31",stroke:"#F78C31",strokeWidth:2.36,fillOpacity:.7}),Object(de.jsx)(Dn.a,{dataKey:"converted",stackId:"a",fill:"#4BCA74",stroke:"#4BCA74",strokeWidth:2.36,fillOpacity:.7,children:Object(de.jsx)(Pn.a,{position:"top"})})]})})})]})})},Nn=a(989),In=a(525),En=a(175),zn=[{name:"Group A",value:400},{name:"Group B",value:300},{name:"Group C",value:300},{name:"Group D",value:200}],Tn=["#DE8965","#D85972","#2745D9","#1D9825"],Mn=(Math.PI,function(){return Object(de.jsx)(X.a,{h:200,w:200,children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsx)(Nn.a,{width:300,height:300,children:Object(de.jsx)(In.a,{data:zn,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:zn.map((function(e,t){return Object(de.jsx)(En.a,{fill:Tn[t%Tn.length]},"cell-".concat(t))}))})})})})}),Rn=(a(89),function(){var e=Object(m.c)((function(e){return e.campaign.campaignNames}));return Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(X.a,{children:Object(de.jsx)(vc,{maw:320,label:"Campaign(s)",data:["All"].concat(Object(we.a)(e))})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(X.a,{h:400,w:820,p:20,children:Object(de.jsx)(zc.a,{height:"100%",width:"100%",children:Object(de.jsxs)(yn.a,{layout:"vertical",data:[{name:"SMS",Delivered:250,Interested:120,Converted:75,Failure:55},{name:"Email",Delivered:180,Interested:90,Converted:40,Failure:20},{name:"Notification",Delivered:230,Interested:110,Converted:50,Failure:30},{name:"Whatsapp",Delivered:275,Interested:135,Converted:85,Failure:60}],barSize:30,children:[Object(de.jsx)(kn.a,{label:{value:"Campaigns",offset:0},type:"number",height:55}),Object(de.jsx)(Cn.a,{label:{value:"Communications",angle:-90,position:"left",offset:"-15"},type:"category",dataKey:"name",width:150}),Object(de.jsx)(Sn.a,{}),Object(de.jsx)(Fn.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10}),Object(de.jsx)(Dn.a,{dataKey:"Delivered",fill:"#BB5DE4",stackId:"a"}),Object(de.jsx)(Dn.a,{dataKey:"Failure",fill:"#0D96F9",stackId:"a"}),Object(de.jsx)(Dn.a,{dataKey:"Interested",fill:"#1D9B25",stackId:"a"}),Object(de.jsx)(Dn.a,{dataKey:"Converted",fill:"#D85972",stackId:"a",children:Object(de.jsx)(Pn.a,{position:"right"})})]})})})})]})}),Bn=a(260),_n=a(990),Ln=a(991),Kn=a(992),Un=a(993),Hn=[{color:"green",text:"No. of Clicks",percentage:"85%",icon:_n.a,label:"Number of times that a customer has clicked any othe marketing campaign links"},{color:"orange",text:"No. of Bookings",percentage:"70%",icon:Oc.a,label:"Number of Bookings created"},{color:"purple",text:"No. of Payments",percentage:"85%",icon:Ln.a,label:"Number of Bookings that followed through with complete payments"},{color:"pink",text:"Conversion Rate",percentage:"91%",icon:Kn.a,label:"Percentage of payments to bookings"},{color:"teal",text:"Bounce Rate",percentage:"13%",icon:Un.a,label:"All the attempts through out all the campaigns that resulted in a failure"}],qn=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1];return Object(de.jsx)(de.Fragment,{children:Hn.map((function(e,t){return Object(de.jsx)(X.a,{onMouseEnter:function(){return c(t)},onMouseLeave:function(){return c(!1)},children:Object(de.jsx)(Se.a,{sx:{height:"100%",backgroundImage:"radial-gradient(#FFFFFF 50% ,#F3F6FF)",cursor:"pointer",transition:"transform 0.3s ease",":hover":{transform:"scale(1.05)"}},radius:"md",shadow:"md",children:Object(de.jsx)(oe.a,{children:Object(de.jsx)(se.a,{children:Object(de.jsxs)(le.a,{noWrap:!0,children:[Object(de.jsx)(Bn.a,{label:e.label,color:"EBDFFF",withArrow:!0,opened:a===t,children:Object(de.jsx)(ie.a,{size:Object(Ze.b)(70),c:e.color,children:Object(de.jsx)(e.icon,{size:Object(Ze.b)(70)})})},"Tooltip-".concat(t)),Object(de.jsxs)(Ge.a,{justify:"start",children:[Object(de.jsx)(ee.a,{children:e.text}),Object(de.jsx)(ee.a,{c:e.color,children:e.percentage})]})]})})})})},t)}))})},Gn=(a(994),a(527),function(){return Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(Se.a,{shadow:"lg",radius:"lg",children:[Object(de.jsx)(se.a,{c:"#0d5ff9",justify:"space-between",children:Object(de.jsx)(ee.a,{fw:"bold",children:"General"})}),Object(de.jsx)(hc.a,{cols:5,children:Object(de.jsx)(qn,{})})]}),Object(de.jsxs)(Ce.a,{children:[Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsxs)(Se.a,{shadow:"lg",radius:"lg",h:"100%",children:[Object(de.jsxs)(se.a,{c:"#0d5ff9",justify:"space-between",children:[Object(de.jsx)(ee.a,{fw:"bold",children:"Overview"}),Object(de.jsxs)(oe.a,{children:[Object(de.jsx)(ie.a,{c:"#0d5ff9",children:Object(de.jsx)(ne.a,{})}),Object(de.jsx)(ee.a,{fw:"bold",children:"Export"})]})]}),Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(le.a,{grow:!0,children:[Object(de.jsx)(Se.a,{sx:{border:"1px solid",borderColor:"#F3F6FF"},children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(le.a,{spacing:"xs",children:[Object(de.jsx)(y.a,{size:"md",children:"Total"}),Object(de.jsx)(y.a,{size:"md",c:"#0d5ff9",children:"16,954"})]}),Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(ee.a,{c:"#DE8965",fw:"bold",children:"\u2022 SMS"}),Object(de.jsx)(ee.a,{children:"1244"})]}),Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(ee.a,{c:"#D85972",fw:"bold",children:"\u2022 Email"}),Object(de.jsx)(ee.a,{children:"242"})]}),Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(ee.a,{c:"#2745D9",fw:"bold",children:"\u2022 Notification"}),Object(de.jsx)(ee.a,{children:"2345"})]}),Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(ee.a,{c:"#1D9825",fw:"bold",children:"\u2022 Whatsapp"}),Object(de.jsx)(ee.a,{children:"13123"})]})]})}),Object(de.jsx)(X.a,{children:Object(de.jsx)(Mn,{})})]}),Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(vc,{label:"Category",placeholder:"Demographic",data:["Demographic"]}),Object(de.jsx)(vc,{label:"Sub-Category(s)",placeholder:"Age",data:["Age"]}),Object(de.jsx)(vc,{label:"Status",placeholder:"All",data:["All"]})]})]})]})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(Se.a,{shadow:"lg",radius:"lg",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(se.a,{c:"#0d5ff9",justify:"space-between",children:[Object(de.jsx)(ee.a,{fw:"bold",children:"Communications"}),Object(de.jsxs)(oe.a,{children:[Object(de.jsx)(ie.a,{c:"#0d5ff9",children:Object(de.jsx)(ne.a,{})}),Object(de.jsx)(ee.a,{fw:"bold",children:"Export"})]})]}),Object(de.jsx)(X.a,{children:Object(de.jsx)(Rn,{})})]})})})]})]})})}),Wn=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.campaignListSlice}));Object(r.useEffect)((function(){e(gr())}),[e]);var a=Object(r.useMemo)((function(){return[{accessorKey:"name",header:"Campaign Name"},{accessorKey:"type",header:"Communication Type"},{accessorKey:"customers",header:"Total No. of Customers",accessorFn:function(e){return e.customers.length}},{accessorKey:"created_at",header:"Create Campaign Date",accessorFn:function(e){return new Date(e.created_at).toLocaleDateString()}},{accessorKey:"end",header:"Event Date",accessorFn:function(e){return new Date(e.end).toLocaleDateString()}},{accessorKey:"status",header:"Campaign Status"},{accessorKey:"actions",header:"Action",Cell:function(e){e.row;return Object(de.jsxs)(se.a,{children:[Object(de.jsx)(ie.a,{color:"lightblue",children:Object(de.jsx)(Dt.a,{})}),Object(de.jsx)(ie.a,{color:"red",children:Object(de.jsx)(Pt.a,{})})]})}}]}),[]);if("loading"===t.campaignStatus)return Object(de.jsx)("p",{children:"Loading..."});if("failed"===t.campaignStatus)return Object(de.jsxs)("p",{children:["Error loading campaigns. Details: ",t.error]});var c=Object(we.a)(t.campaigns).reverse();return Object(de.jsx)(je,{columns:a,data:c,onRowClick:function(){console.log("Row clicked")}})},Yn=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.campaignManagement})),a=(t.isModalOpen,t.dropdownData),c=t.rows,n=t.selectedCombinations;Object(r.useEffect)((function(){e(bt())}),[e]);var s=Object(m.c)((function(e){return e.keyword.keywords}));console.log("keywords fetched for analysis",s);var o=Object(m.c)((function(e){return e.keyword.keywordsStatus}));"loading"===o&&console.log("loading..."),"failed"===o&&console.log("Error getting keywords"),Object(r.useEffect)((function(){if("success"===o){var t=Object(k.a)({},a.Interests);s.forEach((function(e){var a=t[e.category]?[].concat(Object(we.a)(t[e.category]),[{label:e.value,value:e.id}]):[{label:e.value,value:e.id}];t=Object(k.a)(Object(k.a)({},t),{},Object(w.a)({},e.category,a))}));var r=Object(k.a)(Object(k.a)({},a),{},{Interests:t});e(qa(r))}}),[o,s]);var i=function(t,r,s){var o=Object(k.a)({},c);o[t]=Object(k.a)(Object(k.a)({},o[t]),{},Object(w.a)({},r,s));var i=Object(we.a)(n);if("first"===r)o[t].second="",o[t].third="";else if("second"===r)o[t].third="";else if("third"===r){var l;l="Interests"===o[t].first?a[o[t].first][o[t].second].find((function(e){return e.value===s})):s,(i=i.filter((function(e){return e.rowId!==t}))).push({rowId:t,first:o[t].first,second:o[t].second,third:l})}e(Ga(o)),e(Wa(i))},l=function(t){var a=Object(k.a)({},c);delete a[t];var r=n.filter((function(e){return e.rowId!==t}));e(Ga(a)),e(Wa(r))};return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Gn,{}),Object(de.jsx)(Se.a,{mt:20,shadow:"lg",radius:"md",children:Object(de.jsxs)("div",{className:"row",children:[Object(de.jsxs)("div",{className:"col-12 col-lg-8",children:[Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Data Analysis"}),Object(de.jsxs)("div",{className:"row",style:{maxHeight:"250px",overflowY:"scroll"},children:[Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"select-title mb-3",children:Object(de.jsx)("h1",{children:"Select Information Type"})})}),Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"select-title mb-3",children:Object(de.jsx)("h1",{children:"Select Category"})})}),Object(de.jsx)("div",{className:"col-12 col-lg-3",children:Object(de.jsx)("div",{className:"select-title mb-3",children:Object(de.jsx)("h1",{children:"Select Sub-category"})})}),Object(de.jsx)("div",{className:"col-12 col-lg-1",children:Object(de.jsx)("div",{className:"select-title mb-3",children:Object(de.jsx)("h1",{children:"Delete"})})}),Object(de.jsx)("div",{className:"col-12 col-lg-2",children:Object(de.jsx)("div",{className:"select-title mb-3",children:Object(de.jsx)("h1",{children:"Figures"})})}),Object.entries(c).map((function(e){var t=Object(O.a)(e,2),r=t[0],c=t[1];return Object(de.jsx)(Ec,{row:c,rowId:r,handleDropdownChange:i,dropdownData:a,selectedCombinations:n,deleteRow:l},r)})),Object(de.jsx)(se.a,{justify:"end",children:Object(de.jsx)("div",{className:"pl-90",children:Object(de.jsxs)(le.a,{onClick:function(){var t=Object(w.a)({},Date.now().toString(),{first:"",second:"",third:""});e(Ga(Object(k.a)(Object(k.a)({},c),t)))},style:{cursor:"pointer"},children:[Object(de.jsx)(ie.a,{color:"#0d5ff9",variant:"subtle",size:"sm",children:Object(de.jsx)(At.a,{color:"#0d5ff9"})}),Object(de.jsx)(ee.a,{ml:-18,color:"#0d5ff9",size:"sm",children:"Add More"})]})})})]})]}),Object(de.jsx)(gn,{})]})}),Object(de.jsx)(Wn,{})]})},Vn=a(1010),Jn=a(997),Zn=a(998),Qn=a(999),Xn=a.p+"static/media/eaLogoRotate.0d85ab0c.svg",$n=a(1008),es=a(995),ts=a(996),as=Object(Ue.a)((function(e){return{link:Object(k.a)(Object(k.a)({},e.fn.focusStyles()),{},{display:"flex",alignItems:"center",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:"#0d5ff9",borderRadius:e.radius.sm,fontWeight:500,"&":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#F3F6FF",color:"dark"===e.colorScheme?e.white:"#0d5ff9"},"&:hover":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF"}})}})),rs=function(e){var t,a=e.user,r=e.roleName,c=as(),n=c.classes,s=c.cx,o=Object(g.e)(),i=Object(m.b)();return Object(de.jsx)("div",{children:Object(de.jsxs)($n.a,{trigger:"hover",openDelay:100,closeDelay:400,styles:{dropdown:{border:"none",backgroundColor:"transparent"}},children:[Object(de.jsx)($n.a.Target,{children:Object(de.jsx)(bc.a,{sx:{width:"100%",padding:o.spacing.xs,borderRadius:o.radius.sm,color:"dark"===o.colorScheme?o.colors.dark[0]:"#0d5ff9","&:hover":{backgroundColor:"dark"===o.colorScheme?o.colors.dark[6]:"transparent",border:"none"}},children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(Qe.a,{src:(null===a||void 0===a?void 0:a.avatarUrl)||"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=255&q=80",radius:"xl"}),Object(de.jsxs)(le.a,{children:[Object(de.jsxs)(Ge.a,{spacing:0,children:[Object(de.jsx)(ee.a,{size:"sm",weight:500,children:null===a||void 0===a||null===(t=a.email)||void 0===t?void 0:t.split("@")[0]}),Object(de.jsx)(ee.a,{color:"#0d5ff9",size:"xs",children:r})]}),Object(de.jsx)(gc.a,{size:Object(Ze.b)(18)})]})]})})}),Object(de.jsx)($n.a.Dropdown,{children:Object(de.jsx)(X.a,{children:Object(de.jsxs)(Se.a,{bg:"#F3F6FF",shadow:"xl",radius:"md",sx:{border:"1px solid #0d5ff9"},children:[Object(de.jsx)(qe.a,{component:ve.b,to:"/myAccount",label:"My Account",icon:Object(de.jsx)(De.a,{size:14}),className:s(n.link,n.linkIcon)}),Object(de.jsx)(qe.a,{component:ve.b,to:"/securitySettings",label:"Change Password",icon:Object(de.jsx)(es.a,{size:14}),className:s(n.link,n.linkIcon)}),Object(de.jsx)(qe.a,{component:"div",label:"Logout",color:"red",icon:Object(de.jsx)(ts.a,{size:14}),className:s(n.link,n.linkIcon),onClick:function(){return i(va()),void i(Ta())}})]})})})]})})},cs=Object(Ue.a)((function(e){return{link:Object(k.a)(Object(k.a)({},e.fn.focusStyles()),{},{display:"flex",alignItems:"center",textDecoration:"none",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:e.colors.gray[7],borderRadius:e.radius.sm,fontWeight:500,"&":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#F3F6FF",color:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff9"},"&:focus":{outline:"none"},"&:hover":Object(w.a)({backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff990",color:"dark"===e.colorScheme?e.white:"#FFFFFF"},"& .".concat(Object(He.a)("icon")),{color:"dark"===e.colorScheme?e.white:e.black})}),linkIcon:{ref:Object(He.a)("icon"),color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6],marginRight:e.spacing.sm},linkActive:{"&, &:hover":Object(w.a)({backgroundColor:"dark"===e.colorScheme?"#252D3B":"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF"},"& .".concat(Object(He.a)("icon")),{color:e.fn.variant({variant:"light",color:e.primaryColor}).color})},stickyNavbar:{position:"sticky",height:"100%",top:0}}})),ns=function(e){var t=e.children,a=cs(),c=a.classes,n=a.cx,s=Object(m.b)(),o=Object(v.g)(),i=Object(r.useState)(""),l=Object(O.a)(i,2),d=l[0],u=l[1],j=Object(m.c)((function(e){return e.auth})),b=j.user,p=j.users,f=Object(g.e)(),h=Object(m.c)((function(e){return e.rolePermission})),x=h.userPermissions;h.getAllRolesPermissionsMappingsByUserStatus;function y(e,t){return e.some((function(e){return e.name===t}))}Object(r.useEffect)((function(){var e=o.pathname;u(e)}),[o.pathname]);var k=Object(r.useState)(!1),C=Object(O.a)(k,2),S=C[0],F=C[1];return Object(r.useEffect)((function(){setTimeout((function(){F(!0)}),500)}),[]),Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(uc.a,{styles:{root:{backgroundImage:"linear-gradient(#00239c,#0d5ff9)",paddingTop:5,paddingRight:20}},height:{base:50},withBorder:!1,children:Object(de.jsx)(se.a,{justify:"flex-end",children:Object(de.jsxs)(le.a,{children:[Object(de.jsx)(ac,{}),Object(de.jsx)(ie.a,{variant:"subtle",c:"white",children:Object(de.jsx)(Jn.a,{})}),Object(de.jsx)(Qe.a,{p:2,bg:"white",size:"2.5rem",radius:"xl",src:Xn})]})})}),Object(de.jsxs)("div",{style:{display:"flex"},children:[Object(de.jsx)(Se.a,{shadow:"md",w:"290px",bg:"dark"==f.colorScheme?"":"#FFFFFF",sx:{transform:S?"translateX(0%)":"translateX(-100%)",transition:"transform 0.6s ease-out"},children:Object(de.jsxs)(We.a,{className:c.stickyNavbar,p:"xs",withBorder:!1,bg:"dark"==f.colorScheme?"":"transparent",children:[Object(de.jsx)(oc.a,{h:5}),Object(de.jsx)(We.a.Section,{children:p&&b&&b._id&&Object(de.jsx)(rs,{user:b,roleName:function(e){var t=p.find((function(t){return t.id===e}));return t?(s(ya(t.role.name)),t.role.name):"User not found"}(b._id)})}),Object(de.jsx)(oc.a,{h:2}),Object(de.jsxs)(Ge.a,{children:[y(x,"profile_dashboard")&&Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/",label:"Dashboard",icon:Object(de.jsx)(sc.a,{size:"2rem",stroke:2}),className:n(c.link,Object(w.a)({},c.linkActive,"/"===d))}),y(x,"user_view")&&Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/users",label:"Users",icon:Object(de.jsx)(Zn.a,{size:"2rem",stroke:2}),className:n(c.link,Object(w.a)({},c.linkActive,"/users"===d))}),y(x,"acl")&&Object(de.jsxs)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/acl",label:"ACL",icon:Object(de.jsx)(Qn.a,{size:"2rem",stroke:2}),className:n(c.link,Object(w.a)({},c.linkActive,"/acl"===d)),children:[Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/acl/rolesvspermissions",label:"Roles vs Permission",icon:Object(de.jsx)(rc.a,{size:"1rem",stroke:2}),className:c.link}),Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/acl/permissions",label:"Permissions",icon:Object(de.jsx)(rc.a,{size:"1rem",stroke:2}),className:c.link}),Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/acl/userpermissions",label:"Users Permissions",icon:Object(de.jsx)(rc.a,{size:"1rem",stroke:2}),className:c.link})]}),y(x,"campaign_dashoard")&&Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/campaign",label:"Campaign",icon:Object(de.jsx)(cc.a,{size:"2rem",stroke:2}),className:n(c.link,Object(w.a)({},c.linkActive,"/campaign"===d))}),y(x,"customer_dashboard")&&Object(de.jsx)(qe.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:ve.b,to:"/customers",label:"Customers",icon:Object(de.jsx)(nc.a,{size:"2rem",stroke:2}),className:n(c.link,Object(w.a)({},c.linkActive,"/customers"===d||"/dashboard"===d))})]})]})}),Object(de.jsx)("span",{style:{flexGrow:"1",width:"100px",height:"calc(100vh - 50px)",overflowY:"auto",backgroundImage:"radial-gradient(#F2F2F2 50% ,#F3F6FF)"},children:Object(de.jsxs)("div",{style:{paddingLeft:"10px",paddingRight:"20px",marginTop:"20px",backgroundColor:"transparent"},children:[Object(de.jsx)("div",{style:{display:"flex",justifyContent:"space-between",backgroundColor:"transparent"}}),t]})})]})]})},ss=a(1023),os=a(1e3),is=a(1001);function ls(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}function ds(e){Zr.a.show({title:"Success",message:e,styles:function(e){return{root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}}}})}var us=function(e){var t=e.isModalOpen,a=e.curr_user,c=e.handleModalClose,n=e.userRolesPermissions,s=e.userPermissionsOptions,o=(e.classes,e.cx,Object.keys(n).length>0?n.map((function(e){return{id:e.id,permission:e.permission.name,isactive:e.isActive?"active":"disabled",created_at:ls(e.created_at)}})):[]),i=Object(g.e)(),l=Object(m.b)(),d=Object(r.useState)(o),u=Object(O.a)(d,2),j=u[0],b=(u[1],Object(r.useState)(!1)),p=Object(O.a)(b,2),f=(p[0],p[1],Object(r.useState)(!1)),h=Object(O.a)(f,2),x=(h[0],h[1],Object(r.useState)(null)),v=Object(O.a)(x,2),w=v[0],k=v[1];Array.isArray(j)&&j.map((function(e){return Object(de.jsxs)("tr",{children:[Object(de.jsx)("td",{children:e.permission?e.permission:Object(de.jsx)(ic.a,{label:"Permission",placeholder:"Select Permission",data:s,value:w,onChange:function(e){return k(e)},withAsterisk:!0,required:!0})}),Object(de.jsx)("td",{children:Object(de.jsx)(wc.a,{onClick:function(){return t=e.id,l(Ia(t)),l(wa()),ds("changed status successfully"),void c();var t},checked:"active"==e.isactive,color:"teal",onLabel:"ACTIVE",offLabel:"DISABLE"})}),Object(de.jsx)("td",{children:e.created_at})]},e.id)}));return Object(de.jsxs)(de.Fragment,{children:[console.log(a),Object(de.jsxs)(jt.a,{opened:t,title:"User Actions",onClose:c,overlayProps:{color:"dark"===i.colorScheme?i.colors.dark[9]:i.colors.gray[2],opacity:.55,blur:3},size:"lg",children:[Object(de.jsxs)(Ce.a,{children:[Object(de.jsx)(Ce.a.Col,{span:2,children:Object(de.jsx)(Qe.a,{src:null,alt:"no image here",color:"indigo",radius:"0",size:50})}),Object(de.jsx)(Ce.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Name:"})," ",a.email]})}),Object(de.jsx)(Ce.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Role:"})," ",a.role]})}),Object(de.jsx)(Ce.a.Col,{span:8,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Address:"})," ","123/street,Lorem ipsume Lorem ipsumeLorem ipsume"]})}),Object(de.jsx)(Ce.a.Col,{span:4,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(de.jsxs)(ee.a,{children:[Object(de.jsx)(ee.a,{c:"#4E70EA",fw:700,children:"Mobile:"})," ","987654321"]})})]}),Object(de.jsx)(Ce.a,{children:Object(de.jsxs)(Ce.a.Col,{span:12,children:[Object(de.jsx)(oc.a,{h:"xl"}),Object(de.jsx)(y.a,{order:4,c:"#4E70EA",children:"User activity"}),Object(de.jsx)(oc.a,{h:"xl"}),Object(de.jsxs)(ss.a,{active:1,bulletSize:24,lineWidth:2,children:[Object(de.jsxs)(ss.a.Item,{bullet:Object(de.jsx)(os.a,{size:12}),title:"User Created",children:[Object(de.jsxs)(ee.a,{color:"dimmed",size:"sm",children:[a.email,"' created at ",ls(new Date)," ",Object(de.jsx)(ee.a,{variant:"link",component:"span",inherit:!0})]}),Object(de.jsx)(ee.a,{size:"xs",mt:4,children:"2 hours ago"})]}),Object(de.jsxs)(ss.a.Item,{bullet:Object(de.jsx)(is.a,{size:12}),title:"Created Camapign",children:[Object(de.jsxs)(ee.a,{color:"dimmed",size:"sm",children:[a.email,"' created new campaign",Object(de.jsx)(ee.a,{variant:"link",component:"span",inherit:!0})]}),Object(de.jsx)(ee.a,{size:"xs",mt:4,children:"52 minutes ago"})]}),Object(de.jsxs)(ss.a.Item,{bullet:Object(de.jsx)(is.a,{size:12}),title:"Closed Camapign",children:[Object(de.jsxs)(ee.a,{color:"dimmed",size:"sm",children:[a.email,"' closed new campaign",Object(de.jsx)(ee.a,{variant:"link",component:"span",inherit:!0})]}),Object(de.jsx)(ee.a,{size:"xs",mt:4,children:"52 minutes ago"})]})]})]})})]})]})},js=function(e){var t=e.isModalOpen,a=e.handleModalClose,c=e.handleEditUser,n=e.userData,s=e.rolesData,o=n||{firstname:"",lastname:"",email:"",mobile:""},i=Object(r.useState)(o),l=Object(O.a)(i,2),d=l[0],u=l[1];return Object(r.useEffect)((function(){u(o)}),[o]),Object(de.jsxs)(jt.a,{opened:t,onClose:a,title:"Edit User",style:{content:{maxHeight:"80vh"}},children:[Object(de.jsxs)(hc.a,{cols:2,children:[Object(de.jsx)(Er,{placeholder:"First Name",label:"First Name",value:d.firstname,onChange:function(e){return u(Object(k.a)(Object(k.a)({},d),{},{firstname:e.target.value}))},withAsterisk:!0,required:!0}),Object(de.jsx)(Er,{placeholder:"Last Name",label:"Last Name",value:d.lastname,onChange:function(e){return u(Object(k.a)(Object(k.a)({},d),{},{lastname:e.target.value}))},withAsterisk:!0})]}),Object(de.jsx)(xc,{placeholder:"Date Of Birth",label:"Date Of Birth",rightSection:Object(de.jsx)(ie.a,{variant:"subtle",children:Object(de.jsx)(Oc.a,{})}),withAsterisk:!0,maxDate:new Date}),Object(de.jsx)(Er,{placeholder:"Email",label:"Email",value:d.email,onChange:function(e){return u(Object(k.a)(Object(k.a)({},d),{},{email:e.target.value}))},withAsterisk:!0,required:!0,type:"email"}),Object(de.jsx)(Er,{placeholder:"Mobile",label:"Mobile",type:"number",value:d.mobile,onChange:function(e){return u(Object(k.a)(Object(k.a)({},d),{},{mobile:e.target.value}))},withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"Pincode",label:"Pincode",type:"number",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"State",label:"State",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"City",label:"City",withAsterisk:!0}),Object(de.jsx)(Er,{placeholder:"Address",label:"Address",withAsterisk:!0}),Object(de.jsx)(vc,{label:"Role",placeholder:"Select Role",data:s,value:d.role,onChange:function(e){return u(Object(k.a)(Object(k.a)({},d),{},{role:e}))},withAsterisk:!0,required:!0}),Object(de.jsx)(zr,{className:"mt-4",onClick:function(){return c(d)},disabled:!d.firstname||!d.lastname||!d.email||!d.role,children:"Save Changes"})]})};var bs=function(){var e,t=Object(Ue.a)((function(e){return{header:{position:"sticky",top:0,backgroundColor:"#F3F6FF",fontColor:"red",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Ze.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.lg}}}))(),a=t.classes,c=t.cx,n=Object(r.useState)(!1),s=Object(O.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)(!1),d=Object(O.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!1),p=Object(O.a)(b,2),f=p[0],h=p[1],x=Object(r.useState)(null),g=Object(O.a)(x,2),v=g[0],y=g[1],w=Object(m.b)(),k=Object(m.c)((function(e){return e.rolePermission})),C=k.rolesPermissions,S=k.roles,F=k.permissions,D=Object(m.c)((function(e){return e.auth})).users,P={},A=Object(r.useState)({firstname:null,lastname:null,email:null,role:null,mobile:null}),N=Object(O.a)(A,2),I=(N[0],N[1],Object(r.useState)(null)),E=Object(O.a)(I,2),z=E[0],T=E[1],M=Object(Ur.a)(C);try{for(M.s();!(e=M.n()).done;){var R=e.value,B=R.userId,_=R.permission.name;P.hasOwnProperty(B)?P[B].push(_):P[B]=[_]}}catch(Z){M.e(Z)}finally{M.f()}var L,K=(null===D||void 0===D?void 0:D.map((function(e){return e.id})))||[],U=Object(Ur.a)(K);try{for(U.s();!(L=U.n()).done;){var H=L.value;P.hasOwnProperty(H)||(P[H]=[])}}catch(Z){U.e(Z)}finally{U.f()}var q=function(e){T(e),j(!0)};Object(r.useEffect)((function(){w(wa()),w(fa()),w(Pa()),w(Da())}),[]);var G=z&&C.filter((function(e){return e.userId===z.id})),W=[];z&&F.map((function(e){P[z.id].includes(e.name)||W.push({value:e.id,label:e.name})}));var Y=Object.keys(P).length>0?D.map((function(e){return{id:e.id,roleId:e.roleId,email:e.email,isactive:"active",role:e.role.name,created_at:(t=e.created_at,new Date(t).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"}))};var t})):[],V=[{header:"Name",accessorKey:"email",Cell:function(e){var t=e.row,a=e.column;return Object(de.jsx)(ee.a,{variant:"light",onClick:function(e){e.preventDefault(),"email"===a.id&&q(t.original)},children:t.original.email.split("@").length>0?t.original.email.split("@")[0]:""})}},{header:"Email",accessorKey:"email",Cell:function(e){var t=e.row,a=e.column;return Object(de.jsx)(ee.a,{variant:"light",onClick:function(e){e.preventDefault(),"email"===a.id&&q(t.original)},children:t.original.email})}},{header:"Role",accessorKey:"role"},{header:"Status",accessorKey:"isactive",Cell:function(e){e.value;return Object(de.jsx)(ge.a,{color:"teal",size:"xs",compact:!0,children:"active"})}},{header:"Created At",accessorKey:"created_at"},{header:"Action",accessorKey:"action",Cell:function(e){var t=e.row,a=e.column;return Object(de.jsx)(ie.a,{variant:"light",onClick:function(e){var r;e.preventDefault(),"action"===a.id&&(r=t.original,y(r),h(!0))},children:Object(de.jsx)(rc.a,{size:"1rem"})})}}],J=S&&Array.isArray(S)&&S.map((function(e){return{value:e.id,label:e.name}}));return D&&0!==D.length?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(je,{columns:V,data:Y,onRowClick:function(e){return console.log("Row clicked:",e)}}),u&&Object(de.jsx)(us,{isModalOpen:u,handleModalClose:function(){o&&i(!1),u&&j(!1)},curr_user:z,userRolesPermissions:G,userPermissionsOptions:W,classes:a,cx:c}),Object(de.jsx)(js,{isModalOpen:f,handleModalClose:function(){return h(!1)},handleEditUser:function(e){var t;h(!1),t="User data updated successfully",Zr.a.show({title:"Success",message:t,styles:function(e){return{root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}}}})},userData:v,rolesData:J})]}):Object(de.jsx)(ke.a,{visible:!0,overlayBlur:2,overlayColor:"#F3F6FF",loaderProps:{color:"#0d5ff9",size:"xl",variant:"dots"}})},ps=a(1009),fs=function(){var e,t=Object(r.useState)(null),a=Object(O.a)(t,2),c=a[0],n=a[1],s=Object(m.c)((function(e){return e.auth})).user,o=Object(ps.a)({initialValues:{emailId:"",mobileNo:"",dateOfBirth:"",image:null},validate:{emailId:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:"Invalid email"},mobileNo:function(e){return/^[6789]/.test(e)?10!==e.length?"Mobile number should be 10 digits":parseInt(e,10).toString()!==e?"Mobile number should only contain numbers":null:"Mobile number should start with 6, 7, 8, or 9"},dateOfBirth:function(e){return e?new Date(e)>=new Date?"Date of Birth should be before today's date":null:"Date of Birth is required"},image:function(e){if(!e)return null;if(e.size>5242880)return"File size should be less than 5MB";return["image/jpeg","image/png"].includes(e.type)?null:"Invalid file type. Only JPEG or PNG is allowed"}},validateInputOnChange:!0}),i=Object(r.useRef)(null);return Object(de.jsx)(X.a,{children:Object(de.jsx)(Se.a,{shadow:"lg",p:30,radius:"md",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(y.a,{mb:10,size:"lg",c:"#0d5ff9",children:"My Profile"}),Object(de.jsx)(Lr.a,{c:"#0d5ff9"}),Object(de.jsx)(oe.a,{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)(y.a,{size:30,c:"#0d5ff9",children:null===s||void 0===s||null===(e=s.email)||void 0===e?void 0:e.split("@")[0]})}),c&&Object(de.jsx)(Qe.a,{size:"xl",src:c,radius:"xl"}),c&&Object(de.jsx)(oe.a,{children:Object(de.jsx)(ie.a,{onClick:function(){n(null),o.setFieldValue("image",null),i.current.value=null,Object(Zr.b)({type:"info",title:"Image Removed",message:"Profile image has been removed."})},sx:{color:"#0d5ff9","&:hover":{backgroundColor:"#F3F6FF"}},children:Object(de.jsx)(Ft.a,{})})})]})}),Object(de.jsxs)("form",{onSubmit:o.onSubmit((function(e){console.log(e),Object(Zr.b)({type:"default",title:"Profile saved successfully!",message:"Your profile details have been updated."})})),children:[Object(de.jsx)(ge.a,{variant:"outline",compact:!0,styles:{root:{borderColor:"#0d5ff9",color:"#0d5ff9","&:hover":{backgroundColor:"#F3F6FF",color:"#0d5ff9"}}},onClick:function(){return i.current.click()},children:Object(de.jsx)(ee.a,{c:"dimmed",children:"Upload Image"})}),Object(de.jsxs)(Ge.a,{mt:30,children:[Object(de.jsxs)(le.a,{children:[Object(de.jsx)(Er,Object(k.a)(Object(k.a)({sx:{flexGrow:1},label:"Email ID",placeholder:null===s||void 0===s?void 0:s.email},o.getInputProps("emailId")),{},{disabled:!0})),Object(de.jsx)(ie.a,{mt:15,c:"green",children:Object(de.jsx)(St.a,{})})]}),Object(de.jsxs)(le.a,{children:[Object(de.jsx)(Er,Object(k.a)(Object(k.a)({sx:{flexGrow:1},label:"Mobile No",placeholder:"9876543210"},o.getInputProps("mobileNo")),{},{inputMode:"numeric",disabled:!0})),Object(de.jsx)(ie.a,{mt:15,c:"green",children:Object(de.jsx)(St.a,{})})]}),Object(de.jsx)(xc,Object(k.a)({valueFormat:"DD MMM, YYYY",maxDate:new Date,label:"Date of Birth"},o.getInputProps("dateOfBirth"))),Object(de.jsx)("input",{type:"file",ref:i,style:{display:"none"},onChange:function(e){var t=e.target.files[0];if(t)if(t.size>5242880||!["image/jpeg","image/png"].includes(t.type))Object(Zr.b)({type:"error",title:"Invalid Image",message:"Please upload a valid JPEG or PNG image less than 5MB."});else{o.setFieldValue("image",t);var a=URL.createObjectURL(t);n(a),Object(Zr.b)({type:"success",title:"Image uploaded successfully!",message:"Image is set for your profile. Please save"})}},accept:".jpeg, .jpg, .png"}),Object(de.jsx)(zr,{type:"submit",children:"Save"})]})]})]})})})},hs=function(){var e=Object(ps.a)({initialValues:{name:"",address:"",pincode:"",state:"",city:""}});return Object(de.jsx)(X.a,{children:Object(de.jsx)(Se.a,{shadow:"lg",p:30,radius:"md",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(y.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Edit Profile"}),Object(de.jsx)(Lr.a,{c:"#0d5ff9"}),Object(de.jsx)("form",{onSubmit:e.onSubmit((function(e){console.log(e),Object(Zr.b)({type:"default",title:"Profile updated successfully!",message:"Your profile details have been updated."})})),children:Object(de.jsxs)(Ge.a,{mt:30,children:[Object(de.jsx)(Er,Object(k.a)({label:"Name",placeholder:"Enter your name"},e.getInputProps("name"))),Object(de.jsxs)(le.a,{grow:!0,children:[Object(de.jsx)(Er,Object(k.a)(Object(k.a)({label:"Pincode",placeholder:"Enter your pincode"},e.getInputProps("pincode")),{},{inputMode:"numeric"})),Object(de.jsx)(vc,Object(k.a)({placeholder:"Select your state",label:"State",data:[]},e.getInputProps("state"))),Object(de.jsx)(vc,Object(k.a)({placeholder:"Select your city",label:"City",data:[]},e.getInputProps("city")))]}),Object(de.jsx)(Er,Object(k.a)({w:"100%",label:"Address",placeholder:"Enter your address"},e.getInputProps("address"))),Object(de.jsx)(zr,{type:"submit",children:"Update Profile"})]})})]})})})},Os=function(){return Object(de.jsx)(X.a,{children:Object(de.jsxs)(Ce.a,{children:[Object(de.jsx)(Ce.a.Col,{span:5,children:Object(de.jsx)(fs,{})}),Object(de.jsx)(Ce.a.Col,{span:7,children:Object(de.jsx)(hs,{})})]})})},ms=function(e){var t=e.onPasswordChange,a=e.canSave,c=Object(ps.a)({initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},validate:{confirmPassword:function(e,t){return e!==t.newPassword?"Password does not match":null}}}),n=Object(m.c)((function(e){return e.auth})).user,s=c.values.newPassword;Object(r.useEffect)((function(){t(s)}),[s,t]);var o=function(){var e=Object(F.a)(S.a.mark((function e(t){var r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=8;break}return e.next=4,i.a.post("".concat("https://custprofileapi.europ-assistance.in","/auth/change-password"),{email:n.email,oldPassword:t.oldPassword,newPassword:t.newPassword});case 4:200===(r=e.sent).status?Object(Zr.b)({type:"success",title:"Password changed successfully!",message:"Your password has been updated."}):Object(Zr.b)({type:"error",title:"Password change failed!",message:r.data.message||"Unexpected error occurred"}),e.next=9;break;case 8:Object(Zr.b)({type:"warning",title:"Password change failed!",message:"Ensure all validations are met."});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(Zr.b)({type:"error",title:"Password change failed!",message:(null===(c=e.t0.response)||void 0===c?void 0:c.data.message)||"Unexpected error occurred"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsx)(Se.a,{shadow:"lg",p:30,radius:"md",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(y.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Change Password"}),Object(de.jsx)(Lr.a,{c:"#0d5ff9"}),Object(de.jsx)("form",{onSubmit:c.onSubmit(o),children:Object(de.jsxs)(Ge.a,{mt:30,children:[Object(de.jsx)(Ir,Object(k.a)({label:"Old Password"},c.getInputProps("oldPassword"))),Object(de.jsx)(Ir,Object(k.a)({label:"Set New Password"},c.getInputProps("newPassword"))),Object(de.jsx)(Ir,Object(k.a)({label:"Confirm Password"},c.getInputProps("confirmPassword"))),Object(de.jsx)(zr,{type:"submit",disabled:!a,children:"Save"})]})})]})})},xs=function(e){var t=e.password,a=void 0===t?"":t,c=e.onValidationChange,n=function(e){return e?"green":"red"};return Object(r.useEffect)((function(){var e=[a.length>=8,/[A-Z]/.test(a),/[a-z]/.test(a),/[0-9]/.test(a),/[^A-Za-z0-9\s]/.test(a)];c(e.every((function(e){return e})))}),[a,c]),Object(de.jsx)(Se.a,{shadow:"lg",p:30,radius:"md",children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(y.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Password Constraints"}),Object(de.jsx)(Lr.a,{c:"#0d5ff9"}),Object(de.jsx)(le.a,{children:Object(de.jsx)(xe.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:n(a.length>=8),checked:a.length>=8,label:Object(de.jsx)(ee.a,{c:n(a.length>=8),children:"Your password must be at least 8 characters in length"})})}),Object(de.jsx)(le.a,{children:Object(de.jsx)(xe.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:n(/[A-Z]/.test(a)),checked:/[A-Z]/.test(a),label:Object(de.jsx)(ee.a,{c:n(/[A-Z]/.test(a)),children:"At least 1 Uppercase letters [A-Z]"})})}),Object(de.jsx)(le.a,{children:Object(de.jsx)(xe.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:n(/[a-z]/.test(a)),checked:/[a-z]/.test(a),label:Object(de.jsx)(ee.a,{c:n(/[a-z]/.test(a)),children:"At least 1 Lowercase letters (a-z)"})})}),Object(de.jsx)(le.a,{children:Object(de.jsx)(xe.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:n(/[0-9]/.test(a)),checked:/[0-9]/.test(a),label:Object(de.jsx)(ee.a,{c:n(/[0-9]/.test(a)),children:"At least 1 Number (0-9)"})})}),Object(de.jsx)(le.a,{children:Object(de.jsx)(xe.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:n(/[^A-Za-z0-9\s]/.test(a)),checked:/[^A-Za-z0-9\s]/.test(a),label:Object(de.jsx)(ee.a,{c:n(/[^A-Za-z0-9\s]/.test(a)),children:"At least 1 Symbols or special characters (excluding space)"})})})]})})},gs=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(!1),s=Object(O.a)(n,2),o=s[0],i=s[1];return Object(de.jsx)(X.a,{children:Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(ms,{onPasswordChange:c,canSave:o})}),Object(de.jsx)(Ce.a.Col,{span:6,children:Object(de.jsx)(xs,{password:a,onValidationChange:i})})]})})},vs=(a(1002),a(528),function(e){var t=e.source;console.log(t);var a=Object(m.b)();Object(r.useEffect)((function(){a(hr(t))}),[a,t]);var c=Object(m.c)((function(e){return e.customerProfileTool.data}));return"loading"===Object(m.c)((function(e){return e.customerProfileTool.status}))?Object(de.jsx)("div",{children:"Loading..."}):Object(de.jsx)(X.a,{h:"400px",w:"870px",pt:20,children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsxs)(yn.a,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[Object(de.jsx)(wn.a,{vertical:!1,strokeDasharray:"1"}),Object(de.jsx)(kn.a,{dataKey:"name"}),Object(de.jsx)(Cn.a,{label:{value:"No. of Entities",angle:-90,position:"insideLeft",offset:0}}),Object(de.jsx)(Sn.a,{}),Object(de.jsx)(Fn.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(de.jsx)(Dn.a,{dataKey:"customers",stroke:"#7366FF",strokeWidth:2.36,fill:"#7366FF",fillOpacity:.7})]})})})}),ys=function(){var e=Object(r.useState)("All"),t=Object(O.a)(e,2),a=t[0],c=t[1];return Object(de.jsxs)(Se.a,{shadow:"md",radius:"md",children:[Object(de.jsx)(X.a,{children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Customer Analysis"})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(vn.a,{})})})]})}),Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsx)(Ge.a,{children:Object(de.jsx)(vc,{label:"Source(s)",placeholder:"All",data:["All","Call","homecare","eportal"],value:a,onChange:c})})}),Object(de.jsx)(Ce.a.Col,{span:9,children:Object(de.jsx)(vs,{source:a})})]})]})},ws=function(e){var t=e.source,a=Object(m.b)();console.log("source for profiles",t),Object(r.useEffect)((function(){a(mr(t))}),[a,t]);var c=Object(m.c)((function(e){return e.profileCount.data})),n=Object(m.c)((function(e){return e.profileCount.status}));return console.log("Chart data for profiles",c),"loading"===n?Object(de.jsx)("div",{children:"Loading..."}):Object(de.jsx)(X.a,{h:"400px",w:"870px",pt:20,children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsxs)(yn.a,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[Object(de.jsx)(wn.a,{vertical:!1,strokeDasharray:"1"}),Object(de.jsx)(kn.a,{dataKey:"name"}),Object(de.jsx)(Cn.a,{label:{value:"No. of Entities",angle:-90,position:"insideLeft",offset:0}}),Object(de.jsx)(Sn.a,{}),Object(de.jsx)(Fn.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(de.jsx)(Dn.a,{dataKey:"profiles",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7})]})})})},ks=function(){var e=Object(r.useState)("All"),t=Object(O.a)(e,2),a=t[0],c=t[1];return Object(de.jsxs)(Se.a,{shadow:"md",radius:"md",children:[Object(de.jsx)(X.a,{children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Profile Analysis"})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(vn.a,{})})})]})}),Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsx)(Ge.a,{children:Object(de.jsx)(vc,{label:"Source(s)",placeholder:"All",data:["All","Call","homecare","eportal"],value:a,onChange:c})})}),Object(de.jsx)(Ce.a.Col,{span:9,children:Object(de.jsx)(ws,{source:a})})]})]})},Cs=[{name:"Tech Enthusiastic",detractors:4e3,promotors:2400},{name:"Foodies",detractors:3e3,promotors:2210},{name:"Auto Lovers",detractors:2e3,promotors:2290},{name:"Gadget Freaks",detractors:2780,promotors:2e3},{name:"Sports Fans",detractors:1890,promotors:2181},{name:"Musicophile",detractors:2390,promotors:2500},{name:"Avid Traveller",detractors:3490,promotors:2100}],Ss=function(){return Object(de.jsx)(X.a,{h:"400px",w:"870px",pt:20,children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsxs)(yn.a,{data:Cs,margin:{top:20,right:30,left:20,bottom:5},children:[Object(de.jsx)(wn.a,{vertical:!1,strokeDasharray:"1"}),Object(de.jsx)(kn.a,{dataKey:"name"}),Object(de.jsx)(Cn.a,{label:{value:"No. of Customers",angle:-90,position:"insideLeft",offset:0}}),Object(de.jsx)(Sn.a,{}),Object(de.jsx)(Fn.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(de.jsx)(Dn.a,{dataKey:"promotors",stroke:"#7366FF",strokeWidth:2.36,fill:"#7366FF",fillOpacity:.7}),Object(de.jsx)(Dn.a,{dataKey:"detractors",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7})]})})})},Fs=a(161),Ds=["#FF638499","#36A2EB99","#FFCE5699","#FF999999","#66FF6699","#FF663399","#FFCC3399","#00CCCC99","#CC660099","#6666FF99","#33996699","#FF996699","#FF663399","#CCCC0099","#FFCCCC99","#66999999","#33669999","#99CC3399","#CC333399","#33CCCC99"],Ps=function(e){var t=Math.PI/180,a=e.cx,r=e.cy,c=e.midAngle,n=e.innerRadius,s=e.outerRadius,o=e.startAngle,i=e.endAngle,l=e.fill,d=e.payload,u=e.percent,j=(e.value,Math.sin(-t*c)),b=Math.cos(-t*c),p=a+(s+10)*b,f=r+(s+10)*j,h=a+(s+30)*b,O=r+(s+30)*j,m=h+22*(b>=0?1:-1),x=O,g=b>=0?"start":"end";return Object(de.jsxs)("g",{children:[Object(de.jsx)(Fs.a,{cx:a,cy:r,innerRadius:n,outerRadius:s,startAngle:o,endAngle:i,fill:l}),Object(de.jsx)(Fs.a,{cx:a,cy:r,startAngle:o,endAngle:i,innerRadius:s+6,outerRadius:s+10,fill:l}),Object(de.jsx)("path",{d:"M".concat(p,",").concat(f,"L").concat(h,",").concat(O,"L").concat(m,",").concat(x),stroke:l,fill:"none"}),Object(de.jsx)("circle",{cx:m,cy:x,r:2,fill:l,stroke:"none"}),Object(de.jsx)("text",{x:m+12*(b>=0?1:-1),y:x,style:{fontSize:15},textAnchor:g,fill:"#333",children:"".concat(d.name)}),Object(de.jsx)("text",{x:m+12*(b>=0?1:-1),y:x,dy:18,textAnchor:g,fill:"#999",children:"( ".concat((100*u).toFixed(2),"%)")})]})},As=function(){var e=Object(m.b)(),t=Object(m.c)(jr),a=Object(m.c)(br),r=Object(m.c)(pr),c=t;a&&a.profileType&&a.demographic&&r[a.profileType]&&(c=(r[a.profileType][a.demographic]||[]).map((function(e,t){return{name:e[a.demographic],value:e.count,color:Ds[t%Ds.length]}})),console.log("Data to display",c));var n=Object(m.c)((function(e){return e.profileDataCard.hoveredItem})),s=c.findIndex((function(e){return e.name===n}));return Object(de.jsx)(X.a,{h:300,w:450,children:Object(de.jsx)(zc.a,{width:"100%",height:"100%",children:Object(de.jsx)(Nn.a,{width:300,height:400,children:Object(de.jsx)(In.a,{data:c,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",onMouseEnter:function(t,a){var r="string"===typeof t.name?t.name:"Unknown";e(dr(r))},onMouseLeave:function(){e(ur())},activeIndex:s,activeShape:Ps,children:c.map((function(e,t){return Object(de.jsx)(En.a,{fill:e.color},"cell-".concat(t))}))})})})})},Ns=function(e){var t=e.bgColor,a=void 0===t?"#eee":t,r=(e.textColor,e.text),c=void 0===r?"":r;Object(m.b)();return Object(de.jsxs)("svg",{width:"150",height:"50",viewBox:"0 0 250 30",style:{cursor:"pointer"},children:[Object(de.jsx)("polygon",{points:"240,2.5 45,2.5 45,27.5 240,27.5",fill:function(e){var t=document.createElement("canvas");t.width=t.height=1;var a=t.getContext("2d");a.fillStyle=e,a.fillRect(0,0,1,1);var r=Array.from(a.getImageData(0,0,1,1).data),c=Object(O.a)(r,3),n=c[0],s=c[1],o=c[2];return"rgba(".concat(n,", ").concat(s,", ").concat(o,", 0.40)")}(a)}),Object(de.jsx)("polygon",{points:"45,2.5 15,15 45,27.5",fill:a,style:{transition:"transform 0.5s"}}),Object(de.jsx)("text",{x:"60%",y:"50%","dominant-baseline":"middle","text-anchor":"middle","font-family":"Arial","font-weight":"bold","font-size":"20px",style:{transition:"transform 0.5s"},children:c})]})},Is=a.p+"static/media/Avid Traveler.153391f9.png",Es=a.p+"static/media/Fitness Freak.46faf880.png",zs=a.p+"static/media/Foodie.2aa654ef.png",Ts=a.p+"static/media/Sports Fan.2152ca0c.png",Ms=a.p+"static/media/Techie.4d48204f.png",Rs={"Avid Traveller":Is,"Auto Lover":a.p+"static/media/Auto Lover.176e4ecb.png",Musicophile:a.p+"static/media/Musicophile.4103dd9d.png","Gadgets Freaks":a.p+"static/media/Gadgets Freaks.5948795a.png","Fitness Freak":Es,Foodie:zs,"Sports Fan":Ts,Techie:Ms,AddProfile:a.p+"static/media/AddProfile.4fbe8ef9.png"},Bs=function(){var e=Object(m.c)(jr);console.log("data from ProfileDataCard",e);var t=e.reduce((function(e,t){return e+t.value}),0);return Object(de.jsx)(Se.a,{withBorder:!0,shadow:"xl",radius:"md",bg:"#F3F6FF",sx:{overflowY:"auto",scrollbarColor:"#0d5ff9"},children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsxs)(le.a,{spacing:"xs",children:[Object(de.jsx)(y.a,{size:"md",children:"Total"}),Object(de.jsx)(y.a,{size:"md",c:"#0d5ff9",children:t})]}),e.map((function(e,t){return Object(de.jsxs)(le.a,{spacing:0,children:[Object(de.jsxs)(le.a,{spacing:0,children:[Object(de.jsx)(Qe.a,{src:Rs[e.src],alt:"type",radius:"xl",size:"lg"},e.src),Object(de.jsx)(Ns,{text:e.name,bgColor:e.color,textColor:"black"},e.name)]}),Object(de.jsx)(ee.a,{children:e.value})]})}))]})})},_s=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.profileDataCard.status})),a=Object(m.c)((function(e){return e.profileDataCard.displayAndColorMappings})),c=Object(r.useState)("all"),n=Object(O.a)(c,2),s=n[0],o=n[1],i=Object(r.useState)("all"),l=Object(O.a)(i,2),d=l[0],u=l[1];Object(r.useEffect)((function(){console.log("dispatching"),e(sr({}))}),[e]),Object(r.useEffect)((function(){"all"===s&&"all"===d?e(sr({})):"all"!==s&&"all"!==d&&e(sr({profileType:s,demographic:d}))}),[s,d,e]);var j=[{value:"all",label:"All"}].concat(Object(we.a)(Object.entries(a).map((function(e){var t=Object(O.a)(e,2);return{value:t[0],label:t[1].displayName}}))));return Object(de.jsxs)(se.a,{style:{width:"100%",height:"100%",flex:1,alignItems:"stretch"},children:[Object(de.jsx)(se.a,{style:{marginRight:"20px",flex:3},children:Object(de.jsxs)(Se.a,{shadow:"lg",radius:"md",style:{width:"100%"},children:[Object(de.jsx)(X.a,{children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Profile"})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(vn.a,{})})})]})}),Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(vc,{disabled:"loading"===t,label:"Profile",placeholder:"Select Profile(s)",data:j,onChange:function(e){return o(e)}}),Object(de.jsx)(vc,{disabled:"loading"===t,label:"Demographics",placeholder:"Select Main Demographics",data:[{value:"all",label:"All"},{value:"ageRange",label:"Age"},{value:"gender",label:"Gender"}],onChange:function(e){return u(e)}})]})}),Object(de.jsx)(Ce.a.Col,{span:12,children:Object(de.jsx)(oe.a,{children:"loading"===t?Object(de.jsx)(te.a,{c:"5c0ff2",size:"lg"}):Object(de.jsx)(As,{})})})]})]})}),Object(de.jsx)(se.a,{style:{flex:1},children:Object(de.jsx)(Se.a,{shadow:"lg",radius:"md",style:{width:"100%"},children:Object(de.jsx)(oe.a,{style:{height:"100%"},children:Object(de.jsx)(Bs,{})})})})]})},Ls=function(){return Object(de.jsx)(X.a,{children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(_s,{}),Object(de.jsx)(ys,{}),Object(de.jsx)(ks,{}),Object(de.jsxs)(Se.a,{shadow:"md",radius:"md",children:[Object(de.jsx)(X.a,{children:Object(de.jsxs)(se.a,{justify:"space-between",children:[Object(de.jsx)(oe.a,{children:Object(de.jsx)(ee.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Promoters vs Detractors"})}),Object(de.jsx)(oe.a,{children:Object(de.jsx)(ve.b,{to:"/campaign",children:Object(de.jsx)(ie.a,{c:"#0d5ff9",size:"sm",children:Object(de.jsx)(vn.a,{})})})})]})}),Object(de.jsxs)(Ce.a,{grow:!0,children:[Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsxs)(Ge.a,{children:[Object(de.jsx)(vc,{label:"Source(s)",placeholder:"All",data:["Test"]}),Object(de.jsxs)(le.a,{children:[Object(de.jsx)(vc,{label:"Year",placeholder:"All",data:["Test"]}),Object(de.jsx)(vc,{label:"Month",placeholder:"All",data:["Test"]})]})]})}),Object(de.jsx)(Ce.a.Col,{span:9,children:Object(de.jsx)(Ss,{})})]})]}),Object(de.jsx)(Se.a,{shadow:"md",radius:"md",children:Object(de.jsx)(An,{})})]})})};function Ks(e){var t=e.customerList,a=Object(m.b)(),c=Object(v.h)(),n=Object(m.c)((function(e){return e.customer.customerDetailsStatus}));Object(r.useEffect)((function(){"success"===n&&c("/dashboard"),console.log(n)}),[n,c]);return Object(de.jsx)(X.a,{style:{marginTop:"30px"},children:Object(de.jsx)(je,{columns:[{accessorKey:"customerName",header:"Name",minSize:400},{accessorKey:"email",header:"Email",minSize:400},{accessorKey:"source",header:"Source"},{accessorKey:"level",header:"Level"}],data:t,onRowClick:function(e){a(I(e.customerId))}})})}var Us=a(1003),Hs=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.profileTypesCustomerMapping.profileTypes})),a=Object(m.c)((function(e){return e.profileTypesCustomerMapping.profileTypesStatus})),c=Object(m.c)((function(e){return e.profileTypesCustomerMapping.profileTypesStatus})),n=Object(m.c)((function(e){return e.profileTypesCustomerMapping.profileMappings})),s=Object(m.c)((function(e){return e.profileTypesCustomerMapping.profileMappingsStatus})),o=Object(r.useState)(!1),i=Object(O.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)({}),j=Object(O.a)(u,2),b=j[0],p=j[1],f={technology:"https://imgur.com/a/cweY8fX",sports:"https://imgur.com/a/9NKkaqR",music:"https://imgur.com/a/zlQUb16",gadget:"https://imgur.com/kQHQ4IS",food:"https://imgur.com/a/hxhCUq9",fitness:"https://imgur.com/eFsmreM",travel:"https://imgur.com/iUw4buI",automobile:"https://imgur.com/B4aIhl5"};Object(r.useEffect)((function(){e(B()),e(ct())}),[e]);return"loading"===a?Object(de.jsx)("div",{children:"Loading..."}):"failed"===a?Object(de.jsxs)("div",{children:["Error: ",c]}):Object(de.jsxs)("div",{children:[Object(de.jsx)("h1",{children:"Profile Types"}),Object(de.jsx)(Ce.a,{children:l?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)(ge.a,{onClick:function(){return d(!1)},variant:"text",children:[Object(de.jsx)(Us.a,{})," Back"]}),Object(de.jsx)("br",{}),"loading"===s?Object(de.jsx)(de.Fragment,{children:"Loading ..."}):"failed"===s?Object(de.jsx)(de.Fragment,{children:"Something went wrong"}):"succeeded"===s?Object(de.jsx)(Ks,{customerList:n}):void 0]}):t.map((function(t){return Object(de.jsx)(Ce.a.Col,{span:3,children:Object(de.jsxs)(Se.a,{shadow:"sm",padding:"lg",component:"a",target:"_blank",children:[Object(de.jsxs)(Se.a.Section,{children:[console.log(f[t.name]),Object(de.jsx)(Fr.a,{src:f[t.name],style:{width:"200px",height:"200px"}})]}),Object(de.jsxs)(Se.a.Section,{style:{padding:"10px"},children:[Object(de.jsx)(ee.a,{fw:500,size:"lg",style:{display:"inline-block",marginRight:"10px",cursor:"pointer"},onClick:function(){return a=t.id,e(nt(a)),void d(!0);var a},children:t.name}),Object(de.jsx)(wc.a,{checked:b[t.id]||!1,onChange:function(e){return a=t.id,r=e.currentTarget.checked,void p((function(e){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},a,r))}));var a,r},style:{display:"inline-block",float:"right"}})]})]})},t.id)}))})]})};var qs=function(){var e=Object(r.useState)("light"),t=Object(O.a)(e,2),a=t[0],c=t[1],n=Object(m.b)(),s=Object(m.c)((function(e){return e.auth})).isLoggedIn,o=Object(m.c)((function(e){return e.rolePermission})),l=(o.rolesPermissionsStatus,o.rolesPermissions,o.userPermissions);function d(e,t){return e.some((function(e){return e.name===t}))}return o.getAllRolesPermissionsMappingsByUserStatus,Object(r.useEffect)((function(){if("login"in localStorage){var e=JSON.parse(localStorage.getItem("login"));i.a.defaults.headers.common.authorization="Bearer ".concat(e.token)}}),[s]),Object(v.h)(),Object(r.useEffect)((function(){(JSON.parse(localStorage.getItem("login"))||{}).isLoggedIn&&n(ga())}),[n,s]),Object(de.jsx)(x.a,{colorScheme:a,toggleColorScheme:function(e){return c(e||("dark"===a?"light":"dark"))},children:Object(de.jsxs)(g.a,{theme:{colorScheme:a},withGlobalStyles:!0,withNormalizeCSS:!0,children:[Object(de.jsx)(Vn.a,{}),Object(de.jsxs)(v.d,{children:[Object(de.jsx)(v.b,{path:"/login",element:Object(de.jsx)(Tr,{})}),Object(de.jsx)(v.b,{path:"/register",element:Object(de.jsx)(ye,{})}),Object(de.jsx)(ns,{children:Object(de.jsxs)(v.d,{children:[d(l,"profile_dashboard")?Object(de.jsx)(Cr,{path:"/",element:Object(de.jsx)(Ls,{})}):Object(de.jsx)(Cr,{path:"/",element:Object(de.jsx)(Ac,{})}),d(l,"customer_dashboard")?Object(de.jsx)(Cr,{path:"/customers",element:Object(de.jsx)(pe,{})}):Object(de.jsx)(Cr,{path:"/customers",element:Object(de.jsx)(Ac,{})}),Object(de.jsx)(Cr,{path:"/campaign",element:Object(de.jsx)(Yn,{})}),Object(de.jsx)(Cr,{path:"/myAccount",element:Object(de.jsx)(Os,{})}),Object(de.jsx)(Cr,{path:"/securitySettings",element:Object(de.jsx)(gs,{})}),d(l,"user_view")?Object(de.jsx)(Cr,{path:"/users",element:Object(de.jsx)(bs,{})}):Object(de.jsx)(Cr,{path:"/users",element:Object(de.jsx)(Ac,{})}),d(l,"customer_dashboard")?Object(de.jsx)(Cr,{path:"/dashboard/*",element:Object(de.jsx)(oa,{})}):Object(de.jsx)(Cr,{path:"/dashboard/*",element:Object(de.jsx)(Ac,{})}),d(l,"acl")?Object(de.jsx)(Cr,{path:"/acl/*",element:Object(de.jsx)(Pc,{})}):Object(de.jsx)(Cr,{path:"/acl/*",element:Object(de.jsx)(Ac,{})}),Object(de.jsx)(v.b,{path:"/mobileSimulation",element:Object(de.jsx)(_r,{})}),Object(de.jsx)(v.b,{path:"/agent",element:Object(de.jsx)(Xr,{})}),Object(de.jsx)(Cr,{path:"/pd",element:Object(de.jsx)(Ac,{})}),Object(de.jsx)(Cr,{path:"/profile",element:Object(de.jsx)(Hs,{})})]})})]})]})})},Gs=Object(l.a)({});i.a.defaults.baseURL="https://custprofileapi.europ-assistance.in",s.a.render(Object(de.jsx)(c.a.StrictMode,{children:Object(de.jsx)(m.a,{store:wr,children:Object(de.jsx)(ve.a,{children:Object(de.jsx)(d.a,{theme:Gs,children:Object(de.jsx)(r.Suspense,{fallback:"...loading",children:Object(de.jsx)(qs,{})})})})})}),document.getElementById("root"))}},[[843,1,2]]]);
//# sourceMappingURL=main.928e049d.chunk.js.map