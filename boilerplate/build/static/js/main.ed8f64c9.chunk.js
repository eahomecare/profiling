(this["webpackJsonpprobook-client"]=this["webpackJsonpprobook-client"]||[]).push([[0],{428:function(e,t,a){},546:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){},557:function(e,t,a){},558:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},789:function(e,t,a){},790:function(e,t,a){},792:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),r=a(39),o=a.n(r),l=a(27),i=a.n(l),n=a(494),d=a(960),j=(a(546),a(496)),b=a(429),u=a(431),m=a(980);const h="https://api.i18nexus.com/project_resources/translations/{{lng}}/{{ns}}.json?api_key=".concat("JfMdrKKmBHuC9YGlc3kDSw");j.a.use(b.a).use(u.a).use(m.a).init({fallbackLng:"en",ns:["default"],defaultNS:"default",supportedLngs:["en","hi","mr"],backend:{loadPath:h}});var p=a(8),O=a(912),x=a(89),g=a(45),f=a(983),y=a(24);function v(e){return new Promise((t=>setTimeout(t,e)))}const w=Object(y.b)("customer/getCustomers",(async()=>{const{data:e}=await i.a.get("/customers");return e})),C=Object(y.b)("customer/getCustomersProfileCompleteness",(async()=>{await v(200);const{data:e}=await i.a.get("/profile");return e})),S=Object(y.b)("customer/getCustomerDetails",(async e=>{const{data:t}=await i.a.get("/customers/"+e);return t})),k=Object(y.b)("customer/getCustomerServicesHistory",(async e=>{const{data:t}=await i.a.get("/api/service-customer-mappings/"+e);return console.log(t),t})),F=Object(y.b)("customer/getCustomerRemarks",(async e=>{const{data:t}=await i.a.get("/customers/remarks/"+e);return console.log("Remarks in thunk",t),t})),D=Object(y.c)({name:"customer",initialState:{status:"idle",customers:[],customerDetails:{},customerProfileCompletion:null,customerServiceHistory:[],fetchedPofileCompleteness:!1,customerServiceHistoryStatus:"idle",customerDetailsStatus:"idle",customerRemarks:[],remarksStatus:"idle"},reducers:{setCurrentCustomer:(e,t)=>{e.customerDetails=t.payload},setCurrentCustomerProfileCompletion:(e,t)=>{e.customerProfileCompletion=t.payload},clearCurrentCustomer:(e,t)=>{e.customerDetailsStatus="idle"}},extraReducers:{[w.pending]:e=>{e.status="loading"},[w.fulfilled]:(e,t)=>{e.status="success";const a={},s={};e.customers.map((e=>a[e.id]=e)),t.payload.customer_details.map((e=>s[e.id]=e)),e.customers=Object.values(Object.assign(a,s))},[w.rejected]:e=>{e.status="failed"},[S.pending]:e=>{e.customerDetailsStatus="loading"},[S.fulfilled]:(e,t)=>{e.customerDetailsStatus="success",e.customerDetails=t.payload},[S.rejected]:e=>{e.customerDetailsStatus="failed"},[C.pending]:e=>{e.status="loading"},[C.fulfilled]:(e,t)=>{e.status="success";const a=e.customers.map((e=>{const a=t.payload.profileCompletion?t.payload.profileCompletion[e.id]:0;return{...e,profile_completion:a}}));e.customers=a,e.fetchedPofileCompleteness=!0},[C.rejected]:e=>{e.status="failed"},[k.pending]:e=>{e.customerServiceHistoryStatus="loading"},[k.fulfilled]:(e,t)=>{e.customerServiceHistoryStatus="success",e.customerServiceHistory=t.payload.data},[k.rejected]:e=>{e.customerServiceHistoryStatus="failed"},[F.pending]:e=>{e.remarksStatus="loading"},[F.fulfilled]:(e,t)=>{e.remarksStatus="success",e.customerRemarks=t.payload},[F.rejected]:e=>{e.remarksStatus="failed"}}});var A=D.reducer;const{setCurrentCustomer:P,clearCurrentCustomer:I,setCurrentCustomerProfileCompletion:N}=D.actions;var E=a(210);const M={customers:[],total:0,loading:!1,error:null,pagination:{from:0,size:10},searchQuery:"",columnSearchQuery:{}};console.log("Initializing elasticCustomersSlice with initialState:",M);const z=Object(y.b)("elasticCustomers/fetchPaginatedResults",(async(e,t)=>{let{from:a=0,size:s=10}=e,{rejectWithValue:c}=t;console.log("Fetching paginated results: from=".concat(a,", size=").concat(s));try{const e=await i.a.get("/customers/elastic/fetch-paginated-results",{params:{from:a,size:s}});return console.log("Fetched paginated results successfully",e.data),e.data}catch(r){return console.error("Error fetching paginated results:",r.message),c(r.response.data)}})),T=Object(y.b)("elasticCustomers/performGlobalSearch",(async(e,t)=>{let{searchTerm:a,from:s,size:c}=e,{rejectWithValue:r}=t;console.log("Performing global search: searchTerm=".concat(a,", from=").concat(s,", size=").concat(c));try{const e=await i.a.get("/customers/elastic/global-search",{params:{searchTerm:a,from:s,size:c}});return console.log("Global search results:",e.data),e.data}catch(o){return console.error("Error in global search:",o.message),r(o.response.data)}})),R=Object(y.b)("elasticCustomers/performCompoundSearch",(async(e,t)=>{let{searchTerms:a,from:s,size:c}=e,{rejectWithValue:r}=t;console.log("Performing compound search: searchTerms=".concat(JSON.stringify(a),", from=").concat(s,", size=").concat(c));try{const e=await i.a.get("/customers/elastic/compound-search",{params:{...a,from:s,size:c}});return console.log("Compound search results:",e.data),e.data}catch(o){return console.error("Error in compound search:",o.message),r(o.response.data)}})),_=Object(y.c)({name:"elasticCustomers",initialState:M,reducers:{resetSearch:e=>{console.log("Resetting search queries"),e.searchQuery="",e.columnSearchQuery={}},loadingStateElasticCustomers:e=>{console.log("load state for elastic customer true"),e.loading=!0}},extraReducers:e=>{e.addCase(z.pending,(e=>{console.log("Fetching paginated results pending"),e.loading=!0})).addCase(z.fulfilled,((e,t)=>{console.log("Fetching paginated results fulfilled"),e.customers=t.payload.hits,e.total=t.payload.total,e.loading=!1,e.error=null})).addCase(z.rejected,((e,t)=>{console.log("Fetching paginated results rejected",t.payload),e.error=t.payload,e.loading=!1})).addCase(T.pending,(e=>{e.loading=!0})).addCase(T.fulfilled,((e,t)=>{console.log("Global search fulfilled"),e.customers=t.payload.hits,e.total=t.payload.total,e.loading=!1,e.error=null})).addCase(T.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(R.pending,(e=>{e.loading=!0})).addCase(R.fulfilled,((e,t)=>{console.log("Compound search fulfilled"),e.customers=t.payload.hits,e.total=t.payload.total,e.loading=!1,e.error=null})).addCase(R.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{resetSearch:L,loadingStateElasticCustomers:B}=_.actions;var K=_.reducer;const U=e=>(console.log("Selecting customers"),e.elasticCustomers.customers),H=e=>(console.log("Selecting total hits"),e.elasticCustomers.total),W=e=>(console.log("Checking if loading"),e.elasticCustomers.loading);Object(E.a)([U,(e,t)=>t],((e,t)=>(console.log("Filtering customers with filter: ".concat(t)),e.filter((e=>e.name.includes(t))))));var q=a(17),Y=a(963),G=a(55),V=a(127),J=a(132),Z=a(130),Q=a(882),X=a(981),$=a(982),ee=a(239),te=a(973),ae=a(1);var se=e=>{let{columns:t,data:a,onRowClick:s,topProps:c,...r}=e;const o=Object(x.e)(),l=Object(n.a)({shadows:Array(25).fill("none").map(((e,t)=>2===t?"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)":"none")),spacing:e=>"".concat(.25*e,"rem"),palette:{background:{default:"#00000000"},text:{primary:"light"==o.colorScheme?"#0E0E0F":"#A6A7AB"}}}),i=Object(Z.c)({useKeysAsHeaders:!0,filename:"exported_customers"});return console.log("topProps",c),Object(ae.jsx)(d.a,{theme:l,children:Object(ae.jsx)(J.e,{columns:t,data:a,defaultColumn:{maxSize:300},enableColumnActions:!1,enableDensityToggle:!1,state:{density:"compact"},initialState:{density:"compact"},muiTableProps:{sx:{tableLayout:"fixed"}},muiTablePaperProps:{sx:{borderRadius:"20px",backgroundColor:"dark"===o.colorScheme?"#25262B":"white",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}},muiTableBodyRowProps:e=>{let{row:t}=e;return{onClick:()=>s(t.original),sx:{cursor:"pointer",transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{transform:"scale(0.99)",backgroundColor:"#F3F6FF90"}}}},muiTableBodyCellProps:{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},muiTableHeadRowProps:{sx:{backgroundColor:"#F3F6FF"}},muiTablePaginationProps:{sx:{color:"#0d5ff9"}},renderTopToolbarCustomActions:e=>{let{table:t}=e;return Object(ae.jsx)(q.a,{w:"100%",pt:10,children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsxs)($.a,{children:[Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",onClick:()=>(e=>{const t=Object(Z.b)(i)(e.map((e=>e.original)));Object(Z.a)(i)(t)})(t.getRowModel().rows),children:Object(ae.jsx)(Q.a,{})}),Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Export"})]}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(te.a,{children:c?c():null})})]})})},renderToolbarInternalActions:e=>{let{table:t}=e;return Object(ae.jsxs)(q.a,{w:160,children:[Object(ae.jsx)(J.d,{style:{color:"#0d5ff9"},table:t}),Object(ae.jsx)(J.c,{style:{color:"#0d5ff9"},table:t}),Object(ae.jsx)(J.b,{style:{color:"#0d5ff9"},table:t}),Object(ae.jsx)(J.a,{style:{color:"#0d5ff9"},table:t})]})},...r})})};var ce=()=>{const e=Object(x.e)(),t=Object(p.b)(),a=Object(g.h)(),c=Object(p.c)(U),r=Object(p.c)(W),o=Object(p.c)(H),[l,i]=Object(s.useState)(""),[j,b]=Object(s.useState)({pageIndex:0,pageSize:10});Object(s.useEffect)((()=>{(async()=>{const{pageIndex:e,pageSize:a}=j,s=e*a;t(l?T({searchTerm:l,from:s,size:a}):z({from:s,size:a}))})()}),[t,j,l]),Object(s.useEffect)((()=>()=>{t(L())}),[t]);const u=Object(s.useMemo)((()=>[{accessorKey:"name",header:"Name"},{accessorFn:e=>"CLID".concat(e.customerId.slice(0,6),"..."),id:"customerId",header:"Customer ID"},{accessorKey:"email",header:"Email",minSize:300},{accessorKey:"source",header:"Source"},{accessorKey:"mobile",header:"Mobile"},{accessorKey:"profile_percentage",header:"Profile Completion (%)"}]),[]),m=Object(s.useCallback)((async e=>{await t(S(e.original.customerId)).unwrap(),t(N(e.original.profile_percentage)),a("/dashboard")}),[t,a]),h=Object(n.a)({palette:{mode:"dark"===e.colorScheme?"dark":"light"}}),O=Object(s.useCallback)((e=>{const t=Object(Z.b)(Object(Z.c)({filename:"exported_customers",useKeysAsHeaders:!0}))(e.map((e=>e.original)));Object(Z.a)(t)}),[]);return Object(ae.jsx)(d.a,{theme:h,children:Object(ae.jsx)(J.e,{columns:u,data:c,loading:r,enablePagination:!0,manualPagination:!0,rowCount:o,state:{pagination:{pageIndex:j.pageIndex,pageSize:j.pageSize,pageCount:Math.ceil(o/j.pageSize)},globalFilter:l},onGlobalFilterChange:i,onPaginationChange:b,muiTableProps:{sx:{tableLayout:"fixed"}},muiTablePaperProps:{sx:{borderRadius:"20px",backgroundColor:"dark"===e.colorScheme?"#25262B":"white",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}},muiTableBodyRowProps:e=>{let{row:t}=e;return{onClick:()=>m(t),sx:{cursor:"pointer",transition:"transform 0.3s ease, background-color 0.3s ease","&:hover":{transform:"scale(0.99)",backgroundColor:"#F3F6FF90"}}}},muiTableBodyCellProps:{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},muiTableHeadRowProps:{sx:{backgroundColor:"#F3F6FF"}},muiTablePaginationProps:{sx:{color:"#0d5ff9"}},renderTopToolbarCustomActions:e=>{let{table:t}=e;return Object(ae.jsx)(q.a,{w:"100%",pt:10,children:Object(ae.jsx)(X.a,{justify:"space-between",children:Object(ae.jsxs)($.a,{children:[Object(ae.jsx)(ee.a,{color:"#0d5ff9",size:"sm",onClick:()=>O(t.getRowModel().rows),children:Object(ae.jsx)(Q.a,{})}),Object(ae.jsx)(G.a,{fontWeight:"bold",color:"#0d5ff9",size:"sm",children:"Export"})]})})})}})})};var re=()=>{const e=Object(p.b)();return Object(s.useEffect)((()=>{e(I())}),[]),Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)("div",{style:{display:"flex"},children:Object(ae.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(ae.jsxs)("div",{style:{padding:"10px"},children:[Object(ae.jsx)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"5px"},children:Object(ae.jsx)("span",{children:Object(ae.jsx)(f.a,{pl:5,children:"Customers"})})}),Object(ae.jsx)(ce,{})]})})})})},oe=a(984),le=a(240),ie=a(885),ne=a(974),de=a(964),je=a(968),be=a(38);function ue(){return Object(ae.jsxs)(oe.a,{size:420,my:40,children:[Object(ae.jsx)(f.a,{align:"center",sx:e=>({fontFamily:"Greycliff CF, ".concat(e.fontFamily),fontWeight:900}),children:"Customer Profiling"}),Object(ae.jsx)(G.a,{color:"dimmed",size:"sm",align:"center",mt:5,component:be.b,to:"/",children:Object(ae.jsxs)($.a,{children:["Already have an account?",Object(ae.jsx)(G.a,{c:"blue",children:"Login"})]})}),Object(ae.jsxs)(le.a,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[Object(ae.jsx)(ie.a,{label:"Email",placeholder:"you@ea.in",required:!0}),Object(ae.jsx)(ne.a,{label:"Password",placeholder:"Your password",required:!0,mt:"md"}),Object(ae.jsx)(te.a,{position:"apart",mt:"lg",children:Object(ae.jsx)(de.a,{label:"Remember me",sx:{lineHeight:1}})}),Object(ae.jsx)(be.b,{to:"/dashboard",children:Object(ae.jsx)(je.a,{fullWidth:!0,mt:"xl",children:"Register"})})]})]})}var me=a(990),he=a(988),pe=a(966),Oe=a(986),xe=a(888),ge=a(889),fe=a(890),ye=a(891),ve=a(892),we=a(893),Ce=a(894),Se=a(895),ke=a(896),Fe=a(897),De=a(898),Ae=a(899),Pe=a(900),Ie=a(902),Ne=a(807),Ee=a(887),Me=a(969),ze=a(985),Te=a(970);const Re=Object(Ne.a)((e=>({link:{...e.fn.focusStyles(),display:"flex",alignItems:"center",textDecoration:"none",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:e.colors.gray[7],borderRadius:e.radius.md,marginTop:5,fontWeight:500,"&":{color:"dark"===e.colorScheme?e.colors.dark[6]:"#0D5FF9",boxShadow:"\n rgba(13, 95, 249, 1) 0px 1px 1px,\n rgba(13, 95, 249, 0.5) 0px 2px 2px,\n rgba(13, 95, 249, 0.5) 0px 2px 5px,\n rgba(13, 95, 249, 0.5) 0px 2px 5px,\n rgba(13, 95, 249, 0.5) 0px 3px 5px\n      ",background:"rgba(, 1)",borderRadius:"16px",backdropFilter:"blur(5.1px)",border:"1px solid rgba(, 0.42)",webkitBackdropFilter:"blur(5.1px)"},"&:focus":{outline:"none"},"&:hover":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff990",color:"dark"===e.colorScheme?e.white:"#FFFFFF",["& .".concat(Object(Ee.a)("icon"))]:{color:"dark"===e.colorScheme?e.white:e.black},transition:"transform 0.3s ease","&:hover":{transform:"translateX(5px)"}}},linkIcon:{ref:Object(Ee.a)("icon"),color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6],marginRight:e.spacing.sm},linkActive:{"&, &:hover":{backgroundColor:"dark"===e.colorScheme?"#252D3B":"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF",["& .".concat(Object(Ee.a)("icon"))]:{color:e.fn.variant({variant:"light",color:e.primaryColor}).color}}},stickyNavbar:{position:"sticky",height:"100%",top:0}}))),_e=[{link:"personalInformation",label:"Personal Information",icon:Object(ae.jsx)(xe.a,{})},{link:"keywords",label:"Keywords",icon:Object(ae.jsx)(ge.a,{})},{link:"profiling",label:"Profiling",icon:Object(ae.jsx)(fe.a,{})},{link:"interests",label:"Interests",icon:Object(ae.jsx)(ye.a,{})},{link:"remarks",label:"Remarks",icon:Object(ae.jsx)(ve.a,{})},{link:"occupation",label:"Occupation",icon:Object(ae.jsx)(we.a,{})},{link:"activity",label:"Activity",icon:Object(ae.jsx)(Ce.a,{})},{link:"familydetails",label:"Family Details",icon:Object(ae.jsx)(Se.a,{})},{link:"fi",label:"Financial Information",icon:Object(ae.jsx)(ke.a,{})},{link:"id",label:"Insurance Details  ",icon:Object(ae.jsx)(Fe.a,{})},{link:"vd",label:"Vehicle",icon:Object(ae.jsx)(De.a,{})},{link:"Health",label:"Health",icon:Object(ae.jsx)(Ae.a,{})},{link:"Social Media",label:"Social Media",icon:Object(ae.jsx)(Pe.a,{})}];var Le=()=>{const{classes:e,cx:t}=Re(),[a,c]=Object(s.useState)("Personal Information"),{myRole:r}=(Object(x.e)(),Object(g.g)(),Object(p.c)((e=>e.auth))),o=_e.filter(((e,t)=>"qc"!==r||t<2)).map((s=>Object(ae.jsx)(Me.a,{className:t(e.link,{[e.linkActive]:s.label===a}),icon:s.icon,component:be.b,variant:"subtle",to:s.link,label:s.label,onClick:e=>{c(s.label)}},s.label)));return Object(ae.jsx)(q.a,{height:700,p:"md",width:{sm:200,lg:300},withBorder:!1,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(q.a,{sx:{borderRadius:10,padding:2},children:Object(ae.jsx)(Te.a.Section,{grow:!0,children:o})}),Object(ae.jsx)(Te.a.Section,{children:Object(ae.jsx)(Me.a,{icon:Object(ae.jsx)(Ie.a,{}),component:be.b,variant:"subtle",to:"/customers",c:"#0d5ff9",sx:{cursor:"pointer",borderRadius:10},label:"Go Back",rightSection:!0})})]})})},Be=a(48),Ke=a(961),Ue=a(987);const He=Object(Be.b)(60),We=Object(Ne.a)((e=>({card:{position:"relative",overflow:"visible",padding:e.spacing.xl,paddingTop:"calc(".concat(e.spacing.xl," * 1.5 + ").concat(He," / 3)")},icon:{position:"absolute",top:"calc(-".concat(He," / 3)"),left:"calc(50% - ".concat(He," / 2)")},title:{fontFamily:"Greycliff CF, ".concat(e.fontFamily),lineHeight:1}})));function qe(e){let{title:t,url:a,percentage:s,frequency:c,lastUpdated:r}=e;const{classes:o}=We();return Object(ae.jsxs)(le.a,{radius:"md",withBorder:!0,className:o.card,mt:"calc(".concat(He," / 3)"),children:[Object(ae.jsx)(Ke.a,{className:o.icon,size:He,radius:He,src:a}),Object(ae.jsx)(G.a,{ta:"center",fw:700,className:o.title,children:t}),Object(ae.jsx)(G.a,{c:"dimmed",ta:"center",fz:"sm",children:(l=s,l>=0&&l<=10?"Clueless Newbie":l>10&&l<=25?"Bumbling Beginner":l>25&&l<=40?"Somewhat Savvy":l>40&&l<=60?"Eager Explorer":l>60&&l<=75?"Amusingly Advanced":l>75&&l<=90?"Whimsical Wizard":"Expert Extraordinaire")}),Object(ae.jsxs)(te.a,{position:"apart",mt:"xs",children:[Object(ae.jsx)(G.a,{fz:"sm",color:"dimmed",children:"Percentage Completed"}),Object(ae.jsx)(G.a,{fz:"sm",color:"dimmed",children:Object(ae.jsxs)(Oe.a,{size:"lg",children:[s,"%"]})})]}),Object(ae.jsx)(Ue.a,{value:s,mt:5})]});var l}const Ye=Object(y.b)("profiling/fetchData",(async e=>{try{return(await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/customer-mapping/").concat(e))).data}catch(t){throw t.response.data}})),Ge=Object(y.b)("profiling/fetchProfileTypes",(async()=>{try{return(await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-types"))).data}catch(e){throw e.response.data}})),Ve=Object(y.b)("profiling/fetchProfileMappings",(async e=>{try{return(await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/profile-customer-mappings-by-profile/").concat(e))).data}catch(t){throw t.response.data}}));var Je=Object(y.c)({name:"profiling",initialState:{data:[],profileTypes:[],profileMappings:[],status:"idle",profileTypesStatus:"idle",profileMappingsStatus:"idle",error:null},reducers:{},extraReducers(e){e.addCase(Ye.pending,(e=>{e.status="loading",e.error=null})).addCase(Ye.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload})).addCase(Ye.rejected,((e,t)=>{e.status="failed",e.error=t.error.message||"Failed to fetch profile types for the customer"})).addCase(Ge.pending,(e=>{e.profileTypesStatus="loading",e.error=null})).addCase(Ge.fulfilled,((e,t)=>{e.profileTypesStatus="succeeded",e.profileTypes=t.payload})).addCase(Ge.rejected,((e,t)=>{e.profileTypesStatus="failed",e.error=t.error.message||"Failed to fetch profile types"})).addCase(Ve.pending,(e=>{e.profileMappingsStatus="loading",e.error=null})).addCase(Ve.fulfilled,((e,t)=>{e.profileMappingsStatus="succeeded",e.profileMappings=[],e.profileMappings=t.payload})).addCase(Ve.rejected,((e,t)=>{e.profileMappingsStatus="failed",e.error=t.error.message||"Failed to fetch profile mappings"}))}}).reducer;var Ze=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.profileTypesCustomerMapping.data)),{customerDetails:a}=Object(p.c)((e=>e.customer));console.log("Profiling data",t),Object(s.useEffect)((()=>{e(Ye(a.id))}),[e,a]);const c=t.map((e=>Object(ae.jsx)(he.a.Col,{span:4,children:Object(ae.jsx)(qe,{title:e.profileType.name,url:e.profileType.srcUrl,percentage:Math.round(e.profileCompletion)})},e.profileType.id)));return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(he.a,{gutter:"xl",children:c})})};var Qe=e=>{let{title:t,subject:a}=e;return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(G.a,{fz:"sm",c:"dimmed",children:t}),Object(ae.jsx)(G.a,{children:a})]})},Xe=a(184);var $e=e=>{let{selectedCustomer:t}=e;const[a,c]=Object(s.useState)({...t.profiling.personal_details}),{customerDetails:r}=Object(p.c)((e=>e.customer));console.log("state",r);const{profile_completion:o}=t,{source:l}=t,i=Object(s.useMemo)((()=>t),[t.id,t.profiling.personal_details]),n=Object(s.useMemo)((()=>({randomLocation:Xe.a.location.city(),randomState:Xe.a.location.state(),randomAddress:Xe.a.location.streetAddress(),randomPincode:Xe.a.location.zipCode()})),[i]);return a?Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(oe.a,{children:[Object(ae.jsxs)("div",{children:[Object(ae.jsx)(G.a,{fw:500,children:"Address & Other Info"}),Object(ae.jsxs)(he.a,{gutter:"xl",children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Location(city)",subject:n.randomLocation})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"State",subject:n.randomState})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"PINCODE",subject:n.randomPincode})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Country",subject:"India"})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Address Line",subject:n.randomAddress})})]})]}),Object(ae.jsx)("div",{children:Object(ae.jsxs)(he.a,{gutter:"xl",children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Marital status",subject:a.marital_status})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Travel Address",subject:a.travel_address})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Anniversary",subject:a.anniversary})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(Qe,{title:"Employment",subject:a.employment})})]})})]})}):Object(ae.jsx)(ae.Fragment,{children:"Fetching profile ..."})},et=a(965),tt=a(956);const at=Object(y.b)("keywords/getKeywords",(async()=>{const{data:e}=await i.a.get("/keywords");return e})),st=Object(y.b)("keywords/getCustomerKeywords",(async e=>{const{data:t}=await i.a.get("/keywords/customer/"+e);return t})),ct=Object(y.b)("keywords/searchKeywords",(async e=>{const{data:t}=await i.a.get("/keywords/search/"+e);return t})),rt=Object(y.b)("keywords/searchKeywords",(async e=>{const{data:t}=await i.a.post("/keywords/update/many",e);return t}));var ot=Object(y.c)({name:"keyword",initialState:{KeywordsStatus:"idle",customerKeywordsStatus:"idle",updateKeywordsStatus:"idle",keywords:[],customerKeywords:[]},reducers:{updateKeywords:(e,t)=>{console.log(t.payload),e.customerDetails=t.payload}},extraReducers:{[at.pending]:(e,t)=>{e.keywordsStatus="loading"},[at.fulfilled]:(e,t)=>{e.keywordsStatus="success";const a={},s={};e.keywords.map((e=>a[e.id]=e)),t.payload.data.map((e=>s[e.id]=e)),e.keywords=Object.values(Object.assign(a,s))},[at.rejected]:(e,t)=>{e.keywordsStatus="failed"},[st.pending]:(e,t)=>{e.customerKeywordsStatus="loading"},[st.fulfilled]:(e,t)=>{e.customerKeywordsStatus="success",e.customerKeywords=t.payload.data},[st.rejected]:(e,t)=>{e.customerKeywordsStatus="failed"},[ct.pending]:(e,t)=>{e.keywordsStatus="loading"},[ct.fulfilled]:(e,t)=>{},[ct.rejected]:(e,t)=>{e.keywordsStatus="failed"},[rt.pending]:(e,t)=>{e.updateKeywordsStatus="loading"},[rt.fulfilled]:(e,t)=>{e.updateKeywordsStatus="success",e.customerKeywords=t.payload.data},[rt.rejected]:(e,t)=>{e.updateKeywordsStatus="failed"}}}).reducer,lt=a(74),it=a.n(lt);function nt(e,t){return e.some((e=>e.name===t))}var dt=e=>{let{updateKeywordValuesParent:t,handleSubmitKeywords:a}=e;const[c,r]=Object(s.useState)([]),{status:o,customerDetails:l}=Object(p.c)((e=>e.customer)),{userPermissions:i,rolesPermissionsStatus:n}=Object(p.c)((e=>e.rolePermission)),d=Object(p.b)(),{customerKeywords:j,keywords:b,keywordsStatus:u,customerKeywordsStatus:m}=Object(p.c)((e=>e.keyword)),[h,O]=Object(s.useState)(),[x,g]=Object(s.useState)(""),[f,y]=Object(s.useState)([]),[v,w]=Object(s.useState)(!1),C=Object(s.useMemo)((()=>it.a.map(j,(e=>{let{id:t,value:a,category:s}=e;return{value:t,label:"".concat(a," [").concat(s,"]")}}))),[j]),S=Object(s.useMemo)((()=>it.a.map(b,(e=>{let{id:t,value:a,category:s}=e;return{value:t,label:"".concat(a," [").concat(s,"]")}}))),[b]),k=it.a.map(it.a.filter(b,{category:"unknown"}),"value");Object(s.useEffect)((()=>{"success"==u&&"success"==m&&(r(S),O(C.map((e=>e.value))),y(k))}),[j,b]),Object(s.useEffect)((()=>{t(h)}),[c,h]),Object(s.useEffect)((()=>{d(st(l.id)),d(at())}),[]),Object(s.useEffect)((()=>{const e=!it.a.isEqual(h,C.map((e=>e.value)));w(e)}),[h,C]);const F=Object(s.useMemo)((()=>it.a.debounce((e=>{g(e)}),200)),[]);return Object(ae.jsxs)(ae.Fragment,{children:[console.log(i,nt(i,"keywords_edit")),"success"==u&&"success"==m&&i&&Array.isArray(i)?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(et.a,{data:c,value:h,onChange:e=>O(e),label:"Keywords",searchable:!0,searchValue:x,onSearchChange:e=>F(e),clearable:!0,withinPortal:!0,placeholder:"Add keywords",creatable:!0,getCreateLabel:e=>"+ Create ".concat(e),onCreate:e=>{const t={value:e,label:e};return r((e=>[...e,t])),t},readOnly:!nt(i,"keywords_edit")}),Object(ae.jsx)("div",{style:{alignSelf:"center",padding:"10px"},children:v&&nt(i,"keywords_edit")&&Object(ae.jsx)(je.a,{variant:"light",onClick:()=>a(),children:"Update keywords"})})]}):Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)("p",{children:"Please wait......."})})]})},jt=a(991);var bt=()=>{const e=Object(p.b)(),{status:t,customerDetails:a}=Object(p.c)((e=>e.customer)),{customerKeywords:r,customerKeywordsStatus:o}=Object(p.c)((e=>e.keyword)),[l,i]=Object(s.useState)([]),n=Object(s.useMemo)((()=>{const e=it.a.groupBy(r,"category");return it.a.map(e,((e,t)=>({category:t,values:it.a.uniq(it.a.map(e,"value"))})))}),[r]);return Object(s.useEffect)((()=>{t&&e(st(a.id))}),[]),Object(s.useEffect)((()=>{"success"==o&&i(n)}),[r]),Object(ae.jsx)(ae.Fragment,{children:"success"==o?Object(ae.jsx)(ae.Fragment,{children:l.map((e=>Object(ae.jsxs)(c.a.Fragment,{children:[Object(ae.jsx)(G.a,{fw:700,children:e.category}),e.values.map((e=>Object(ae.jsx)(Oe.a,{variant:"gradient",gradient:{from:"indigo",to:"cyan"},children:e},e)))]},e.category)))}):Object(ae.jsx)(ae.Fragment,{children:"Loading interests..."})})},ut=a(495),mt=a(989),ht=a(905),pt=a(906),Ot=a(907),xt=a(908),gt=a(909);const ft=Object(Ne.a)((e=>({rowSelected:{backgroundColor:"dark"===e.colorScheme?e.fn.rgba(e.colors[e.primaryColor][7],.2):e.colors[e.primaryColor][0]}})));function yt(e){let{title:t,initialData:a,headerData:c,createEmptyRow:r,customInputs:o}=e;const{classes:l,cx:i}=ft(),[n,d]=Object(s.useState)([]),[j,b]=Object(s.useState)(a),[u,m]=Object(s.useState)(null),[h,p]=Object(s.useState)(null),[O,x]=Object(s.useState)(null),g=c.map(((e,t)=>Object(ae.jsx)("th",{children:e},t))),f=(e,t,a)=>{x((s=>s&&s.id===e?{...s,[t]:a}:s))},y=(e,t)=>{h&&p({...h,[e]:t})},v=h?Object(ae.jsxs)("tr",{children:[Object.keys(h).filter((e=>"id"!==e)).map((e=>Object(ae.jsx)("td",{children:o&&o[e]?o[e](h&&h[e]||"",(t=>y(e,t))):Object(ae.jsx)(ie.a,{value:h&&h[e]||"",onChange:t=>y(e,t.currentTarget.value)})},e))),Object(ae.jsx)("td",{children:Object(ae.jsx)(je.a,{onClick:()=>{h&&(b((e=>[...e,{...r(),...h,id:(j.length+1).toString()}])),p(null))},bg:"#4E70EA",children:"Save"})})]}):null,w=j.map((e=>{const t=n.includes(e.id);return Object(ae.jsxs)("tr",{className:i({[l.rowSelected]:t}),children:[Object(ae.jsx)("td",{children:Object(ae.jsx)(de.a,{checked:n.includes(e.id),onChange:()=>{return t=e.id,d((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},transitionDuration:0})}),Object.keys(e).filter((e=>"id"!=e)).map((t=>u===e.id&&o&&o[t]?Object(ae.jsx)("td",{children:o[t](O&&O[t]||"",(a=>f(e.id,t,a)))},t):u===e.id?Object(ae.jsx)("td",{children:Object(ae.jsx)(ie.a,{value:O&&O[t]||"",onChange:a=>f(e.id,t,a.currentTarget.value)})},t):Object(ae.jsx)("td",{children:e[t]},t))),Object(ae.jsx)("td",{children:u===e.id?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(ee.a,{onClick:()=>{return t=e.id,b((e=>e.map((e=>e.id===t?{...e,...O}:e)))),m(null),void x(null);var t},color:"green",variant:"subtle",size:"sm",children:Object(ae.jsx)(ht.a,{})}),Object(ae.jsx)(ee.a,{onClick:()=>(e.id,m(null),void x(null)),color:"red",variant:"subtle",size:"sm",children:Object(ae.jsx)(pt.a,{})})]}):Object(ae.jsx)(ee.a,{onClick:()=>{return t=e.id,x(j.find((e=>e.id===t))||null),void m((e=>e===t?null:t));var t},color:"#4E70EA",variant:"subtle",size:"sm",children:Object(ae.jsx)(Ot.a,{color:"#4E70EA"})})})]},e.id)}));return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(te.a,{position:"apart",children:[Object(ae.jsx)(q.a,{mb:5,children:Object(ae.jsx)(G.a,{fw:700,children:t||""})}),Object(ae.jsx)(q.a,{mb:5,children:Object(ae.jsxs)(te.a,{children:[Object(ae.jsxs)(te.a,{onClick:()=>{b((e=>e.filter((e=>!n.includes(e.id))))),d([])},style:{cursor:"pointer"},children:[Object(ae.jsx)(ee.a,{color:"red",variant:"subtle",size:"sm",children:Object(ae.jsx)(xt.a,{})}),Object(ae.jsx)(G.a,{ml:-18,color:"red",size:"sm",children:"Delete"})]}),Object(ae.jsxs)(te.a,{onClick:()=>{p(h?null:r())},style:{cursor:"pointer"},children:[Object(ae.jsx)(ee.a,{color:"blue",variant:"subtle",size:"sm",children:Object(ae.jsx)(gt.a,{color:"#4E70EA"})}),Object(ae.jsx)(G.a,{ml:-18,color:"#4E70EA",size:"sm",children:"Add More"})]})]})})]}),Object(ae.jsx)(ut.a,{style:{maxHeight:"100%",fontSize:"10px"},children:Object(ae.jsxs)(mt.a,{children:[Object(ae.jsx)("thead",{children:Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("th",{children:Object(ae.jsx)(de.a,{checked:n.length===j.length&&j.length>0,onChange:()=>d((e=>e.length===j.length?[]:j.map((e=>e.id)))),transitionDuration:0})}),g,Object(ae.jsx)("th",{})]})}),Object(ae.jsxs)("tbody",{children:[w,v]})]})})]})}const vt=[{id:"1",type:"Property Dealer",industry:"Business",to:"2005",from:"2009",incomeBracket:"\u20b97,00,000 - \u20b915,00,000"},{id:"2",type:"Stock Exchange",industry:"Finance",to:"2008",from:"Present",incomeBracket:"\u20b915,00,000 - \u20b930,00,000"}],wt=["Type","Industry","To","From","Income Bracket"],Ct=()=>({id:"",type:"",industry:"",to:"",from:"",incomeBracket:""});function St(){return Object(ae.jsx)(yt,{title:"Occupation",initialData:vt,headerData:wt,createEmptyRow:Ct})}const kt=[{id:"1",name:"Sushma Sharma",gender:"Female",relationship:"Spouse",phone:"+91 834273824",email:"sushmasharma123@email.com"},{id:"2",name:"Anand Sharma",gender:"Male",relationship:"Son",phone:"+91 873624782",email:"anandsharma123@email.com"},{id:"3",name:"Sarthak Sharma",gender:"Male",relationship:"Son",phone:"-",email:"-"}],Ft=["Name","Gender","Relationship","Phone No.","Email Address","",""],Dt=()=>({id:"",name:"",gender:"",relationship:"",phone:"",email:""});function At(){return Object(ae.jsx)(yt,{title:"Family Details",initialData:kt,headerData:Ft,createEmptyRow:Dt,rowData:{id:"",name:"",gender:"",relationship:"",phone:"",email:""}})}function Pt(){const{customerDetails:e,customerServiceHistory:t}=Object(p.c)((e=>e.customer)),a=Object(p.b)();Object(s.useEffect)((()=>{a(k(e.id))}),[e]);const c=t.map((e=>({ticket_id:e.ticket_id,order_id:e.order_id,source_of_booking:e.source_of_booking,ticket_type:e.ticket_type,ticket_date:e.ticket_date,action:e.action,tat:e.tat,name:e.service.name,subType:e.service.subType})));return Object(ae.jsx)(ae.Fragment,{children:Array.isArray(c)&&c.length>0?Object(ae.jsx)(yt,{title:"Activity",initialData:c,headerData:["Ticket ID","Order ID","Source of Booking","Ticket Type","Ticket Date","Action","TAT","Name","SubType"],createEmptyRow:()=>({ticket_id:"",order_id:"",source_of_booking:"",ticket_type:"",ticket_date:"",action:"",tat:"",name:"",subType:""})}):Object(ae.jsx)(V.a,{})})}var It=a(962);var Nt=()=>Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(It.a,{label:Object(ae.jsx)(G.a,{fw:700,children:"Remarks"}),radius:"md",variant:"filled"})}),Et=a(910);var Mt=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.customer.customerRemarks)),a=Object(p.c)((e=>e.customer.remarksStatus)),c=Object(p.c)((e=>e.customer.customerDetails.id)),[r,{open:o,close:l}]=Object(Et.a)(!1),[i,n]=Object(s.useState)(null);Object(s.useEffect)((()=>{c&&e(F(c))}),[e,c]);const d=Object(s.useMemo)((()=>[{accessorKey:"agentName",header:"Agent Name"},{accessorKey:"date",header:"Date"},{accessorKey:"time",header:"Time"},{accessorKey:"remark",header:"Remark"}]),[]);return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(q.a,{children:"success"===a?Object(ae.jsx)(se,{columns:d,data:t,onRowClick:e=>{n(e),o()}}):"loading"===a?Object(ae.jsx)("p",{children:"Loading..."}):Object(ae.jsx)("p",{children:"Failed to load remarks."})}),Object(ae.jsx)(tt.a,{opened:r,onClose:l,title:"Remark Details",centered:!0,children:i&&Object(ae.jsxs)("div",{children:[Object(ae.jsxs)("p",{children:[Object(ae.jsx)("strong",{children:"Agent Name:"})," ",i.agentName]}),Object(ae.jsxs)("p",{children:[Object(ae.jsx)("strong",{children:"Date:"})," ",i.date]}),Object(ae.jsxs)("p",{children:[Object(ae.jsx)("strong",{children:"Time:"})," ",i.time]}),Object(ae.jsxs)("p",{children:[Object(ae.jsx)("strong",{children:"Remark:"})," ",i.remark]})]})})]})};const zt=[],Tt=["Name","Acc. No","Variant","IFSC code","Branch"],Rt=()=>({id:"",name:"",acc_no:"",variant:"",ifsc:"",branch:""});function _t(){return Object(ae.jsx)(yt,{title:"Financial Information",initialData:zt,headerData:Tt,createEmptyRow:Rt,rowData:{id:"",name:"",acc_no:"",variant:"",ifsc:"",branch:""}})}const Lt=[],Bt=["Source","Product Type","Validity(in years)","Expiry date","Status"],Kt=()=>({id:"",source:"",validity:"",expiry:"",status:""});function Ut(){return Object(ae.jsx)(yt,{title:"Insurance Details",initialData:Lt,headerData:Bt,createEmptyRow:Kt,rowData:{id:"",source:"",validity:"",expiry:"",status:""}})}const Ht=[],Wt=["Name","VIN/Chassis no.","Product Type","Validity(in years)","Expiry date","Status"],qt=()=>({id:"",name:"",vin:"",product_type:"",validity:"",expiry:"",status:""});function Yt(){return Object(ae.jsx)(yt,{title:"Vehicle Details",initialData:Ht,headerData:Wt,createEmptyRow:qt,rowData:{id:"",name:"",vin:"",product_type:"",validity:"",expiry:"",status:""}})}var Gt=e=>{let{title:t,subject:a}=e;return Object(ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"-10px"},children:[Object(ae.jsx)(G.a,{fz:"sm",c:"dimmed",style:{alignSelf:"start"},children:t}),Object(ae.jsx)(G.a,{style:{alignSelf:"end"},children:a})]})};var Vt=()=>{var e;const t=Object(g.h)(),{status:a,customerDetails:c,customerProfileCompletion:r}=Object(p.c)((e=>e.customer)),[o,l]=Object(s.useState)({...null===(e=c.profiling)||void 0===e?void 0:e.personal_details}),{profile_completion:i}=c,{updateKeywordsStatus:n}=Object(p.c)((e=>e.keyword)),[d,j]=Object(s.useState)(!1),[b,u]=Object(s.useState)(""),[m,h]=Object(s.useState)([]),[O,f]=Object(s.useState)(!1),{isLoggedIn:y}=Object(p.c)((e=>e.auth)),[w,C]=Object(s.useState)(),[S,k]=Object(s.useState)(!0);const F=Object(g.g)(),D=Object(p.b)();Object(s.useEffect)((()=>{c&&0!==Object.keys(c).length||t("/customers")}),[c,t]);Object(x.e)();const[A,P]=Object(s.useState)(!1);Object(s.useEffect)((()=>{u((e=>[...e,F.pathname]))}),[F]);const I=()=>{const e={customerId:c.id,keywordsPayload:m};f(!0),v(5e3).then((e=>f(!1))),D(rt(e))},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(ae.jsx)("div",{children:Object(ae.jsx)(Y.a,{mt:0,size:100,thickness:8,sections:[{value:e,color:e>75?"#1D9B25":e>60?"#CFA400":"#D85972"}],label:Object(ae.jsxs)(G.a,{color:"",weight:20,align:"center",size:"xs",children:[e,"%"]})})})};return"loading"==a?Object(ae.jsx)(me.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}}):Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsx)(q.a,{children:Object(ae.jsx)(Le,{})})}),Object(ae.jsxs)(he.a.Col,{span:9,children:[Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(pe.a,{children:Object(ae.jsxs)(he.a,{children:[Object(ae.jsxs)(he.a.Col,{span:2,children:[Object(ae.jsx)(he.a.Col,{span:12,style:{textAlign:"center"},children:Object(ae.jsx)(Ke.a,{color:"blue",size:"lg",children:Object(ae.jsx)(xe.a,{size:"lg"})})}),c.isHNI&&Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(Oe.a,{color:"yellow",variant:"filled",size:"lg",children:"HNI"})})]}),Object(ae.jsxs)(he.a.Col,{span:6,children:[Object(ae.jsx)(G.a,{fw:500,children:"Basic Info"}),Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(Gt,{title:"Name",subject:o.full_name})}),Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(Gt,{title:"Mobile Number",subject:o.phone_number})}),Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(Gt,{title:"Email Address",subject:c.email})}),Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(Gt,{title:"Gender",subject:o.gender})})]}),Object(ae.jsx)(he.a.Col,{span:4,children:Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsxs)($.a,{children:[" ",N(r)]})})})]})})}),Object(ae.jsx)(he.a.Col,{span:12,children:Object(ae.jsx)(pe.a,{shadow:"lg",radius:"md",children:Object(ae.jsx)(g.d,{children:Object(ae.jsxs)(g.b,{children:[Object(ae.jsx)(g.b,{index:!0,element:Object(ae.jsx)($e,{selectedCustomer:c})}),Object(ae.jsx)(g.b,{path:"/personalInformation",element:Object(ae.jsx)($e,{selectedCustomer:c})}),Object(ae.jsx)(g.b,{path:"/profiling",element:Object(ae.jsx)(Ze,{})}),Object(ae.jsx)(g.b,{path:"/keywords",element:Object(ae.jsx)(dt,{submitKeywords:d,updateKeywordValuesParent:function(e){h(e)},handleSubmitKeywords:I})}),Object(ae.jsx)(g.b,{path:"/interests",element:Object(ae.jsx)(bt,{})}),Object(ae.jsx)(g.b,{path:"/remarks",element:Object(ae.jsx)(Mt,{})}),Object(ae.jsx)(g.b,{path:"/occupation",element:Object(ae.jsx)(St,{})}),Object(ae.jsx)(g.b,{path:"/familydetails",element:Object(ae.jsx)(At,{})}),Object(ae.jsx)(g.b,{path:"/activity",element:Object(ae.jsx)(Pt,{})}),Object(ae.jsx)(g.b,{path:"/fi",element:Object(ae.jsx)(_t,{})}),Object(ae.jsx)(g.b,{path:"/id",element:Object(ae.jsx)(Ut,{})}),Object(ae.jsx)(g.b,{path:"/vd",element:Object(ae.jsx)(Yt,{})})]})})})}),O&&Object(ae.jsx)(jt.a,{loading:!0,title:"Syncing keywords",withCloseButton:!0,style:{backgroundColor:"red !important"},children:Object(ae.jsx)("p",{style:{color:"red"},children:"Uploading latest keywords data onto server"})})]})]})})};function Jt(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(window.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}const Zt=Object(y.b)("auth/loginUser",(async e=>{const{data:t}=await i.a.post("/auth/signin",e);return t})),Qt=Object(y.b)("auth/registerUser",(async e=>{const{data:t}=await i.a.post("/auth/signup",e);return t})),Xt=Object(y.b)("auth/getProfile",(async e=>{const{data:t}=await i.a.get("/api/profile/"+e);return t})),$t=Object(y.b)("auth/getUsers",(async()=>{const{data:e}=await i.a.get("/users/all");return e})),ea=Object(y.b)("auth/addUser",(async e=>{try{const{data:t}=await i.a.post("/users/create",e);return t}catch(t){throw t}})),ta=Object(y.c)({name:"auth",initialState:{status:"idle",myRole:null,isLoggedIn:!1,user:{},profile:{},userStatus:"idle",users:[]},reducers:{setAuth:(e,t)=>{e.isLoggedIn=t.payload.isLoggedIn},logout:(e,t)=>{localStorage.clear(),e.isLoggedIn=!1,i.a.defaults.headers.common.authorization=null,window.location.reload()},setAuth:(e,t)=>{const a=JSON.parse(localStorage.getItem("login"));if(Object.keys(a).length>0){const{email:t,_id:s}=a;e.user.email=t,e.user._id=s,e.status="success",e.isLoggedIn=!0}else e.isLoggedIn=!1},setMyRole:(e,t)=>{e.myRole=t.payload}},extraReducers:{[Zt.pending]:(e,t)=>{e.status="loading"},[Zt.fulfilled]:(e,t)=>{const{access_token:a}=t.payload,{email:s,sub:c}=Jt(a),r=c,o=a;localStorage.setItem("login",JSON.stringify({token:o,email:s,_id:r,isLoggedIn:!0})),e.user.email=s,e.user._id=r,e.status="success",e.isLoggedIn=!0},[Zt.rejected]:(e,t)=>{e.status="failed",e.isLoggedIn=!1},[Qt.pending]:(e,t)=>{e.status="loading"},[Qt.fulfilled]:(e,t)=>{e.status="success";const{access_token:a}=t.payload,{email:s,sub:c}=Jt(a),r=c,o=a;localStorage.setItem("login",JSON.stringify({token:o,email:s,_id:r,isLoggedIn:!0})),e.user.email=s,e.user._id=r,e.status="success",e.isLoggedIn=!0},[Qt.rejected]:(e,t)=>{e.status="failed",e.isLoggedIn=!1},[Xt.pending]:(e,t)=>{e.status="loading"},[Xt.fulfilled]:(e,t)=>{e.status="success",e.profile=t.payload.profile},[Xt.rejected]:(e,t)=>{e.status="failed"},[$t.pending]:(e,t)=>{e.userStatus="loading"},[$t.fulfilled]:(e,t)=>{e.userStatus="success",e.users=t.payload},[$t.rejected]:(e,t)=>{e.userStatus="failed"},[ea.pending]:(e,t)=>{e.status="loading"},[ea.fulfilled]:(e,t)=>{e.status="success",e.users=[...e.users,t.payload]},[ea.rejected]:(e,t)=>{e.status="failed"}}});var aa=ta.reducer;const{setAuth:sa,logout:ca,setMyRole:ra}=ta.actions,oa=Object(y.b)("rolesPermissions/getAllRolesPermissionsMappings",(async()=>{const{data:e}=await i.a.get("/user-role-permission-mappings");return e})),la=Object(y.b)("rolesPermissions/updateRolesIntoPermission",(async e=>{let{permissionId:t,roleIds:a}=e;const{data:s}=await i.a.patch("/permissions/update_roles/".concat(t),{roleIds:a});return s})),ia=Object(y.b)("rolesPermissions/createRoles",(async e=>{let{name:t}=e;const{data:a}=await i.a.post("/roles",{name:t});return a})),na=Object(y.b)("rolesPermissions/createPermission",(async e=>{const{data:t}=await i.a.post("/permissions",e);return t})),da=Object(y.b)("rolesPermissions/createPermissionRolesMapping",(async e=>{const{data:t}=await i.a.post("/user-role-permission-mappings",e);return t})),ja=Object(y.b)("rolesPermissions/getAllRoles",(async()=>{const{data:e}=await i.a.get("/roles");return e})),ba=Object(y.b)("rolesPermissions/getAllPermissions",(async()=>{const{data:e}=await i.a.get("/permissions");return e})),ua=Object(y.b)("permissions/byRoleId",(async e=>{const{data:t}=await i.a.get("/permissions/roles/"+e);return t})),ma=Object(y.b)("rolesPermissions/byUserId",(async e=>{const{data:t}=await i.a.get("/user-role-permission-mappings/users/"+e);return t})),ha=Object(y.b)("rolesPermissions/deactivate",(async e=>{const{data:t}=await i.a.get("/user-role-permission-mappings/deactivate/"+e);return t})),pa=Object(y.c)({name:"rolesPermission",initialState:{rolesPermissionsStatus:"idle",rolesPermissions:[],updateRolesStatus:"idle",createRolesStatus:"idle",createPermissionStatus:"idle",getAllRolesStatus:"idle",getAllPermissionsStatus:"idle",permissionsByRoleStatus:"idle",createRolesPermissionMappingStatus:"idle",getAllRolesPermissionsMappingsByUserStatus:"idle",deactivateMappingStatus:"idle",roles:[],permissions:[],userRoles:[],userPermissions:[],permissionsByRole:[]},reducers:{getUserRolesPermissionsByMapping:(e,t)=>{e.userRoles=[],e.userPermissions=[],e.rolesPermissions.map((a=>{a.userId===t.payload&&(a.role&&e.userRoles.push(a.role),a.permission&&e.userPermissions.push(a.permission))}))},clearUserPermissions:e=>{e.userPermissions=[],e.userRole=[],e.rolesPermissions=[]}},extraReducers:{[oa.pending]:(e,t)=>{e.rolesPermissionsStatus="loading"},[oa.fulfilled]:(e,t)=>{e.rolesPermissionsStatus="success",e.rolesPermissions=t.payload},[oa.rejected]:(e,t)=>{e.rolesPermissionsStatus="failed"},[la.pending]:(e,t)=>{e.updateRolesStatus="loading"},[la.fulfilled]:(e,t)=>{e.updateRolesStatus="success"},[la.rejected]:(e,t)=>{e.updateRolesStatus="failed"},[ia.pending]:(e,t)=>{e.createRolesStatus="loading"},[ia.fulfilled]:(e,t)=>{e.createRolesStatus="success"},[ia.rejected]:(e,t)=>{e.createRolesStatus="failed"},[na.pending]:(e,t)=>{e.createPermissionStatus="loading"},[na.fulfilled]:(e,t)=>{e.createPermissionStatus="success",e.permissions=[...e.permissions,t.payload]},[na.rejected]:(e,t)=>{e.createPermissionStatus="failed"},[ja.pending]:(e,t)=>{e.getAllRolesStatus="loading"},[ja.fulfilled]:(e,t)=>{e.getAllRolesStatus="success",e.roles=t.payload},[ja.rejected]:(e,t)=>{e.getAllRolesStatus="failed"},[ba.pending]:(e,t)=>{e.getAllPermissionsStatus="loading"},[ba.fulfilled]:(e,t)=>{e.getAllPermissionsStatus="success",e.permissions=t.payload},[ba.rejected]:(e,t)=>{e.getAllPermissionsStatus="failed"},[ua.pending]:(e,t)=>{e.permissionsByRoleStatus="loading"},[ua.fulfilled]:(e,t)=>{e.permissionsByRoleStatus="success",e.permissionsByRole=t.payload},[ua.rejected]:(e,t)=>{e.permissionsByRoleStatus="failed"},[da.pending]:(e,t)=>{e.createRolesPermissionMappingStatus="loading"},[da.fulfilled]:(e,t)=>{e.createPermissionStatus="success",e.rolesPermissions=[...e.rolesPermissions,t.payload]},[da.rejected]:(e,t)=>{e.createRolesPermissionMappingStatus="failed"},[ma.pending]:(e,t)=>{e.getAllRolesPermissionsMappingsByUserStatus="loading"},[ma.fulfilled]:(e,t)=>{e.getAllRolesPermissionsMappingsByUserStatus="success",console.log(t.payload),t.payload.map((t=>{t.role&&e.userRoles.push(t.role),t.permission&&e.userPermissions.push(t.permission)}))},[ma.rejected]:(e,t)=>{e.getAllRolesPermissionsMappingsByUserStatus="failed"},[ha.pending]:(e,t)=>{e.deactivateMappingStatus="loading"},[ha.fulfilled]:(e,t)=>{e.deactivateMappingStatus="success"},[ha.rejected]:(e,t)=>{e.deactivateMappingStatus="failed"}}}),{getUserRolesPermissionsByMapping:Oa,clearUserPermissions:xa}=pa.actions;var ga=pa.reducer;const fa=Object(y.b)("campaignManagement/fetchRowData",(async(e,t)=>{let{getState:a}=t;const s=a().campaignManagement,c="".concat("https://custprofileapi.europ-assistance.in","/customers/search_customers_by_attr"),r=[];let o=null;for(const l of Object.keys(s.rows)){const e=s.rows[l];if(!e.first||!e.second||!e.third)throw new Error("Row has empty/default values. Fetching aborted.");const t={information_type:e.first.toLowerCase().split(" ").join("_"),category:e.second.toLowerCase().split(" ").join("_"),value:e.third.toLowerCase().split(" ").join("_")},a=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=(await a.json()).map((e=>e.id));o=null===o?new Set(i):new Set([...o].filter((e=>i.includes(e)))),r.push({rowKey:l,figures:o.size,customerIDs:[...o]})}return r})),ya=Object(y.b)("campaignManagement/fetchFiguresForRow",(async(e,t)=>{let{getState:a}=t;const s=a().campaignManagement,c=s.rows[e];if(!c||!c.first||!c.second||!c.third)throw new Error("Row data is missing or incomplete. Fetching aborted.");const r="".concat("https://custprofileapi.europ-assistance.in","/customers/search_customers_by_attr"),o={information_type:c.first.toLowerCase().split(" ").join("_"),category:c.second.toLowerCase().split(" ").join("_"),value:c.third.toLowerCase().split(" ").join("_")},l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});let i=(await l.json()).map((e=>e.id));for(const n of Object.keys(s.rows))if(Number(n)<Number(e)){const e=s.rows[n];i=i.filter((t=>e.customerIDs.includes(t)))}return{rowId:e,figures:i.length,customerIDs:i}})),va=Object(y.b)("campaignManagement/createCampaign",(async(e,t)=>{let{getState:a,rejectWithValue:s}=t;const c=a().campaignManagement,r="".concat("https://custprofileapi.europ-assistance.in","/campaign"),o=c.selectedCombinations.filter((e=>"Interests"===e.first&&e.third)).map((e=>e.third.value)),l={name:c.eventName,eventBased:!0,triggerTime:c.tabData.Email.timelineState.recurrence.recurrenceTime,type:"EMAIL",recurrenceType:c.tabData.Email.timelineState.recurrence.type.toUpperCase(),start:c.tabData.Email.timelineState.startDate,end:c.tabData.Email.timelineState.endDate,templateText:c.tabData.Email.content,customerIDs:c.allCustomerIDs,keywordsUsed:o};console.log("Publish body",l);try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(console.log("response",e),!e.ok)throw new Error("Failed to create campaign");return e.json()}catch(i){return s(i.message)}})),wa={isModalOpen:!1,dropdownData:{"Personal Information":{Age:["25-30","31-35"],Gender:["Male","Female"],"Marital Status":["Single","Married"],Location:["Delhi","Mumbai"]},Interests:{},Occupation:"",Activity:"","Family Details":"","Financial Information":"","Insurance Details":"",Vehicle:"",Health:""},rows:{[Date.now().toString()]:{first:"",second:"",third:"",figures:null,customerIDs:[]}},allCustomerIDs:[],selectedCombinations:[],eventName:"",eventDate:null,step:1,activeTab:"Email",startDate:null,endDate:null,tabData:{Email:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:500},SMS:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:160},Notification:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:250},Whatsapp:{content:"",timelineState:{},fileName:null,file:null,characterCount:0,charLimit:2e3}},radarData:[{count:120,subject:"EZ-Auto"},{count:98,subject:"Cyberior"},{count:86,subject:"Homecare"},{count:99,subject:"E-Portal 2.0"},{count:85,subject:"EZ-Travel"}],downloadDataStatus:null,error:null,rowIdsArray:[],loadingStates:{},errors:{}},Ca=Object(y.c)({name:"campaignManagement",initialState:wa,reducers:{toggleModal:(e,t)=>{e.isModalOpen=t.payload},updateDropdownData:(e,t)=>{e.dropdownData=t.payload},updateRows:(e,t)=>{e.rows=t.payload,e.rowIdsArray=[],e.allCustomerIDs=[...new Set(Object.values(e.rows).filter((e=>e.customerIDs&&e.customerIDs.length)).flatMap((e=>e.customerIDs)))]},updateSelectedCombinations:(e,t)=>{e.selectedCombinations=t.payload},setCampaignName:(e,t)=>{e.campaignName=t.payload},setEventName:(e,t)=>{e.eventName=t.payload},setEventDate:(e,t)=>{e.eventDate=t.payload},setStep:(e,t)=>{e.step=t.payload},setStartDate:(e,t)=>{e.startDate=t.payload},setEndDate:(e,t)=>{e.endDate=t.payload,e.eventDate=t.payload},setActiveTab:(e,t)=>{e.activeTab=t.payload},updateTabData:(e,t)=>{e.tabData=t.payload},setRadarData:(e,t)=>{e.radarData=t.payload},resetModal:e=>{e.step=wa.step,e.campaignName=wa.campaignName,e.eventName=wa.eventName,e.activeTab=wa.activeTab,e.tabData=wa.tabData,e.eventDate=wa.eventDate}},extraReducers:{[fa.pending]:e=>{e.downloadDataStatus="loading"},[fa.fulfilled]:(e,t)=>{e.downloadDataStatus="success",t.payload.forEach((t=>{e.rows[t.rowKey].figures=t.figures,e.rows[t.rowKey].customerIDs=t.customerIDs})),e.rowIdsArray=[...new Set([...e.rowIdsArray,...t.payload.map((e=>e.rowKey))])];const a=Math.max(...e.rowIdsArray.map(Number));e.allCustomerIDs=[...e.rows[a].customerIDs]},[fa.rejected]:(e,t)=>{e.downloadDataStatus="failed",e.error=t.error.message},[ya.pending]:(e,t)=>{const a=t.meta.arg;e.loadingStates[a]="loading",e.errors[a]=null},[ya.fulfilled]:(e,t)=>{const{rowId:a,figures:s,customerIDs:c}=t.payload;e.rows[a].figures=s,e.rows[a].customerIDs=c,e.loadingStates[a]="loaded";const r=Math.max(...Object.keys(e.rows).map(Number));Number(a)===r&&(e.allCustomerIDs=[...c])},[ya.rejected]:(e,t)=>{const a=t.meta.arg;e.loadingStates[a]="error",e.errors[a]=t.error.message}}}),{toggleModal:Sa,updateDropdownData:ka,updateRows:Fa,updateSelectedCombinations:Da,setCampaignName:Aa,setEventName:Pa,setEventDate:Ia,setStep:Na,setStartDate:Ea,setEndDate:Ma,setActiveTab:za,updateTabData:Ta,setRadarData:Ra,resetModal:_a}=Ca.actions,La=e=>e.campaignManagement.radarData;var Ba=Ca.reducer;const Ka=Object(y.b)("campaign/fetchData",(async()=>{const e=await fetch("".concat("https://custprofileapi.europ-assistance.in","/campaign/reports/all"));if(!e.ok)throw new Error("Network response was not ok");return await e.json()})),Ua=Object(y.c)({name:"campaign",initialState:{data:[],campaignNames:[],selectedCampaigns:[],status:"idle",error:null},reducers:{selectCampaign:(e,t)=>{e.selectedCampaigns=t.payload}},extraReducers:e=>{e.addCase(Ka.pending,(e=>{e.status="loading"})).addCase(Ka.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload,e.campaignNames=t.payload.map((e=>e.campaignName))})).addCase(Ka.rejected,((e,t)=>{e.status="failed",e.error=t.error.message}))}}),{selectCampaign:Ha}=Ua.actions;var Wa=Ua.reducer;const qa="".concat("https://custprofileapi.europ-assistance.in","/profile-type-customer-mapping/groupByAll"),Ya=Object(y.b)("profileDataCard/fetchProfileData",(async(e,t)=>{let{getState:a}=t;console.log("Entered from dispatch",e);const{profileTypeDemoStats:s}=a().profileDataCard;if(console.log("profileTypeDemoStats",s),e.profileType&&e.demographic&&s[e.profileType]&&s[e.profileType][e.demographic])return{};const c=await i.a.post(qa,e);if(console.log("Response ",c),e.profileType&&e.demographic){const t=c.data[e.demographic];return{profileType:e.profileType,demographic:e.demographic,data:t,requestBody:e}}const r=c.data.profiles.map((e=>{const t=Ga.displayAndColorMappings[e.profileType].displayName||e.profileType;return{name:"".concat(t),value:e.count,color:Ga.displayAndColorMappings[e.profileType].color||"#DE896599",src:"".concat(t)}})),o=r.reduce(((e,t)=>e+t.value),0);return{transformedData:r,totalCount:o,requestBody:e}})),Ga={hoveredItem:null,data:[],totalCount:0,status:"idle",error:null,profileTypeDemoStats:{},requestBody:null,displayAndColorMappings:{food:{displayName:"Foodie",color:"#DE896599"},sports:{displayName:"Sports Fan",color:"#ff990099"},travel:{displayName:"Avid Traveller",color:"#2745D999"},music:{displayName:"Musicophile",color:"#E54B4B99"},fitness:{displayName:"Fitness Freak",color:"#80008099"},automobile:{displayName:"Auto Lover",color:"#00ff0099"},gadget:{displayName:"Gadgets Freaks",color:"#56C3A699"},technology:{displayName:"Techie",color:"#66003399"}}},Va=Object(y.c)({name:"profileDataCard",initialState:Ga,reducers:{setHoveredItem:(e,t)=>{e.hoveredItem=t.payload},clearHoveredItem:e=>{e.hoveredItem=null}},extraReducers:e=>{e.addCase(Ya.pending,(e=>{e.status="loading"})).addCase(Ya.fulfilled,((e,t)=>{e.status="succeeded",t.payload.transformedData&&(e.data=t.payload.transformedData,e.totalCount=t.payload.totalCount),t.payload.profileType&&t.payload.demographic&&(e.profileTypeDemoStats[t.payload.profileType]||(e.profileTypeDemoStats[t.payload.profileType]={}),e.profileTypeDemoStats[t.payload.profileType][t.payload.demographic]=t.payload.data),e.requestBody=t.payload.requestBody})).addCase(Ya.rejected,((e,t)=>{e.status="failed",e.error=t.error.message}))}}),{setHoveredItem:Ja,clearHoveredItem:Za}=Va.actions;var Qa=Va.reducer;"".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly");const Xa=Object(y.b)("customerProfileTool/fetchCustomerProfileData",(async e=>{const t=await fetch("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly/").concat(e));if(!t.ok)throw new Error("Failed to fetch customer data");const a=await t.json();return console.log("month api",a),a.map((e=>({name:e.month,customers:e.count,profiles:0})))}));var $a=Object(y.c)({name:"customerProfileTool",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Xa.pending,(e=>{e.status="loading"})).addCase(Xa.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload})).addCase(Xa.rejected,((e,t)=>{e.status="failed",e.error=t.error.message}))}}).reducer;"".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly");const es=Object(y.b)("profileCount/fetchProfileCount",(async e=>{const t=await fetch("".concat("https://custprofileapi.europ-assistance.in","/customers/count/monthly/").concat(e));if(!t.ok)throw new Error("Failed to fetch customer data");const a=await t.json();return console.log("month api",a),a.map((e=>({name:e.month,customers:0,profiles:e.count})))}));var ts=Object(y.c)({name:"profileCount",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(es.pending,(e=>{e.status="loading"})).addCase(es.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload})).addCase(es.rejected,((e,t)=>{e.status="failed",e.error=t.error.message}))}}).reducer;const as=Object(y.b)("campaigns/fetchCampaigns",(async(e,t)=>{let{rejectWithValue:a}=t;try{const e=await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/campaign"));return console.log("Campaign List response data",e.data),e.data}catch(c){var s;return console.error("Error fetching campaigns:",c),a((null===(s=c.response)||void 0===s?void 0:s.data)||"Unable to fetch campaigns")}}));function ss(e){const t=new Date,a=new Date(e.start),s=new Date(e.end);return s<t?"Closed":a>t?"Pending":t>=a&&t<=s?e.isActive?"On-going":"Cancelled":"Unknown"}var cs=Object(y.c)({name:"campaign",initialState:{campaignStatus:"idle",campaigns:[],error:null},reducers:{},extraReducers:{[as.pending]:e=>{e.campaignStatus="loading",e.error=null},[as.fulfilled]:(e,t)=>{console.log("Received campaigns:",t.payload),e.campaignStatus="success",e.campaigns=t.payload.map((e=>({...e,status:ss(e)}))),console.log("Final campaigns for table:",t.payload)},[as.rejected]:(e,t)=>{e.campaignStatus="failed",e.error=t.payload}}}).reducer;const rs=Object(y.b)("profileCountWidget/fetchMenuItems",(async()=>{console.log("Fetching menu items...");const e=await fetch("".concat("https://custprofileapi.europ-assistance.in","/profile-count-widget/menu-items"));if(!e.ok)throw console.error("Failed to fetch menu items"),new Error("Failed to fetch menu items");const t=await e.json();return console.log("Menu items fetched:",t),t})),os=Object(y.b)("profileCountWidget/fetchDistribution",(async(e,t)=>{let{rejectWithValue:a}=t;const{profileType:s,demographic:c}=e;console.log("Fetching distribution for:",e);const r="All"===s?"":s,o="all"===c?"":c;try{const e=await fetch("".concat("https://custprofileapi.europ-assistance.in","/profile-count-widget/distribution"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileType:r,demographic:o})});if(!e.ok)throw console.error("Failed to fetch distribution"),new Error("Failed to fetch distribution");const t=await e.json();return 0===Object.keys(t).length?(console.error("No available data"),a("No available data.")):(console.log("Distribution fetched:",t),t)}catch(l){return console.error("Error fetching distribution:",l.message),a(l.message)}})),ls=Object(y.c)({name:"profileCountWidget",initialState:{menuItems:{profileTypeItems:[],demographicItems:[]},distribution:{},status:"idle",error:null},reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(rs.pending,(e=>{e.status="loading",console.log("Loading menu items...")})).addCase(rs.fulfilled,((e,t)=>{e.status="succeeded",e.menuItems.profileTypeItems=t.payload.firstMenuItems,e.menuItems.demographicItems=t.payload.secondMenuItems,console.log("Menu items loaded successfully")})).addCase(rs.rejected,((e,t)=>{e.status="failed",e.error=t.error.message,console.error("Error loading menu items:",t.error.message)})).addCase(os.pending,(e=>{e.status="loading",e.error=null,console.log("Loading distribution...")})).addCase(os.fulfilled,((e,t)=>{e.status="succeeded",e.distribution=t.payload,console.log("Distribution loaded successfully")})).addCase(os.rejected,((e,t)=>{e.status="failed",e.error=t.payload,console.error("Error loading distribution:",t.payload)}))}}),{clearError:is}=ls.actions;var ns=ls.reducer;const ds=Object(y.b)("widget2/fetchMenuItems",(async()=>{const e=(await i.a.get("/widget2/getMenuItems")).data;return{sources:e.sources.map((e=>({value:e,label:e}))),years:[{value:"All",label:"All"},...e.years.map((e=>({value:e,label:e.toString()})))],months:[{value:"All",label:"All"},...e.months.map((e=>({value:e,label:e})))]}})),js=Object(y.b)("widget2/fetchDistribution",(async e=>(await i.a.post("/widget2/getDistribution",e)).data));var bs=Object(y.c)({name:"widget2",initialState:{menuItems:{sources:[],years:[],months:[],fetchStatus:"idle"},distribution:{data:[],fetchStatus:"idle"}},reducers:{},extraReducers:e=>{e.addCase(ds.pending,(e=>{e.menuItems.fetchStatus="loading"})).addCase(ds.fulfilled,((e,t)=>{e.menuItems.fetchStatus="succeeded",e.menuItems.sources=t.payload.sources,e.menuItems.years=t.payload.years,e.menuItems.months=t.payload.months})).addCase(ds.rejected,(e=>{e.menuItems.fetchStatus="failed"})).addCase(js.pending,(e=>{e.distribution.fetchStatus="loading"})).addCase(js.fulfilled,((e,t)=>{e.distribution.fetchStatus="succeeded",e.distribution.data=t.payload})).addCase(js.rejected,(e=>{e.distribution.fetchStatus="failed"}))}}).reducer;const us=Object(y.b)("widget3/fetchMenuItems",(async()=>{const e=(await i.a.get("/widget3/getMenuItems")).data;return{sources:e.sources.map((e=>({value:e,label:e}))),years:[{value:"All",label:"All"},...e.years.map((e=>({value:e,label:e.toString()})))],months:[{value:"All",label:"All"},...e.months.map((e=>({value:e,label:e})))]}})),ms=Object(y.b)("widget3/fetchDistribution",(async e=>(await i.a.post("/widget3/getDistribution",e)).data));var hs=Object(y.c)({name:"widget3",initialState:{menuItems:{sources:[],years:[],months:[],fetchStatus:"idle"},distribution:{data:[],fetchStatus:"idle"}},reducers:{},extraReducers:e=>{e.addCase(us.pending,(e=>{e.menuItems.fetchStatus="loading"})).addCase(us.fulfilled,((e,t)=>{e.menuItems.fetchStatus="succeeded",e.menuItems.sources=t.payload.sources,e.menuItems.years=t.payload.years,e.menuItems.months=t.payload.months})).addCase(us.rejected,(e=>{e.menuItems.fetchStatus="failed"})).addCase(ms.pending,(e=>{e.distribution.fetchStatus="loading"})).addCase(ms.fulfilled,((e,t)=>{e.distribution.fetchStatus="succeeded",e.distribution.data=t.payload})).addCase(ms.rejected,(e=>{e.distribution.fetchStatus="failed"}))}}).reducer;const ps=Object(y.a)({reducer:{auth:aa,customer:A,keyword:ot,rolePermission:ga,campaignManagement:Ba,campaign:Wa,profileDataCard:Qa,customerProfileTool:$a,profileCount:ts,profileTypesCustomerMapping:Je,campaignListSlice:cs,elasticCustomers:K,profileCountWidget:ns,widget2:bs,widget3:hs}});function Os(e){let{path:t,...a}=e;const{isLoggedIn:s}=Object(p.c)((e=>e.auth));return s?Object(ae.jsx)(g.b,{path:t,...a}):Object(ae.jsx)(g.a,{to:"/login"})}var xs=a(992),gs=a(975),fs=a.p+"static/media/login.fb9a0a6a.png",ys=a.p+"static/media/eaLogo.f8ac5978.png",vs=a(498);var ws=e=>{let{setCaptchaStatus:t}=e;return Object(ae.jsx)("div",{children:Object(ae.jsx)(vs.a,{sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onChange:e=>{console.log("Captcha value:",e),e&&t(!0)}})})};var Cs=e=>{const t=Object(x.e)(),a={visibilityToggle:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"}},label:{color:"#0d5ff999"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(ae.jsx)(ne.a,{styles:{...a,...e.styles},...e})};var Ss=e=>{const t=Object(x.e)(),a={rightSection:{pointerEvents:"none"},label:{color:"#0d5ff999"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(ae.jsx)(ie.a,{styles:{...a,...e.styles},...e})};var ks=e=>{const t=Object(x.e)(),a={root:{width:"100%",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white","&:hover":{backgroundImage:"dark"===t.colorScheme?t.colors.teal[9]:"radial-gradient(#FFFFFF 1% ,#F3F6FF)",color:"dark"===t.colorScheme?t.white:"#0d5ff9",border:"1px solid #0d5ff9"}}};return Object(ae.jsx)(je.a,{styles:{...a,...e.styles},...e})};function Fs(){const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(""),[r,o]=Object(s.useState)(!1),l=Object(p.b)(),i=Object(g.h)(),{status:n,isLoggedIn:d,user:j}=Object(p.c)((e=>e.auth)),{rolesPermissionsStatus:b,rolesPermissions:u,userPermissions:m,getAllRolesPermissionsMappingsByUserStatus:h}=Object(p.c)((e=>e.rolePermission)),O={profile_dashboard:"/",customer_dashboard:"/customers"};return Object(s.useEffect)((()=>{"success"===n&&d&&(l(ma(j._id)),l($t()))}),[n]),Object(s.useEffect)((()=>{"success"==h&&(m.length>0&&O[m[0].name]?i(O[m[0].name]):i("/pd"))}),[h,i]),Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(q.a,{h:"100vh",sx:{backgroundImage:"radial-gradient(#F2F2F2 50% ,#F3F6FF)"},children:Object(ae.jsxs)(he.a,{pt:"8%",grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)($.a,{children:Object(ae.jsx)(q.a,{children:Object(ae.jsx)(xs.a,{style:{width:"500px",height:"550px"},src:fs,radius:"md",children:Object(ae.jsx)(ze.a,{p:"5%",h:"100%",justify:"end",children:Object(ae.jsx)(G.a,{c:"white",children:Object(ae.jsx)(X.a,{justify:"end",children:Object(ae.jsx)(f.a,{variant:"gradient",gradient:{from:"#0d5ff9",to:"#F3F6FF",deg:45},children:"Customer Profiling"})})})})})})})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(q.a,{children:Object(ae.jsx)($.a,{children:Object(ae.jsxs)(ze.a,{w:"80%",justify:"center",align:"stretch",children:[Object(ae.jsx)(q.a,{children:Object(ae.jsx)($.a,{children:Object(ae.jsx)(gs.a,{width:150,height:128,src:ys,bg:"#F2F2F2"})})}),Object(ae.jsx)(pe.a,{shadow:"lg",radius:"md",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(Ss,{label:"Email",placeholder:"you@ea.in",value:e,required:!0,onChange:e=>t(e.target.value)}),Object(ae.jsx)(Cs,{label:"Password",placeholder:"Your password",required:!0,onChange:e=>c(e.target.value)}),Object(ae.jsx)(te.a,{position:"apart",children:Object(ae.jsx)(G.a,{size:"sm",c:"#0d5ff9",children:"Forgot Password"})}),Object(ae.jsx)(ws,{setCaptchaStatus:o}),Object(ae.jsx)(ks,{type:"submit",disabled:!r,onClick:t=>{t.preventDefault(),l(Zt({email:e,password:a}))},children:"loading"===n?Object(ae.jsx)(ae.Fragment,{children:"Signing in"}):Object(ae.jsx)(ae.Fragment,{children:"Sign in"})}),"failed"===n&&Object(ae.jsx)(G.a,{style:{color:"red"},children:"Invalid credentials !"})]})})]})})})})]})})})}var Ds={"Avid Traveler":a.p+"static/media/Avid Traveler.153391f9.png","Fitness Freak":a.p+"static/media/Fitness Freak.46faf880.png",Foodie:a.p+"static/media/Foodie.2aa654ef.png","Sports Fan":a.p+"static/media/Sports Fan.2152ca0c.png",Techie:a.p+"static/media/Techie.4d48204f.png",AddProfile:a.p+"static/media/AddProfile.4fbe8ef9.png"};a(555);var As=e=>{let{shouldBounce:t,onClick:a}=e;const[c,r]=Object(s.useState)("");return Object(s.useEffect)((()=>{r(t?"bounce 1s ease 3":"")}),[t]),Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)("div",{style:{cursor:"pointer",animation:c,width:"100px",height:"100px",borderRadius:"50%",backgroundImage:"url(".concat(Ds.AddProfile,")"),backgroundSize:"cover",backgroundPosition:"center"},onClick:a})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:700,size:"sm",mt:-10,children:"Add Profile Details"})})]})})},Ps={625888:"64898d22d5fb0269864e8a28",1234561236:"6489b89ca22035a008b7186e",9493486611:"6489b89da22035a008b71872",63252:"6489b8a0a22035a008b71877",9632389602:"6489b8a0a22035a008b7187b",6232522:"6489b8a2a22035a008b71881",5222200:"6489b8a3a22035a008b71884",8801214640:"6489b8a6a22035a008b7188c",9831015310:"6489b8b3a22035a008b718a1",9818403793:"6489b8b4a22035a008b718a4",8141405397:"6489b8b4a22035a008b718a7",212114:"6489b8b5a22035a008b718aa",9844521636:"6489b8b6a22035a008b718af",7978341669:"6489b8b8a22035a008b718b4",6378564387:"6489b8b8a22035a008b718b7",1212121313:"6489b8b9a22035a008b718bb",9748248996:"6489b8bba22035a008b718bf",1234561238:"6489b8bba22035a008b718c2",12022224:"6489b8bca22035a008b718c5"};var Is=()=>{const e=Object(x.e)(),[t,a]=Object(s.useState)(!1),[c,r]=Object(s.useState)(!1),o=Object(s.useRef)(null),[l,n]=Object(s.useState)(""),[d,j]=Object(s.useState)(!1),[b,u]=Object(s.useState)(""),[m,h]=Object(s.useState)("");Object(s.useEffect)((()=>{const e=e=>{"closeIframe"===e.data&&r(!1)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const p=()=>{r((e=>!e))};return Object(ae.jsxs)("div",{children:[Object(ae.jsx)($.a,{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(ie.a,{label:"Mobile Number",value:l,onChange:e=>{const t=e.currentTarget.value;n(t),(e=>{const t=/^([6-9]{1}\d{9})$/.test(e);j(!0),u(t?"":"Please enter a valid mobile number")})(t)},required:!0,error:b}),Object(ae.jsx)(je.a,{onClick:async()=>{if(d){const t=Ps[l];if(t)try{const e=await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/customers/").concat(t)),s=await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile_mapping/").concat(t)),c=await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/profile/").concat(t));console.log("profile response",e);const r={name:e.data.customer_details.personal_details.full_name||"-",email:e.data.customer_details.email||"-",mobileNo:e.data.customer_details.mobile||"-",source:e.data.customer_details.source||"-",city:e.data.customer_details.personal_details.location||"-",customerId:t};if(console.log("details",r),console.log("response Categories data",s),!(e.data&&s.data&&c.data))throw new Error("Failed to get updated profile details");h("/agent?".concat(new URLSearchParams({...r,profileCompletion:c.data.completionPercentage.toString(),categories:JSON.stringify(s.data.categories),profilingTypes:"Foodie"}))),a(!0)}catch(e){console.error("Failed to fetch updated profile details:",e)}}else a(!1)},disabled:!d,children:"Simulate Call"}),Object(ae.jsx)(je.a,{onClick:()=>{a(!1)},children:"End Call"})]})}),t&&Object(ae.jsx)("div",{style:{position:"fixed",bottom:e.spacing.xs,right:e.spacing.xs,zIndex:1e3},children:Object(ae.jsx)(As,{shouldBounce:t,onClick:p})}),c&&Object(ae.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[Object(ae.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",zIndex:1001},children:Object(ae.jsx)(ee.a,{onClick:p,size:"xl",c:"white",children:Object(ae.jsx)(pt.a,{size:24})})}),Object(ae.jsx)("iframe",{ref:o,src:m,title:"Sample iFrame",style:{position:"absolute",top:"50%",left:"50%",width:"60%",height:"75%",transform:"translate(-50%, -50%)",border:"none",borderRadius:e.radius.md},allowFullScreen:!0})]})]})},Ns=a(300),Es=a(911);var Ms=a(499);var zs=e=>{let{details:t,onDetailChange:a,editable:s}=e;return Object(ae.jsx)(q.a,{children:Object.entries(t).filter((e=>{let[t,a]=e;return"customerId"!=t})).map((e=>{let[t,c]=e;return Object(ae.jsxs)(he.a,{gutter:"5",justify:"start",align:"center",children:[Object(ae.jsx)(Ms.a,{span:3,children:Object(ae.jsx)(G.a,{fw:550,size:12,children:t.replace(/^\w/,(e=>e.toUpperCase()))})}),Object(ae.jsx)(Ms.a,{span:1,children:Object(ae.jsx)(G.a,{children:":"})}),Object(ae.jsx)(Ms.a,{span:8,children:s&&"mobileNo"!==t?Object(ae.jsx)(ie.a,{size:"12",sx:{input:{backgroundColor:"#F1F5F9",border:0}},fz:"sm",c:"dimmed",value:c,onChange:e=>a&&a(t,e.currentTarget.value)}):Object(ae.jsx)(G.a,{fz:"sm",c:"dimmed",children:c})})]},t)}))})};var Ts=e=>{let{percentage:t}=e;return Object(ae.jsx)("div",{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(G.a,{fw:550,size:15,children:"Profile Completion"}),Object(ae.jsx)($.a,{mb:20,children:Object(ae.jsx)(Y.a,{size:70,thickness:5,sections:[{value:t,color:t>75?"#1D9B25":t>60?"#CFA400":"#D85972"}],label:Object(ae.jsxs)(G.a,{color:"",weight:20,align:"center",size:"xs",children:[t,"%"]})})})]})})};var Rs=e=>{let{profilingInterests:t}=e;return Object(ae.jsx)(te.a,{position:"center",children:t.map((e=>{if(e){const t=Ds[e];return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ke.a,{size:80,radius:80,src:t}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:550,size:15,children:e})})]},e)}}))})};function _s(e){let{setKeywordsAdded:t,customerId:a}=e;const[c,r]=Object(s.useState)([]),[o,l]=Object(s.useState)([]),n=Object(s.useRef)(null),d=e=>{l(e)},j=e=>{let{label:t,onRemove:a,...s}=e;const c=Object(ae.jsx)(ee.a,{onMouseDown:a,size:"xs",color:"blue",radius:"xl",variant:"transparent",children:Object(ae.jsx)(pt.a,{size:Object(Be.b)(10)})});return Object(ae.jsx)("div",{...s,children:Object(ae.jsx)(Oe.a,{size:"sm",variant:"outline",rightSection:c,children:t},t)})};Object(s.useEffect)((()=>{i.a.get("".concat("https://custprofileapi.europ-assistance.in","/keywords")).then((async e=>{const t=await i.a.get("".concat("https://custprofileapi.europ-assistance.in","/keywords/customer/").concat(a));console.log("customer Keywords Data",t);const s=it.a.differenceWith(e.data.data,t.data.data,it.a.isEqual).map((e=>{let{id:t,category:a,value:s}=e;return{value:t,label:"".concat(s," [").concat(a,"]")}}));r(s)})).catch((e=>{console.log(e)}))}),[]),Object(s.useEffect)((()=>{var e;null===(e=n.current)||void 0===e||e.focus(),t(o)}),[o]);const b=()=>Object(ae.jsx)(et.a,{hoverOnSearchChange:!0,variant:"filled",radius:"md",label:Object(ae.jsx)(G.a,{fw:700,children:"Keywords (".concat(o.length,")")}),value:o,data:c,searchable:!0,creatable:!0,getCreateLabel:e=>"+ Create ".concat(e),onChange:d,placeholder:"Enter customer's keywords",clearable:!0,filter:(e,t,a)=>!t,onCreate:e=>{const t={value:e,label:e};return r((e=>[...e,t])),t},styles:{input:{minHeight:"7rem"}},valueComponent:j,transitionProps:{duration:150,transition:"pop-top-left",timingFunction:"ease"},ref:n});return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"},children:Object(ae.jsx)(b,{})})})}a(556);var Ls=e=>{let{categories:t,setQuestionsHistory:a}=e;const[c,r]=Object(s.useState)({}),[o,l]=Object(s.useState)([]),[n,d]=Object(s.useState)(!0);return Object(s.useEffect)((()=>{d(!0);(async()=>{const e=Object.keys(t),s=[];for(let a=0;a<3;a++){const a=Math.floor(Math.random()*e.length),c=e[a],r=t[c];s.push(r),e.splice(a,1)}const c=[];for(let t of s){const e=[];for(let c of t)e.push("key: ".concat(c.key,", level: ").concat(c.level));const a={input:e.join(", ")},s=(await i.a.post("".concat("https://custprofileapi.europ-assistance.in","/process"),a,{headers:{"Content-Type":"application/json"}})).data.result;let r,o,l;try{r=s.split(": ")[2].split(", level")[0],o=parseInt(s.split(", level: ")[1].split(", Answers")[0]),l=s.split("Answers: ")[1].split(", ")}catch{console.error("Failed to get a question "),r="Test Question",o=2,l=["Test Answer 1","Test Answer 2","Test Answer 3","None"]}l.push("None"),c.push({id:c.length+1,question:r,answers:l.map(((e,t)=>({id:t+1,text:e}))),type:"multiple",level:o,category:t[0].key})}l(c),a(c),d(!1)})()}),[]),Object(s.useEffect)((()=>{const e=o.map((e=>({...e,selectedAnswers:c[e.id]||[]})));a(e)}),[c]),n?Object(ae.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(ae.jsx)(V.a,{color:"red",variant:"bars"})}):Object(ae.jsx)("div",{children:Object(ae.jsx)(ze.a,{spacing:"xs",children:Object(ae.jsx)(ut.a.Autosize,{mah:220,maw:400,mx:"auto",children:o.map(((e,t)=>Object(ae.jsxs)("div",{children:[Object(ae.jsx)(G.a,{pt:15,fz:"sm",c:"dimmed",children:"Q".concat(t+1,": ").concat(e.question)}),Object(ae.jsx)(te.a,{spacing:1,children:e.answers.map((t=>{var a;return Object(ae.jsx)("label",{children:Object(ae.jsxs)(te.a,{spacing:4,children:[Object(ae.jsx)("input",{type:"checkbox",checked:(null===(a=c[e.id])||void 0===a?void 0:a.includes(t.id))||!1,onChange:()=>{return a=e.id,s=t.id,c="multiple"===e.type,void r((e=>c?e[a]?e[a].includes(s)?{...e,[a]:e[a].filter((e=>e!==s))}:{...e,[a]:[...e[a],s]}:{...e,[a]:[s]}:{...e,[a]:[s]}));var a,s,c}}),Object(ae.jsx)(G.a,{fz:"sm",mr:5,c:"dimmed",children:t.text})]})},t.id)}))})]},e.id)))})})})},Bs=a(143);const Ks={name:"",email:"",mobileNo:"",source:"",city:"",customerId:""};var Us=()=>{const{name:e,email:t,source:a,city:c,mobileNo:r,customerId:o,categories:n,profileCompletion:d,profilingTypes:j=""}=function(){const e=Object(g.g)(),t=new URLSearchParams(e.search),a={};for(const[s,c]of t.entries())a[s]=c;return a}(),[b,u]=Object(s.useState)({name:e,email:t,mobileNo:r,source:a,city:c,customerId:o}),[m,h]=Object(s.useState)(parseInt(d,10)),[p,O]=Object(s.useState)(j.split(",")),[x,f]=Object(s.useState)(n?JSON.parse(n):{}),[y,v]=Object(s.useState)([{details:b,categories:x,profileCompletion:m,profilingTypes:p}]),[w,C]=Object(s.useState)(!1),[S,k]=Object(s.useState)(!1),[F,D]=Object(s.useState)([]),[A,P]=Object(s.useState)([]);Object(s.useEffect)((()=>{const e=y.find((e=>e.details.mobileNo===r));e?(u(e.details),h(e.profileCompletion),O(e.profilingTypes)):(u({...Ks,mobileNo:r}),h(0))}),[r,y]),Object(s.useEffect)((()=>{console.log("questionHistory",F),console.log("categories in AgentEntry",n)}),[F]);const I=e=>Bs.a.show({id:"submit-error",withCloseButton:!0,onClose:()=>console.log("unmounted"),onOpen:()=>console.log("mounted"),autoClose:5e3,title:e.message,message:"There seems to be a problem with the network",color:"red",icon:Object(ae.jsx)(pt.a,{}),className:"my-notification-class",loading:!1}),N=()=>{Bs.a.show({id:"submit-success",withCloseButton:!0,onClose:()=>console.log("unmounted"),onOpen:()=>console.log("mounted"),autoClose:5e3,title:"Success",message:"Profile has been submitted successfully",color:"teal",icon:Object(ae.jsx)(ht.a,{}),className:"my-notification-class",loading:!1})},E=async()=>{try{const e="".concat("https://custprofileapi.europ-assistance.in","/question/process"),t={customerId:o,keywords:A,history:F};console.log("body =>",t),console.dir(t),await i.a.post(e,t).then(console.log).then(N).then((()=>v((e=>[...e,{details:b,categories:x,profileCompletion:0,profilingTypes:[]}])))).then((()=>setTimeout((()=>{window.parent.postMessage("closeIframe","*")}),2e3))).catch(I).catch(console.log)}catch{I(new l.AxiosError("Failed to submit questionHistory!"))}},M=e=>{E()},z=y.some((e=>e.details.mobileNo===r));return Object(ae.jsxs)(le.a,{p:10,children:[Object(ae.jsxs)(q.a,{children:[Object(ae.jsxs)(te.a,{position:"apart",children:[Object(ae.jsx)(q.a,{}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:550,children:"Customer"})}),Object(ae.jsxs)(X.a,{justify:"flex-end",direction:"column",style:{marginBottom:"10px"},children:[Object(ae.jsx)(ee.a,{onClick:E,children:Object(ae.jsx)(pt.a,{size:15})}),Object(ae.jsx)(ee.a,{onClick:()=>{S?(document.exitFullscreen(),k(!1)):(document.documentElement.requestFullscreen(),k(!0))},children:Object(ae.jsx)(Es.a,{size:15})})]})]}),Object(ae.jsx)(Ns.a,{size:"xs"})]}),Object(ae.jsxs)(tt.a,{opened:w,onClose:()=>C(!1),title:"Confirm action",size:"xs",transitionProps:{transition:"fade",duration:600,timingFunction:"linear"},children:[Object(ae.jsx)(G.a,{children:"Do you want to submit the changes?"}),Object(ae.jsx)(je.a,{onClick:()=>M(),children:"Submit"}),Object(ae.jsx)(je.a,{onClick:()=>M(),children:"Discard"})]}),Object(ae.jsx)(le.a,{pl:10,pr:10,radius:"md",mt:5,bg:"#f1f3f5",children:Object(ae.jsxs)(te.a,{position:"apart",grow:!0,children:[Object(ae.jsx)(zs,{details:b,onDetailChange:(e,t)=>{u((a=>({...a,[e]:t})))},editable:!z}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(Ts,{percentage:m})}),Object(ae.jsx)(Rs,{profilingInterests:p})]})}),Object(ae.jsxs)(te.a,{position:"apart",grow:!0,children:[Object(ae.jsxs)(q.a,{pt:10,children:[Object(ae.jsx)(_s,{setKeywordsAdded:P,customerId:o}),Object(ae.jsx)(Nt,{})]}),Object(ae.jsx)(q.a,{children:Object(ae.jsx)(Ls,{categories:x,setQuestionsHistory:D})})]}),Object(ae.jsx)(Ns.a,{my:"md",size:"xs"}),Object(ae.jsx)(X.a,{justify:"flex-end",children:Object(ae.jsx)(je.a,{bg:"#EF3E42",onClick:E,children:"Submit"})})]})},Hs=a(994),Ws=a(913),qs=a(914);function Ys(){const{colorScheme:e,toggleColorScheme:t}=Object(O.b)(),a="dark"===e;return Object(ae.jsx)(ee.a,{variant:"subtle",c:a?"yellow":"white",onClick:()=>t(),title:"Toggle color scheme",children:a?Object(ae.jsx)(Ws.a,{size:"1.1rem"}):Object(ae.jsx)(qs.a,{size:"1.1rem"})})}var Gs=a(916),Vs=a(917),Js=a(918),Zs=(a(919),a(920)),Qs=(a(921),a(915));var Xs=a(976);var $s=e=>{let{isModalOpen:t,handleModalClose:a,selectedUserRoleName:s,selectedUser:c,setSelectedUser:r,permissions:o,selectedPermission:l,setSelectedPermission:i,rolesPermissions:n,handleAssignPermission:d,users:j,selectedRole:b}=e;return Object(ae.jsxs)(ae.Fragment,{children:[" ",Object(ae.jsxs)(tt.a,{opened:t,onClose:a,title:"Assign permissions",size:"lg",style:{content:{maxHeight:"80vh"}},children:[Object(ae.jsx)(G.a,{fz:"xl",children:"Select user below assigning new permission"}),s&&Object(ae.jsxs)(G.a,{children:[" ROLE : ",s]}),Object(ae.jsx)("br",{}),Object(ae.jsx)("br",{}),Object(ae.jsx)(Xs.a,{label:"Select user",placeholder:"Pick one",data:j.map((e=>({value:e.id,label:e.agentName||e.email}))),value:c,onChange:r}),Array.isArray(o)&&o.length>0?Object(ae.jsx)(Xs.a,{label:"Select permission",placeholder:"Pick one",disabled:null===b,data:null===o||void 0===o?void 0:o.map((e=>({value:e.id,label:e.name,disabled:n.some((t=>t.permissionId===e.id&&t.userId===c))}))),value:l,onChange:i,dropdownComponent:"div"}):Object(ae.jsx)(G.a,{children:"Loading permissions"}),Object(ae.jsx)("br",{}),Object(ae.jsx)(je.a,{variant:"gradient",gradient:{from:"indigo",to:"red"},className:"mt-4",onClick:d,disabled:null===b||null===l||null===b,children:"Assign"})]})]})};var ec=e=>{let{useStyles:t,initialData:a,title:c}=e;const{classes:r,cx:o}=t(),[l,i]=Object(s.useState)(!1),n=a.map((e=>Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("td",{children:e.rolename}),Object(ae.jsx)("td",{children:e.permissionname}),Object(ae.jsx)("td",{children:e.username}),Object(ae.jsx)("td",{children:Object(ae.jsx)(je.a,{color:"teal",size:"xs",compact:!0,children:e.isactive})}),Object(ae.jsx)("td",{children:e.created_at}),Object(ae.jsx)("td",{children:Object(ae.jsx)(ee.a,{variant:"light",children:Object(ae.jsx)(Gs.a,{size:"1rem"})})})]},e.id)));return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(f.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:c}),Object(ae.jsx)(ut.a,{h:600,onScrollPositionChange:e=>{let{y:t}=e;return i(0!==t)},children:Object(ae.jsxs)(mt.a,{miw:700,striped:!0,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(ae.jsx)("thead",{className:o(r.header,{[r.scrolled]:l}),children:Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("th",{children:"Role Name"}),Object(ae.jsx)("th",{children:"Permission Name"}),Object(ae.jsx)("th",{children:"User Email"}),Object(ae.jsx)("th",{children:"Status"}),Object(ae.jsx)("th",{children:"Created At"}),Object(ae.jsx)("th",{children:"Action"})]})}),Object(ae.jsx)("tbody",{children:n})]})})]})},tc=a(977);a(922),a(923),a.p;var ac=a(924),sc=a(159);a(993);ac.a,ac.a,ac.a,ac.a;var cc=e=>{let{initialData:t,title:a}=e;const s=[{header:"Name",accessorKey:"name"},{header:"Permissions",accessorKey:"permissions"},{header:"Created At",accessorKey:"created_at"},{header:"Action",accessorKey:"action",Cell:e=>{let{row:t,column:a}=e;return Object(ae.jsx)(ee.a,{variant:"light",onClick:e=>{e.preventDefault(),console.log("Clicked action for ID: ".concat(t.original.id))},children:Object(ae.jsx)(Gs.a,{size:"1rem"})})}}];return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(f.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:a}),Object(ae.jsx)(se,{columns:s,data:t,onRowClick:e=>console.log("Row clicked:",e)})]})};var rc=function(e){let{initialData:t,title:a}=e;const s=t.map((e=>({id:e.id,name:e.name,isactive:e.isactive,created_at:e.created_at}))),c=[{header:"Name",accessorKey:"name"},{header:"Status",accessorKey:"isactive",Cell:e=>{let{value:t}=e;return Object(ae.jsx)(ks,{w:80,c:"teal",size:"xs",compact:!0,children:t})}},{header:"Created At",accessorKey:"created_at"}];return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(f.a,{style:{padding:"10px"},order:4,color:"#0d5ff9",children:a}),Object(ae.jsx)(se,{columns:c,data:s,onRowClick:e=>console.log("Row clicked:",e)})]})},oc=a(978),lc=a(925),ic=a(954);var nc=e=>{const t=Object(x.e)(),a={rightSection:{pointerEvents:"none",color:"#0d5ff9"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},calendarHeader:{backgroundColor:"#F3F6FF"},day:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},monthList:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},weekday:{color:"dark"===t.colorScheme?t.white:"#0d5ff9"},calendarHeaderLevel:{backgroundColor:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},calendarHeaderControlIcon:{color:"#0d5ff9"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(ae.jsx)(ic.a,{styles:{...a,...e.styles},...e,valueFormat:"DD MMM YYYY",popoverProps:{withinPortal:!0},rightSection:Object(ae.jsx)(ee.a,{children:Object(ae.jsx)(lc.a,{color:"#0d5ff9"})})})},dc=a(926);var jc=e=>{const t=Object(x.e)(),a={rightSection:{pointerEvents:"none"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},item:{"&":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"},"&[data-selected]":{"&, &:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff999",color:"dark"===t.colorScheme?t.white:"white"}}}};return Object(ae.jsx)(Xs.a,{...e,withinPortal:!0,transitionProps:{transition:"scale-y",duration:500,timingFunction:"ease"},styles:{...a,...e.styles},rightSection:e.rightSection||Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dc.a,{})})})};var bc=e=>{let{isModalOpen:t,handleModalClose:a,handleAddUser:s,userDetails:c,setUserDetails:r,rolesData:o}=e;return Object(ae.jsxs)(tt.a,{opened:t,onClose:a,title:"Create User",style:{content:{maxHeight:"80vh"}},children:[Object(ae.jsxs)(oc.a,{cols:2,children:[Object(ae.jsx)(Ss,{placeholder:"First Name",label:"First Name",value:c.firstname,onChange:e=>r({...c,firstname:e.target.value}),withAsterisk:!0,required:!0}),Object(ae.jsx)(Ss,{placeholder:"Last Name",label:"Last Name",value:c.lastname,onChange:e=>r({...c,lastname:e.target.value}),withAsterisk:!0})]}),Object(ae.jsx)(Ss,{placeholder:"Email",label:"Email",value:c.email,onChange:e=>r({...c,email:e.target.value}),withAsterisk:!0,required:!0,type:"email"}),Object(ae.jsx)(Ss,{placeholder:"Mobile",label:"Mobile",value:c.mobile,withAsterisk:!0,onChange:e=>r({...c,mobile:e.target.value})}),Object(ae.jsx)(Ss,{placeholder:"State",label:"State",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"City",label:"City",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"Address",label:"Address",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"Pincode",label:"Pincode",withAsterisk:!0}),Object(ae.jsx)(nc,{placeholder:"Date Of Birth",label:"Date Of Birth",rightSection:Object(ae.jsx)(ee.a,{variant:"subtle",children:Object(ae.jsx)(lc.a,{})}),withAsterisk:!0,maxDate:new Date}),Object(ae.jsx)(jc,{label:"Role",placeholder:"Select Role",data:o,value:c.role,onChange:e=>r({...c,role:e}),withAsterisk:!0,required:!0}),Object(ae.jsx)(ks,{className:"mt-4",onClick:s,disabled:!c.firstname||!c.lastname||!c.email||!c.role,children:"Submit"})]})},uc=a(971);function mc(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}function hc(e){Bs.a.show({title:"Success",message:e,styles:e=>({root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}})})}var pc=e=>{let{isModalOpen:t,curr_user:a,handleModalClose:c,userRolesPermissions:r,userPermissionsOptions:o,classes:l,cx:i}=e;const n=Object.keys(r).length>0?r.map((e=>({id:e.id,permission:e.permission.name,isactive:e.isActive?"active":"disabled",created_at:mc(e.created_at)}))):[],d=Object(x.e)(),j=Object(p.b)(),[b,u]=Object(s.useState)(n),[m,h]=Object(s.useState)(!1),[O,g]=Object(s.useState)(!1),[y,v]=Object(s.useState)(null),w=Array.isArray(b)?b.map((e=>Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("td",{children:e.permission?e.permission:Object(ae.jsx)(Xs.a,{label:"Permission",placeholder:"Select Permission",data:o,value:y,onChange:e=>v(e),withAsterisk:!0,required:!0})}),Object(ae.jsx)("td",{children:Object(ae.jsx)(uc.a,{onClick:()=>{return t=e.id,j(ha(t)),j(oa()),hc("changed status successfully"),void c();var t},checked:"active"==e.isactive,color:"teal",onLabel:"ACTIVE",offLabel:"DISABLE"})}),Object(ae.jsx)("td",{children:e.created_at})]},e.id))):[];return Object(ae.jsxs)(ae.Fragment,{children:[console.log(a),Object(ae.jsxs)(tt.a,{opened:t,title:"User Actions",onClose:c,overlayProps:{color:"dark"===d.colorScheme?d.colors.dark[9]:d.colors.gray[2],opacity:.55,blur:3},size:"auto",children:[Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(he.a.Col,{span:2,children:Object(ae.jsx)(Ke.a,{src:null,alt:"no image here",color:"indigo",radius:"0",size:50})}),Object(ae.jsx)(he.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Name:"})," ",a.email]})}),Object(ae.jsx)(he.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Role:"})," ",a.role]})})]}),Object(ae.jsx)(he.a,{children:Object(ae.jsxs)(he.a.Col,{span:12,children:[Object(ae.jsx)(Qs.a,{h:"xl"}),Object(ae.jsx)(f.a,{order:4,c:"#4E70EA",children:"User Permissions"}),Object(ae.jsx)(Qs.a,{h:"xl"}),Object(ae.jsxs)(mt.a,{miw:300,striped:!0,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(ae.jsx)("thead",{className:i(l.header,{[l.scrolled]:m}),children:Object(ae.jsxs)("tr",{children:[Object(ae.jsxs)("th",{children:[Object(ae.jsx)(G.a,{color:"white",children:"Permission"})," "]}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Status"})}),Object(ae.jsxs)("th",{children:[Object(ae.jsx)(G.a,{color:"white",children:"Created At"})," "]})]})}),Object(ae.jsx)("tbody",{children:w})]}),Object(ae.jsx)(Qs.a,{h:"xl"}),!O&&Object(ae.jsx)(je.a,{style:{backgroundColor:"black",fontColor:"white"},onClick:()=>{const e={id:Math.random(),permission:"",isactive:"active",created_at:mc(new Date)};u([...b,e]),g(!0)},children:"Add Permission"}),O&&Object(ae.jsx)(je.a,{color:"teal",onClick:()=>{j(da({roleId:a.roleId,permissionId:y,userId:a.id})),j(oa()),hc("added permission successfully"),c()},children:"Save"})]})})]})]})};var Oc=e=>{let{initialData:t}=e;const a=Object(Ne.a)((e=>({header:{position:"sticky",top:0,backgroundColor:"#0d5ff9",fontColor:"red",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Be.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.sm}}))),{classes:c,cx:r}=a(),[o,l]=Object(s.useState)(!1),[i,n]=Object(s.useState)(!1),[d,j]=Object(s.useState)(!1),b=(Object(g.g)(),Object(p.b)()),{rolesPermissions:u,roles:m,permissions:h}=Object(p.c)((e=>e.rolePermission)),{users:O}=Object(p.c)((e=>e.auth)),x={},[y,v]=Object(s.useState)({firstname:null,lastname:null,email:null,role:null,mobile:null}),[w,C]=Object(s.useState)(null);for(const s of u){const{userId:e,permission:{name:t}}=s;x.hasOwnProperty(e)?x[e].push(t):x[e]=[t]}const S=O.map((e=>e.id));for(const s of S)x.hasOwnProperty(s)||(x[s]=[]);const k=w&&u.filter((e=>e.userId===w.id)),F=[];w&&h.map((e=>{x[w.id].includes(e.name)||F.push({value:e.id,label:e.name})}));const D=Array.isArray(t)?t.map((e=>Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("td",{children:e.email}),Object(ae.jsx)("td",{children:e.role}),Object(ae.jsx)("td",{children:e.permissions}),Object(ae.jsx)("td",{children:Object(ae.jsx)(je.a,{color:"teal",size:"xs",compact:!0,children:e.isactive})}),Object(ae.jsx)("td",{children:e.created_at}),Object(ae.jsx)("td",{onClick:()=>(C(e),void j(!0)),children:Object(ae.jsx)(ee.a,{variant:"light",children:Object(ae.jsx)(Gs.a,{size:"1rem"})})})]},e.id))):[],A=m&&Array.isArray(m)&&m.map((e=>({value:e.id,label:e.name}))),P=()=>{i&&n(!1),d&&j(!1)},I=()=>{n(!0)},N=async()=>{try{const t={email:y.email,mobile:y.mobile,fullname:"".concat(y.firstname," ").concat(y.lastname),roleId:y.role};await b(ea(t)),await b(oa()),n(!1),e="added user successfully",Bs.a.show({title:"Success",message:e,styles:e=>({root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}})})}catch(t){console.log(t)}var e};return O&&0!==O.length?Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(Hs.a,{padding:"md",children:Object(ae.jsx)(q.a,{sx:{backgroundColor:"white",padding:"50px",marginTop:"-80px"},children:Object(ae.jsx)("div",{style:{display:"flex"},children:Object(ae.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(ae.jsxs)("div",{style:{padding:"10px"},children:[Object(ae.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"-65px"},children:[Object(ae.jsx)("span",{style:{padding:"10px"},children:Object(ae.jsx)(f.a,{pl:5,children:"Users Permisssions"})}),Object(ae.jsx)("span",{children:Object(ae.jsx)(oe.a,{children:Object(ae.jsx)($.a,{children:Object(ae.jsxs)(X.a,{mt:5,children:[Object(ae.jsx)(je.a,{className:"mt-4",onClick:I,style:{backgroundColor:"black",fontColor:"white"},children:"+ Create User"}),Object(ae.jsx)(bc,{isModalOpen:i,handleAddUser:N,handleModalClose:P,userDetails:y,setUserDetails:v,rolesData:A})]})})})})]}),Object(ae.jsxs)("div",{children:[d&&Object(ae.jsx)(pc,{isModalOpen:d,handleModalClose:P,curr_user:w,userRolesPermissions:k,userPermissionsOptions:F,classes:c,cx:r}),Object(ae.jsx)(ut.a,{h:600,onScrollPositionChange:e=>{let{y:t}=e;return l(0!==t)},children:Object(ae.jsxs)(mt.a,{miw:700,withBorder:!0,highlightOnHover:!0,withColumnBorders:!0,children:[Object(ae.jsx)("thead",{className:r(c.header,{[c.scrolled]:o}),children:Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Email"})}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Role"})}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Permissions"})}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Status"})}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Created At"})}),Object(ae.jsx)("th",{children:Object(ae.jsx)(G.a,{color:"white",children:"Action"})})]})}),Object(ae.jsx)("tbody",{children:D})]})})]})]})})})})})}):Object(ae.jsx)(me.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}})};function xc(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}var gc=()=>{const e=Object(Ne.a)((e=>({header:{position:"sticky",top:0,backgroundColor:"#c2c2c2",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Be.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.sm}}))),[t,a]=Object(s.useState)(!1),[c,r]=Object(s.useState)(!1),[o,l]=Object(s.useState)(null),[i,n]=Object(s.useState)(null),[d,j]=Object(s.useState)(null),[b,u]=Object(s.useState)(null),[m,h]=Object(s.useState)(""),O=Object(g.g)(),x=Object(p.b)(),{rolesPermissionsStatus:f,rolesPermissions:y,userPermissions:v,permissionsByRole:w,permissionsByRoleStatus:C,permissions:S,roles:k}=Object(p.c)((e=>e.rolePermission)),{user:F,users:D}=Object(p.c)((e=>e.auth)),A={};for(const s of y){const{userId:e,permission:{name:t}}=s;A.hasOwnProperty(e)?A[e].push(t):A[e]=[t]}const P=D.map((e=>e.id));for(const s of P)A.hasOwnProperty(s)||(A[s]=[]);Object(s.useEffect)((()=>{x(oa()),x($t()),x(ba()),x(ja())}),[]),Object(s.useEffect)((()=>{if(null!==o){const e=D.find((e=>e.id===o));e.role&&(n(e.role.id),u(e.role.name))}}),[o]),Object(s.useEffect)((()=>{null!==i&&x(ua(i)),j(null)}),[i]);const I=y.map((e=>({id:e.id,rolename:e.role.name,permissionname:e.permission.name,username:e.user.email,isactive:e.isActive?"active":"inactive",created_at:xc(e.created_at)}))),N=(Object.keys(A).length>0&&D.map((e=>({id:e.id,email:e.email,isactive:"active",role:e.role.name,permissions:A[e.id].join(" / "),created_at:xc(e.created_at)}))),Object.keys(A).length>0?D.map((e=>({id:e.id,roleId:e.roleId,email:e.email,isactive:"active",role:e.role.name,permissions:A[e.id].join(" / "),created_at:xc(e.created_at)}))):[]);D.map((e=>{console.log(A[e.id])}));const E=k.map((e=>({id:e.id,name:e.name,permissions:e.defaultPermissions.map((e=>e.name)).join(" / "),created_at:xc(e.created_at)}))),M=S.map((e=>({id:e.id,name:e.name,isactive:"active",created_at:xc(e.created_at)}))),z=()=>{a(!0)},T=()=>{t&&(a(!1),l(null),n(null),j(null)),c&&r(!1)},R=()=>{x(da({roleId:i,permissionId:d,userId:o})),x(oa()),T()};return"loading"!==f&&D&&0!==D.length?Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(Hs.a,{padding:"md",children:Object(ae.jsx)("div",{style:{display:"flex"},children:Object(ae.jsx)("span",{style:{flexGrow:"1",width:"100px"},children:Object(ae.jsxs)("div",{style:{padding:"10px"},children:[Object(ae.jsx)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",marginTop:"-65px"},children:Object(ae.jsx)("span",{children:Object(ae.jsx)(oe.a,{children:Object(ae.jsx)($.a,{children:Object(ae.jsx)(X.a,{mt:5,children:"/acl/permissionrolemappings"===O.pathname&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(je.a,{className:"mt-4",onClick:z,compact:!0,children:"Assign permissions"}),Object(ae.jsx)($s,{isModalOpen:t,handleModalClose:T,selectedUserRoleName:b,selectedUser:o,setSelectedUser:l,permissions:S,selectedPermission:d,setSelectedPermission:j,rolesPermissions:y,handleAssignPermission:R,users:D,selectedRole:i})]})})})})})}),Object(ae.jsx)("div",{children:Object(ae.jsx)(g.d,{children:Object(ae.jsxs)(g.b,{children:[Object(ae.jsx)(g.b,{index:!0,element:Object(ae.jsx)(ae.Fragment,{children:"Default page"})}),Object(ae.jsx)(g.b,{path:"/permissionrolemappings",element:Object(ae.jsx)(ec,{title:"acl/permissions vs users",useStyles:e,initialData:I})}),Object(ae.jsx)(g.b,{path:"/rolesvspermissions",element:Object(ae.jsx)(cc,{title:"acl/roles vs permissions",useStyles:e,initialData:E})}),Object(ae.jsx)(g.b,{path:"/permissions",element:Object(ae.jsx)(rc,{title:"acl/all permissions",useStyles:e,initialData:M})}),Object(ae.jsx)(g.b,{path:"/userpermissions",element:Object(ae.jsx)(Oc,{initialData:N})})]})})})]})})})})}):Object(ae.jsx)(me.a,{visible:!0,overlayBlur:2,loaderProps:{size:"xl",variant:"dots"}})};var fc=()=>(Object(Bs.b)({type:"warning",title:"Permission Denied!!",message:"You do not have access to this page. Please contact the admin"}),Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fz:"xl",fw:700,children:"Permission Denied :("})})})),yc=a(927),vc=a(928);var wc=e=>{let{row:t,rowId:a,handleDropdownChange:s,dropdownData:r,selectedCombinations:o,deleteRow:l}=e;const i=t.figures,n=t.first?Object.keys(r[t.first]):[],d=t.second?r[t.first][t.second].filter((e=>{const s=t.first,c=t.second,r="Interests"===t.first?e.value:e,l=o.some((e=>e.first===s&&e.second===c&&("Interests"===t.first?e.third.value:e.third)===r)),i=o.some((e=>e.rowId===a&&e.first===s&&e.second===c&&("Interests"===t.first?e.third.value:e.third)===r));return!l||i})):[],j=Object(p.b)(),b=Object(p.c)((e=>e.campaignManagement.loadingStates[a])),u=(Object(p.c)((e=>e.campaignManagement.errors[a])),()=>{j(ya(a))});return Object(ae.jsxs)(c.a.Fragment,{children:[Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(ae.jsx)(jc,{data:Object.keys(r).map((e=>({value:e,label:"string"===typeof e?e:null}))),searchable:!0,value:t.first,placeholder:"Select Information Type",onChange:e=>s(a,"first",e)})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(ae.jsx)(jc,{data:n.map((e=>({value:e,label:"string"===typeof e?e:null}))),searchable:!0,value:t.second,placeholder:"Select Category",onChange:e=>s(a,"second",e)})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"mb-4 col-6 col-lg-12",children:Object(ae.jsx)(jc,{data:d.map((e=>"string"===typeof e?{value:e,label:e}:e)),searchable:!0,value:t.third,placeholder:"Select Sub-category",onChange:e=>{s(a,"third",e),j(ya(a,e))}})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-1",children:Object(ae.jsx)(ee.a,{onClick:()=>l(a),color:"red",variant:"subtle",size:"sm",children:Object(ae.jsx)(xt.a,{})})}),Object(ae.jsxs)("div",{className:"col-12 col-lg-2",children:["loading"===b&&Object(ae.jsx)(V.a,{type:"dots",color:"#0d5ff9"}),"error"===b&&Object(ae.jsxs)(X.a,{children:[Object(ae.jsx)(ee.a,{c:"red",children:Object(ae.jsx)(yc.a,{})}),Object(ae.jsx)(ee.a,{c:"#0d5ff9",onClick:u,children:Object(ae.jsx)(vc.a,{})})]}),"loading"!==b&&"error"!==b&&Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(X.a,{children:[Object(ae.jsx)(ee.a,{children:null!==i?i:"-"}),Object(ae.jsx)(ee.a,{c:"#0d5ff9",onClick:u,children:Object(ae.jsx)(vc.a,{})})]})})]})]})},Cc=(a(557),a(558),a(559),a(560),a(561),a(562),a(997)),Sc=a(929),kc=a(930),Fc=a(155),Dc=a(480);var Ac=()=>{const e=Object(p.c)(La).map((e=>({...e,subject:"".concat(e.subject," \n ").concat(e.count)}))),t=e=>{const{x:t,y:a,payload:s}=e,c=s.value.split("\n");return Object(ae.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:c.filter(((e,t)=>0===t)).map(((e,t)=>Object(ae.jsx)("text",{x:0,y:5*t,dy:0===t?-5:5,textAnchor:"middle",fill:"#666",children:e},t)))})};return Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(Sc.a,{cx:"50%",cy:"50%",outerRadius:"80%",data:e,children:[Object(ae.jsx)(kc.a,{}),Object(ae.jsx)(Fc.a,{dataKey:"subject",tick:Object(ae.jsx)(t,{})}),Object(ae.jsx)(Dc.a,{name:"Customer Campaign",dataKey:"count",stroke:"#0d5ff9",fill:"#0d5ff9",fillOpacity:.6})]})})},Pc=a(932);a(789);var Ic=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.campaignManagement.eventName)),a=Object(p.c)((e=>e.campaignManagement.eventDate));return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)("div",{className:"",style:{minHeight:"100px"},children:Object(ae.jsxs)(X.a,{justify:"space-around",children:[Object(ae.jsx)(ze.a,{children:Object(ae.jsx)(Ss,{label:"Event Name",id:"eventName",w:400,name:"eventName",placeholder:"Event Name",type:"text",value:t,onChange:t=>e(Pa(t.currentTarget.value))})}),Object(ae.jsx)(ze.a,{children:Object(ae.jsx)(nc,{label:"Event Date",value:a,onChange:t=>{console.log("Selected Date:",t),e(Ia(t))},minDate:new Date,w:200})})]})})})};var Nc=function(e){let{setSelectedDate:t}=e;return Object(ae.jsx)(nc,{label:"Date",placeholder:"Select Date",onChange:e=>t(e),mx:"auto",maw:400})},Ec=a(998),Mc=a(931);var zc=e=>{const t=Object(x.e)(),a={rightSection:{pointerEvents:"none",color:"#0d5ff9"},label:{color:"#0d5ff999"},dropdown:{border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"},calendarHeader:{backgroundColor:"#F3F6FF"},day:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},monthList:{"&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},weekday:{color:"dark"===t.colorScheme?t.white:"#0d5ff9"},calendarHeaderLevel:{backgroundColor:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#0d5ff9",color:"dark"===t.colorScheme?t.white:"white"}},calendarHeaderControlIcon:{color:"#0d5ff9"},input:{cursor:"pointer",border:"none",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"black"}};return Object(ae.jsx)(Ec.a,{styles:{...a,...e.styles},...e,valueFormat:"HH:MM",onClick:e=>e.target.showPicker(),popoverProps:{withinPortal:!0},rightSection:Object(ae.jsx)(ee.a,{c:"#0d5ff9",children:Object(ae.jsx)(Mc.a,{})})})};var Tc=function(e){let{setSelectedTime:t,timeSelected:a}=e;return Object(ae.jsx)(zc,{value:a||"",label:"Time",onChange:e=>t(e.target.value)})},Rc=a(298),_c=a.n(Rc);function Lc(e,t){const a="".concat(_c()(e).format("YYYY-MM-DD")," ").concat(t);return _c()(a).format("DD-MMM-YYYY | hh:mm A")}var Bc=e=>{const t=Object(x.e)(),a={root:{cursor:"pointer",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{backgroundImage:"dark"===t.colorScheme?t.colors.teal[9]:"radial-gradient(#FFFFFF 1% ,#F3F6FF)",color:"dark"===t.colorScheme?t.white:"#0d5ff9",border:"1px solid #0d5ff9"}}};return Object(ae.jsx)(Oe.a,{styles:{...a,...e.styles},...e})};var Kc=e=>{const t=Object(x.e)(),a={input:{cursor:"pointer",backgroundColor:"dark"===t.colorScheme?t.colors.teal[9]:"#F3F6FF",color:"dark"===t.colorScheme?t.white:"#0d5ff9","&:hover":{border:"2px solid #0d5ff9",boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px"}}};return Object(ae.jsx)(de.a,{styles:{...a,...e.styles},...e,size:25,radius:"xl",color:"grape"})};var Uc=e=>{let{initialState:t,onUpdate:a,onApplyForAll:c}=e;const r=Object(p.b)(),o=Object(p.c)((e=>e.campaignManagement.eventDate)),l=new Date,i={startDate:l,endDate:null,recurrence:{type:"",recurrenceTime:"",dailyFrequency:1,weeklyDays:[],monthlyDay:"",monthlyFrequency:"",monthlyWeekday:"",customDateTimes:[]}},[n,d]=Object(s.useState)(t.startDate||l),[j,b]=Object(s.useState)(t.recurrence?t:i);console.log("results",j);const u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],[m,h]=Object(s.useState)(!1),[O,x]=Object(s.useState)(j.recurrence.customDateTimes||[]),[g,f]=Object(s.useState)(null),[y,v]=Object(s.useState)(null),[w,C]=Object(s.useState)(j.recurrence.recurrenceTime||"");Object(s.useEffect)((()=>{w&&b((e=>({...e,recurrence:{...e.recurrence,recurrenceTime:w}})))}),[w]),Object(s.useEffect)((()=>{g&&y&&(()=>{if(g&&y){const e={date:g,time:y};x([...O,e]),b((t=>({...t,recurrence:{...t.recurrence,customDateTimes:[...t.recurrence.customDateTimes,e]}}))),f(null),v(null),h(!1)}})()}),[g,y]),Object(s.useEffect)((()=>{a(j)}),[j]),Object(s.useEffect)((()=>{!o||j.endDate&&j.endDate===o||(b((e=>({...e,endDate:o}))),r(Ia(o)))}),[o,r,j.endDate]);const S=(e,t)=>{b((a=>({...a,[e]:t}))),"startDate"===e?d(t):"endDate"===e&&r(Ia(t))},k=(e,t)=>{C(""),b((a=>({...a,recurrence:{...a.recurrence,[e]:t}})))},F=(e,t)=>{k(e,parseInt(t,10))};return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ns.a,{c:"#0d5ff9",mb:10}),Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(G.a,{size:"lg",fw:"normal",c:"#0d5ff9",children:"Timeline"}),Object(ae.jsx)(Bc,{onClick:()=>c(j),children:"Apply For All"})]}),Object(ae.jsxs)(te.a,{grow:!0,children:[Object(ae.jsx)("div",{className:"col-6 col-lg-6",children:Object(ae.jsx)("div",{className:"mb-40",children:Object(ae.jsx)(nc,{label:"Start Date",value:n,onChange:e=>S("startDate",e),minDate:new Date})})}),Object(ae.jsx)("div",{className:"col-6 col-lg-6",children:Object(ae.jsx)("div",{className:"mb-40",children:Object(ae.jsx)(nc,{label:"End Date",value:o,onChange:e=>S("endDate",e),minDate:new Date})})})]})]}),Object(ae.jsxs)(G.a,{size:"lg",fw:"normal",c:"#0d5ff9",children:[" ","Recurrence"," "]}),Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(Kc,{label:"Daily",checked:"Daily"===j.recurrence.type,value:"Daily",onChange:e=>k("type",e.target.value)}),Object(ae.jsx)(Kc,{label:"Weekly",value:"Weekly",checked:"Weekly"===j.recurrence.type,onChange:e=>k("type",e.target.value)}),Object(ae.jsx)(Kc,{label:"Monthly",value:"Monthly",checked:"Monthly"===j.recurrence.type,onChange:e=>k("type",e.target.value)}),Object(ae.jsx)(Kc,{label:"Custom",value:"Custom",checked:"Custom"===j.recurrence.type,onChange:e=>k("type",e.target.value)})]})}),Object(ae.jsxs)(he.a.Col,{span:9,children:["Daily"===j.recurrence.type&&Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(Kc,{value:"EveryNDays",checked:"EveryNDays"===j.recurrence.dailyFrequency,onChange:()=>k("dailyFrequency","EveryNDays")}),"Every"," ",Object(ae.jsx)(Ss,{w:50,type:"number",min:"1",value:j.recurrence.dailyFrequency,onChange:e=>(e=>{let t="Everyday"!==e?parseInt(e,10):"Everyday";k("dailyFrequency",t)})(e.target.value)}),"day(s)"]}),Object(ae.jsx)(Kc,{label:"Everyday",value:"Everyday",checked:"Everyday"===j.recurrence.dailyFrequency,onChange:()=>k("dailyFrequency","Everyday")})]}),Object(ae.jsx)(he.a,{grow:!0,children:"Weekly"===j.recurrence.type&&u.map((e=>Object(ae.jsx)(he.a.Col,{span:4,children:Object(ae.jsx)(Kc,{label:e,value:e,checked:j.recurrence.weeklyDays.includes(e),onChange:()=>(e=>{const t=j.recurrence.weeklyDays.includes(e)?j.recurrence.weeklyDays.filter((t=>t!==e)):[...j.recurrence.weeklyDays,e];k("weeklyDays",t)})(e)})})))}),"Monthly"===j.recurrence.type&&Object(ae.jsxs)(q.a,{children:[Object(ae.jsxs)(te.a,{grow:!0,children:[Object(ae.jsx)(Kc,{}),"Day"," ",Object(ae.jsx)(Ss,{w:50,type:"number",min:"1",onChange:e=>F("monthlyDay",e.target.value)}),"of every"," ",Object(ae.jsx)(Ss,{w:50,type:"number",min:"1",onChange:e=>F("monthlyFrequency",e.target.value)})," ","month(s)"]}),Object(ae.jsxs)(te.a,{spacing:1,grow:!0,children:[Object(ae.jsx)(Kc,{}),"Day",Object(ae.jsx)(Ss,{type:"number"}),"of every",Object(ae.jsx)(jc,{miw:"23%",onChange:e=>k("monthlyFrequency",e),data:["first","second","third","fourth"]}),Object(ae.jsx)(jc,{miw:"31%",onChange:e=>k("monthlyWeekday",e),data:u})," ","of every month(s)"]})]}),"Custom"!==j.recurrence.type&&("Daily"===j.recurrence.type||"Weekly"===j.recurrence.type||"Monthly"===j.recurrence.type)&&Object(ae.jsx)($.a,{children:Object(ae.jsx)(q.a,{w:100,children:Object(ae.jsx)(Tc,{setSelectedTime:C,timeSelected:w})})}),"Custom"===j.recurrence.type&&Object(ae.jsx)("div",{children:Object(ae.jsxs)(X.a,{wrap:"wrap",children:[Object(ae.jsx)(X.a,{mr:5,wrap:"wrap",children:O.map(((e,t)=>Object(ae.jsx)(Bc,{rightSection:Object(ae.jsx)(ee.a,{size:"xs",c:"#0d5ff9",radius:"xl",variant:"transparent",onClick:()=>(e=>{const t=O.filter(((t,a)=>a!==e));x(t),b((e=>({...e,recurrence:{...e.recurrence,customDateTimes:t}})))})(t),children:Object(ae.jsx)(pt.a,{size:Object(Be.b)(10)})}),size:"lg",mr:5,mb:5,children:Lc(e.date,e.time)},t)))}),Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(Oe.a,{bg:"white",c:"gray",styles:{root:{borderWidth:"1px",borderColor:"gray"}},leftSection:Object(ae.jsx)(ee.a,{size:Object(Be.b)(20),children:Object(ae.jsx)(gt.a,{})}),rightSection:Object(ae.jsx)(ee.a,{children:Object(ae.jsx)(dc.a,{})}),onClick:()=>h(!m),children:"Add More"}),m&&Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(q.a,{shadow:"lg",w:200,children:[Object(ae.jsx)(Nc,{setSelectedDate:f}),Object(ae.jsx)(Tc,{setSelectedTime:v,timeSelected:y})]})})]})]})})]})]})]})]})};var Hc=()=>{var e;const t=Object(p.b)(),a=Object(p.c)((e=>e.campaignManagement.activeTab)),s=Object(p.c)((e=>e.campaignManagement.tabData));return Object(ae.jsxs)("div",{className:"mb-15",children:[(null===(e=s[a])||void 0===e?void 0:e.fileName)&&Object(ae.jsx)(G.a,{variant:"text",fw:"bold",fz:"xs",children:s[a].fileName}),Object(ae.jsx)("input",{type:"file",accept:".txt",onChange:async e=>{const c=e.target.files[0];if(c&&"text/plain"===c.type){const e=await c.text(),r={...s,[a]:{...s[a],content:e,file:c,fileName:c.name}};t(Ta(r))}else alert("Please select a valid .txt file")}})]})},Wc=a(979),qc=a(953),Yc=a(237),Gc=a(484),Vc=a(493),Jc=a(485),Zc=a(486),Qc=a(487),Xc=a(488),$c=a(231),er=a.n($c);var tr=e=>{let{initialContent:t,onChange:a,readOnly:c,activeTab:r}=e;const o=Object(Yc.b)({extensions:[Vc.a,Jc.a,Wc.a,Qc.a,Xc.a,Gc.a,Zc.a.configure({types:["heading","paragraph"]})],content:t.content,onUpdate:e=>{let{editor:t}=e;a(t.getHTML())}});return Object(s.useEffect)((()=>{console.log(r)}),[r]),Object(s.useEffect)((()=>{const e=er.a.sanitize(t.content);null===o||void 0===o||o.commands.insertContent(e),console.log("Effect")}),[t.file]),Object(ae.jsxs)(qc.a,{editor:o,readOnly:c,styles:{root:{border:"none",position:"relative"},control:{backgroundColor:"transparent",border:"none"},controlsGroup:{position:"relative",height:10},content:{backgroundColor:"transparent",overflow:"auto",maxHeight:"210px"},toolbar:{backgroundColor:"transparent"}},children:[Object(ae.jsxs)(qc.a.Toolbar,{sticky:!0,stickyOffset:60,children:[Object(ae.jsxs)(qc.a.ControlsGroup,{children:[Object(ae.jsx)(qc.a.Bold,{}),Object(ae.jsx)(qc.a.Italic,{}),Object(ae.jsx)(qc.a.Underline,{}),Object(ae.jsx)(qc.a.Strikethrough,{}),Object(ae.jsx)(qc.a.ClearFormatting,{}),Object(ae.jsx)(qc.a.Highlight,{}),Object(ae.jsx)(qc.a.Code,{})]}),Object(ae.jsxs)(qc.a.ControlsGroup,{children:[Object(ae.jsx)(qc.a.H1,{}),Object(ae.jsx)(qc.a.H2,{}),Object(ae.jsx)(qc.a.H3,{}),Object(ae.jsx)(qc.a.H4,{})]}),Object(ae.jsxs)(qc.a.ControlsGroup,{children:[Object(ae.jsx)(qc.a.Blockquote,{}),Object(ae.jsx)(qc.a.Hr,{}),Object(ae.jsx)(qc.a.BulletList,{}),Object(ae.jsx)(qc.a.OrderedList,{}),Object(ae.jsx)(qc.a.Subscript,{}),Object(ae.jsx)(qc.a.Superscript,{})]}),Object(ae.jsxs)(qc.a.ControlsGroup,{children:[Object(ae.jsx)(qc.a.Link,{}),Object(ae.jsx)(qc.a.Unlink,{})]}),Object(ae.jsxs)(qc.a.ControlsGroup,{children:[Object(ae.jsx)(qc.a.AlignLeft,{}),Object(ae.jsx)(qc.a.AlignCenter,{}),Object(ae.jsx)(qc.a.AlignJustify,{}),Object(ae.jsx)(qc.a.AlignRight,{})]}),"Email"===r?Object(ae.jsx)(q.a,{children:Object(ae.jsx)(Ss,{w:500,placeholder:"Subject"})}):null]}),Object(ae.jsx)(qc.a.Content,{})]})},ar=(a(428),a(790),a(933)),sr=a(934);const cr=e=>{let{previewStyles:t,sanitizedContent:a}=e;return Object(ae.jsxs)("div",{className:"europ-assistance",children:[Object(ae.jsxs)("div",{className:"frame",children:[Object(ae.jsx)("div",{className:"be-a-part-of-IPL-wrapper",children:Object(ae.jsx)("p",{className:"be-a-part-of-IPL",dangerouslySetInnerHTML:{__html:a}})}),Object(ae.jsx)("div",{className:"group",children:Object(ae.jsx)("div",{className:"overlap-group",children:Object(ae.jsx)("div",{className:"div",children:"Book now"})})})]}),Object(ae.jsxs)("div",{className:"overlap",children:[Object(ae.jsx)("div",{className:"text-wrapper-2",children:"Europ Assistance India"}),Object(ae.jsx)(ee.a,{size:Object(Be.b)(13),mt:17,c:"white",children:Object(ae.jsx)(Pc.a,{})}),Object(ae.jsx)("div",{className:"img-wrapper",children:Object(ae.jsx)("img",{className:"img",alt:"Img",src:ys})}),Object(ae.jsx)("div",{className:"div-wrapper",children:Object(ae.jsx)("div",{className:"text-wrapper-3",children:"7:01 PM"})}),Object(ae.jsxs)("div",{className:"group-2",children:[Object(ae.jsxs)(X.a,{ml:10,mt:-1,children:[Object(ae.jsx)(ee.a,{size:Object(Be.b)(13),c:"white",children:Object(ae.jsx)(ar.a,{})}),Object(ae.jsx)(ee.a,{size:Object(Be.b)(13),c:"white",children:Object(ae.jsx)(sr.a,{})})]}),Object(ae.jsxs)("div",{className:"three-dots",children:[Object(ae.jsx)("div",{className:"ellipse"}),Object(ae.jsx)("div",{className:"ellipse-2"}),Object(ae.jsx)("div",{className:"ellipse-3"})]})]})]}),Object(ae.jsxs)("div",{className:"group-3",children:[Object(ae.jsx)("div",{className:"overlap-2",children:Object(ae.jsx)("div",{className:"text-wrapper-4",children:"Type a message"})}),Object(ae.jsx)("div",{className:"imagevector-wrapper"})]})]})};var rr=e=>{let{content:t,tab:a}=e;const s=er.a.sanitize(t),c={overflow:"auto",maxHeight:"100%"};switch(a){case"Email":case"SMS":case"Notification":return Object(ae.jsx)("div",{style:c,dangerouslySetInnerHTML:{__html:s}});case"Whatsapp":return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(q.a,{style:c,children:Object(ae.jsx)($.a,{children:Object(ae.jsx)("div",{style:{zoom:"200%"},children:Object(ae.jsx)(cr,{previewStyles:c,sanitizedContent:s})})})})});default:return null}};var or=()=>{var e;const t=Object(p.b)(),a=Object(p.c)((e=>e.campaignManagement.activeTab)),c=Object(p.c)((e=>e.campaignManagement.tabData)),[r,o]=Object(s.useState)(!1),l=()=>{o(!0)},i=()=>{o(!1)},n=e=>{const s={...c,[a]:{...c[a],content:e,characterCount:e.length}};t(Ta(s))};return Object(ae.jsxs)(ae.Fragment,{children:[r&&Object(ae.jsx)("div",{className:"overlay"}),Object(ae.jsx)("div",{className:"modal-body modal-pad",children:Object(ae.jsxs)("div",{children:[Object(ae.jsxs)("div",{className:"row",children:[Object(ae.jsx)("div",{className:"col-md-2",children:Object(ae.jsx)("div",{className:"dis-block nav-pills me-3",id:"v-pills-tab",role:"tablist","aria-orientation":"vertical",children:["Email","SMS","Notification","Whatsapp"].map((e=>r?Object(ae.jsx)(q.a,{ml:-15,children:Object(ae.jsx)(je.a,{className:"preview-container",onClick:()=>t(za(e)),c:a===e?"#0d5ff9":"white",bg:a===e?"white":"#0d5ff9",sx:{"&:hover":{backgroundColor:"white",color:"#524EE1"}},size:"lg",fullWidth:!0,style:{marginBottom:"10px"},children:Object(ae.jsx)(G.a,{size:"xs",children:e})},e)}):Object(ae.jsx)(je.a,{className:"preview-container",onClick:()=>t(za(e)),c:a===e?"#white":"#0d5ff9",bg:a===e?"#0d5ff9":"white",sx:{"&:hover":{backgroundColor:"#F3F6FF",color:"#0d5ff9"}},mr:-5,size:"lg",fullWidth:!0,style:{marginBottom:"10px"},children:Object(ae.jsx)(G.a,{size:"xs",children:e})},e)))})}),Object(ae.jsx)("div",{className:"col-md-10",children:Object(ae.jsx)("div",{className:"preview-container tab-content tab-content-bg",children:["Email","SMS","Notification","Whatsapp"].map((e=>{var t;return Object(ae.jsxs)("div",{className:" tab-pane fade ".concat(a===e?"show active":""),id:"v-pills-".concat(e),role:"tabpanel",children:[Object(ae.jsx)(q.a,{children:r?Object(ae.jsx)(q.a,{h:250,children:Object(ae.jsx)(rr,{content:null===(t=c[e])||void 0===t?void 0:t.content,tab:e})}):Object(ae.jsx)(q.a,{h:290,mt:-40,children:Object(ae.jsx)(tr,{activeTab:a,initialContent:c[e],onChange:n},a)})}),Object(ae.jsxs)(X.a,{direction:"row-reverse",mt:20,children:[Object(ae.jsxs)("div",{className:"character-count",children:[c[a].characterCount,"/",c[a].charLimit]}),!r&&Object(ae.jsx)(q.a,{ml:5,children:c[a].characterCount>c[a].charLimit&&Object(ae.jsx)("div",{className:"character-limit-error",children:"Character limit exceeded!"})})]}),Object(ae.jsx)(q.a,{mt:"-4%",children:r?Object(ae.jsx)(ks,{w:120,onClick:i,children:"OK"}):Object(ae.jsx)(ks,{w:120,onClick:l,children:"Preview"})})]},e)}))})})]}),Object(ae.jsx)(q.a,{className:"".concat(r?"":"tab-preview-container"),children:!r&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(X.a,{direction:"row-reverse",mr:-100,mt:-20,children:Object(ae.jsx)(Hc,{},a)}),Object(ae.jsx)(Uc,{onUpdate:e=>{const s={...c,[a]:{...c[a],timelineState:e}};console.log("updatedTabData",Ta),t(Ta(s))},onApplyForAll:e=>{const a={...c};["Email","SMS","Notification","Whatsapp"].forEach((t=>{a[t]={...c[t],timelineState:e}})),t(Ta(a)),Object(Bs.b)({type:"default",title:"Timelines applied",message:"Timelines have been added for all modes"})},initialState:(null===(e=c[a])||void 0===e?void 0:e.timelineState)||{}},a)]})})]})})]})};var lr=()=>{const e=Object(p.b)(),{isModalOpen:t,eventName:a,step:c}=Object(p.c)((e=>e.campaignManagement)),r=Object(p.c)((e=>e.campaignManagement)),[o,l]=Object(s.useState)(!1),[i,n]=Object(s.useState)(!1);return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(tt.a,{opened:t,withCloseButton:!1,closeOnClickOutside:!1,size:"xl",styles:{content:{overflow:"visible"}},children:[Object(ae.jsxs)("div",{className:"modal-header modal-header-wrap",children:[Object(ae.jsxs)("div",{className:"modeltitle",children:[Object(ae.jsx)("h1",{children:1===c?"Create a new Campaign":"Preview Campaign"}),Object(ae.jsxs)("h2",{children:["Step: ",c,"/2"]}),2===c&&Object(ae.jsx)(Pc.a,{cursor:"pointer",onClick:()=>e(Na(1))})]}),Object(ae.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{Object(Bs.b)({type:"default",title:"Campaign ".concat(r.eventName," has been Cancelled"),message:"Click Run campaign to run the campaign again"}),e(Sa(!1))},"aria-label":"Close"})]}),Object(ae.jsx)("div",{children:1===c?Object(ae.jsx)(Ic,{eventName:a,setEventName:t=>e(Pa(t))}):Object(ae.jsx)("div",{children:Object(ae.jsx)(or,{})})}),Object(ae.jsx)("div",{children:1===c?Object(ae.jsx)($.a,{children:Object(ae.jsx)(ks,{w:"30%",onClick:()=>{a.trim()?e(Na(2)):Object(Bs.b)({type:"warning",title:"Please provide an event name",message:"Event name is required to proceed."})},children:"Next"})}):Object(ae.jsx)($.a,{children:Object(ae.jsx)(ks,{w:"30%",onClick:()=>{l(!0)},children:"Publish"})})})]}),Object(ae.jsxs)(tt.a,{opened:o,withCloseButton:!0,onClose:()=>l(!1),title:"Confirm Campaign Publish",size:"md",children:[Object(ae.jsx)("p",{children:"Are you sure you want to publish this campaign?"}),Object(ae.jsxs)($.a,{children:[Object(ae.jsx)(ks,{onClick:()=>{n(!0),e(va()).then((t=>{va.fulfilled.match(t)?(Object(Bs.b)({type:"default",title:"Campaign Published",message:"The campaign has been published successfully",color:"green"}),e(Sa(!1))):(Object(Bs.b)({type:"error",title:"Campaign Failed",message:t.error.message,color:"red"}),n(!1))}))},disabled:i,children:i?"Publishing...":"Yes, Publish"}),Object(ae.jsx)(ks,{variant:"outline",onClick:()=>l(!1),children:"No, Go back"})]})]})]})};var ir=()=>{const e=Object(p.b)(),t=(Object(p.c)((e=>e.campaignManagement.downloadDataStatus)),Object(p.c)((e=>e.campaignManagement.isModalOpen))),a=Object(p.c)((e=>e.campaignManagement.allCustomerIDs));return Object(ae.jsxs)("div",{children:[Object(ae.jsx)("button",{type:"button",className:"btn runcamp",onClick:()=>{0!==a.length?(e(Sa(!0)),e(_a()),Object(Bs.b)({title:"Success!",message:"Campaign initiated against customers in pool.",color:"green"})):Object(Bs.b)({title:"Error!",message:"No customers have been selected. Please ensure atleast one customer",color:"red"})},children:"Run Campaign"}),t&&Object(ae.jsx)(lr,{isOpen:t,closeModal:()=>Sa(!1)})]})};var nr=()=>{Object(p.b)();const e=Object(p.c)(La),t=Object(p.c)((e=>e.campaignManagement.allCustomerIDs));e.reduce(((e,t)=>e+t.count),0);return Object(ae.jsx)("div",{className:"col-12 col-lg-4",children:Object(ae.jsxs)(pe.a,{shadow:"lg",radius:"md",bg:"#F3F6FF",children:[Object(ae.jsx)("div",{className:"dem-title mb-4",children:Object(ae.jsx)("h1",{children:"Total Demographic"})}),Object(ae.jsx)(q.a,{h:200,w:350,children:Object(ae.jsx)(Ac,{})}),Object(ae.jsxs)("div",{className:"row mt-2",children:[Object(ae.jsxs)("div",{className:"col-12 col-lg-12 text-center mb-2",children:[Object(ae.jsx)("span",{className:"total-numb pe-2"}),Object(ae.jsxs)("span",{className:"total-users",children:[t.length," Users matching your criteria"]})]}),Object(ae.jsx)(ir,{})]})]})})},dr=a(935),jr=a(936),br=a(937),ur=a(232),mr=a(233),hr=a(186),pr=a(180),Or=a(227),xr=a(101);var gr=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.campaign.data)),a=Object(p.c)((e=>e.campaign.campaignNames)),c=Object(p.c)((e=>e.campaign.status)),r=Object(p.c)((e=>e.campaign.error)),[o,l]=Object(s.useState)([]);if(Object(s.useEffect)((()=>{"idle"===c&&e(Ka())}),[c,e]),"loading"===c)return Object(ae.jsx)(V.a,{c:"5c00f2",style:{margin:"0 auto",display:"block"},size:50});if("failed"===c)return Object(ae.jsxs)("div",{children:["Error: ",r]});const i=(o.length>0?t.filter((e=>o.includes(e.campaignName))):t).map((e=>({...e,delivered:e.totalSent,converted:e.success,interested:e.success,failure:e.failed})));return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(q.a,{p:30,children:[Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(f.a,{c:"#0d5ff9",children:"Campaigns"}),Object(ae.jsx)(be.b,{to:"/campaign",children:Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dr.a,{})})})]}),Object(ae.jsx)(q.a,{children:Object(ae.jsx)(X.a,{children:Object(ae.jsx)(et.a,{maw:320,mx:"auto",data:a,placeholder:"All",label:Object(ae.jsx)(G.a,{c:"dimmed",children:"Campaign(s)"}),searchable:!0,rightSection:Object(ae.jsx)(ee.a,{children:Object(ae.jsx)(dc.a,{})}),onChange:t=>{l(t),e(Ha(t))},value:o})})}),Object(ae.jsx)(q.a,{h:500,w:"100%",children:Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(jr.a,{data:i,margin:{top:20,right:30,left:20,bottom:5},maxBarSize:60,children:[Object(ae.jsx)(br.a,{strokeLinecap:"3",horizontalCoordinatesGenerator:e=>e.height>250?[75,150,225]:[100,200],vertical:!1}),Object(ae.jsx)(ur.a,{dataKey:"campaignName"}),Object(ae.jsx)(mr.a,{label:{value:"No. of Customers",angle:-90,position:"insideLeft",offset:-4}}),Object(ae.jsx)(hr.a,{}),Object(ae.jsx)(pr.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10}),Object(ae.jsx)(Or.a,{dataKey:"delivered",stackId:"a",fill:"#5C7DF2",stroke:"#5C7DF2",strokeWidth:2.36,fillOpacity:.7}),Object(ae.jsx)(Or.a,{stackId:"a",dataKey:"failure",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7}),Object(ae.jsx)(Or.a,{dataKey:"interested",stackId:"a",fill:"#F78C31",stroke:"#F78C31",strokeWidth:2.36,fillOpacity:.7}),Object(ae.jsx)(Or.a,{dataKey:"converted",stackId:"a",fill:"#4BCA74",stroke:"#4BCA74",strokeWidth:2.36,fillOpacity:.7,children:Object(ae.jsx)(xr.a,{position:"top"})})]})})})]})})},fr=a(938),yr=a(489),vr=a(154);const wr=[{name:"Group A",value:400},{name:"Group B",value:300},{name:"Group C",value:300},{name:"Group D",value:200}],Cr=["#DE8965","#D85972","#2745D9","#1D9825"];Math.PI;var Sr=()=>Object(ae.jsx)(q.a,{h:200,w:200,children:Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsx)(fr.a,{width:300,height:300,children:Object(ae.jsx)(yr.a,{data:wr,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:wr.map(((e,t)=>Object(ae.jsx)(vr.a,{fill:Cr[t%Cr.length]},"cell-".concat(t))))})})})});a(73);var kr=()=>{const e=Object(p.c)((e=>e.campaign.campaignNames));return Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(q.a,{children:Object(ae.jsx)(jc,{maw:320,label:"Campaign(s)",data:["All",...e]})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(q.a,{h:400,w:820,p:20,children:Object(ae.jsx)(Cc.a,{height:"100%",width:"100%",children:Object(ae.jsxs)(jr.a,{layout:"vertical",data:[{name:"SMS",Delivered:250,Interested:120,Converted:75,Failure:55},{name:"Email",Delivered:180,Interested:90,Converted:40,Failure:20},{name:"Notification",Delivered:230,Interested:110,Converted:50,Failure:30},{name:"Whatsapp",Delivered:275,Interested:135,Converted:85,Failure:60}],barSize:30,children:[Object(ae.jsx)(ur.a,{label:{value:"Campaigns",offset:0},type:"number",height:55}),Object(ae.jsx)(mr.a,{label:{value:"Communications",angle:-90,position:"left",offset:"-15"},type:"category",dataKey:"name",width:150}),Object(ae.jsx)(hr.a,{}),Object(ae.jsx)(pr.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10}),Object(ae.jsx)(Or.a,{dataKey:"Delivered",fill:"#BB5DE4",stackId:"a"}),Object(ae.jsx)(Or.a,{dataKey:"Failure",fill:"#0D96F9",stackId:"a"}),Object(ae.jsx)(Or.a,{dataKey:"Interested",fill:"#1D9B25",stackId:"a"}),Object(ae.jsx)(Or.a,{dataKey:"Converted",fill:"#D85972",stackId:"a",children:Object(ae.jsx)(xr.a,{position:"right"})})]})})})})]})},Fr=a(235),Dr=a(939),Ar=a(940),Pr=a(941),Ir=a(942);const Nr=[{color:"green",text:"No. of Clicks",percentage:"85%",icon:Dr.a,label:"Number of times that a customer has clicked any othe marketing campaign links"},{color:"orange",text:"No. of Bookings",percentage:"70%",icon:lc.a,label:"Number of Bookings created"},{color:"purple",text:"No. of Payments",percentage:"85%",icon:Ar.a,label:"Number of Bookings that followed through with complete payments"},{color:"pink",text:"Conversion Rate",percentage:"91%",icon:Pr.a,label:"Percentage of payments to bookings"},{color:"teal",text:"Bounce Rate",percentage:"13%",icon:Ir.a,label:"All the attempts through out all the campaigns that resulted in a failure"}];var Er=()=>{const[e,t]=Object(s.useState)(!1);return Object(ae.jsx)(ae.Fragment,{children:Nr.map(((a,s)=>Object(ae.jsx)(q.a,{onMouseEnter:()=>t(s),onMouseLeave:()=>t(!1),children:Object(ae.jsx)(pe.a,{sx:{height:"100%",backgroundImage:"radial-gradient(#FFFFFF 50% ,#F3F6FF)",cursor:"pointer",transition:"transform 0.3s ease",":hover":{transform:"scale(1.05)"}},radius:"md",shadow:"md",children:Object(ae.jsx)($.a,{children:Object(ae.jsx)(X.a,{children:Object(ae.jsxs)(te.a,{noWrap:!0,children:[Object(ae.jsx)(Fr.a,{label:a.label,color:"EBDFFF",withArrow:!0,opened:e===s,children:Object(ae.jsx)(ee.a,{size:Object(Be.b)(70),c:a.color,children:Object(ae.jsx)(a.icon,{size:Object(Be.b)(70)})})},"Tooltip-".concat(s)),Object(ae.jsxs)(ze.a,{justify:"start",children:[Object(ae.jsx)(G.a,{children:a.text}),Object(ae.jsx)(G.a,{c:a.color,children:a.percentage})]})]})})})})},s)))})};a(943),a(491);var Mr=()=>Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(pe.a,{shadow:"lg",radius:"lg",children:[Object(ae.jsx)(X.a,{c:"#0d5ff9",justify:"space-between",children:Object(ae.jsx)(G.a,{fw:"bold",children:"General"})}),Object(ae.jsx)(oc.a,{cols:5,children:Object(ae.jsx)(Er,{})})]}),Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsxs)(pe.a,{shadow:"lg",radius:"lg",h:"100%",children:[Object(ae.jsxs)(X.a,{c:"#0d5ff9",justify:"space-between",children:[Object(ae.jsx)(G.a,{fw:"bold",children:"Overview"}),Object(ae.jsxs)($.a,{children:[Object(ae.jsx)(ee.a,{c:"#0d5ff9",children:Object(ae.jsx)(Q.a,{})}),Object(ae.jsx)(G.a,{fw:"bold",children:"Export"})]})]}),Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(te.a,{grow:!0,children:[Object(ae.jsx)(pe.a,{sx:{border:"1px solid",borderColor:"#F3F6FF"},children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(te.a,{spacing:"xs",children:[Object(ae.jsx)(f.a,{size:"md",children:"Total"}),Object(ae.jsx)(f.a,{size:"md",c:"#0d5ff9",children:"16,954"})]}),Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(G.a,{c:"#DE8965",fw:"bold",children:"\u2022 SMS"}),Object(ae.jsx)(G.a,{children:"1244"})]}),Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(G.a,{c:"#D85972",fw:"bold",children:"\u2022 Email"}),Object(ae.jsx)(G.a,{children:"242"})]}),Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(G.a,{c:"#2745D9",fw:"bold",children:"\u2022 Notification"}),Object(ae.jsx)(G.a,{children:"2345"})]}),Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(G.a,{c:"#1D9825",fw:"bold",children:"\u2022 Whatsapp"}),Object(ae.jsx)(G.a,{children:"13123"})]})]})}),Object(ae.jsx)(q.a,{children:Object(ae.jsx)(Sr,{})})]}),Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(jc,{label:"Category",placeholder:"Demographic",data:["Demographic"]}),Object(ae.jsx)(jc,{label:"Sub-Category(s)",placeholder:"Age",data:["Age"]}),Object(ae.jsx)(jc,{label:"Status",placeholder:"All",data:["All"]})]})]})]})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(pe.a,{shadow:"lg",radius:"lg",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsxs)(X.a,{c:"#0d5ff9",justify:"space-between",children:[Object(ae.jsx)(G.a,{fw:"bold",children:"Communications"}),Object(ae.jsxs)($.a,{children:[Object(ae.jsx)(ee.a,{c:"#0d5ff9",children:Object(ae.jsx)(Q.a,{})}),Object(ae.jsx)(G.a,{fw:"bold",children:"Export"})]})]}),Object(ae.jsx)(q.a,{children:Object(ae.jsx)(kr,{})})]})})})]})]})});var zr=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.campaignListSlice));Object(s.useEffect)((()=>{e(as())}),[e]);const a=Object(s.useMemo)((()=>[{accessorKey:"name",header:"Campaign Name"},{accessorKey:"type",header:"Communication Type"},{accessorKey:"customers",header:"Total No. of Customers",accessorFn:e=>e.customers.length},{accessorKey:"created_at",header:"Create Campaign Date",accessorFn:e=>new Date(e.created_at).toLocaleDateString()},{accessorKey:"end",header:"Event Date",accessorFn:e=>new Date(e.end).toLocaleDateString()},{accessorKey:"status",header:"Campaign Status"},{accessorKey:"actions",header:"Action",Cell:e=>{let{row:t}=e;return Object(ae.jsxs)(X.a,{children:[Object(ae.jsx)(ee.a,{color:"lightblue",children:Object(ae.jsx)(Ot.a,{})}),Object(ae.jsx)(ee.a,{color:"red",children:Object(ae.jsx)(xt.a,{})})]})}}]),[]);if("loading"===t.campaignStatus)return Object(ae.jsx)("p",{children:"Loading..."});if("failed"===t.campaignStatus)return Object(ae.jsxs)("p",{children:["Error loading campaigns. Details: ",t.error]});const c=[...t.campaigns].reverse();return Object(ae.jsx)(se,{columns:a,data:c,onRowClick:()=>{console.log("Row clicked")}})};var Tr=()=>{const e=Object(p.b)(),{isModalOpen:t,dropdownData:a,rows:c,selectedCombinations:r}=Object(p.c)((e=>e.campaignManagement));Object(s.useEffect)((()=>{e(at())}),[e]);const o=Object(p.c)((e=>e.keyword.keywords));console.log("keywords fetched for analysis",o);const l=Object(p.c)((e=>e.keyword.keywordsStatus));"loading"===l&&console.log("loading..."),"failed"===l&&console.log("Error getting keywords"),Object(s.useEffect)((()=>{if("success"===l){let t={...a.Interests};o.forEach((e=>{const a=t[e.category]?[...t[e.category],{label:e.value,value:e.id}]:[{label:e.value,value:e.id}];t={...t,[e.category]:a}}));const s={...a,Interests:t};e(ka(s))}}),[l,o]);const i=(t,s,o)=>{const l={...c};l[t]={...l[t],[s]:o};let i=[...r];if("first"===s)l[t].second="",l[t].third="";else if("second"===s)l[t].third="";else if("third"===s){let e;e="Interests"===l[t].first?a[l[t].first][l[t].second].find((e=>e.value===o)):o,i=i.filter((e=>e.rowId!==t)),i.push({rowId:t,first:l[t].first,second:l[t].second,third:e})}e(Fa(l)),e(Da(i))},n=t=>{const a={...c};delete a[t];const s=r.filter((e=>e.rowId!==t));e(Fa(a)),e(Da(s))};return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(Mr,{}),Object(ae.jsx)(pe.a,{mt:20,shadow:"lg",radius:"md",children:Object(ae.jsxs)("div",{className:"row",children:[Object(ae.jsxs)("div",{className:"col-12 col-lg-8",children:[Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Data Analysis"}),Object(ae.jsxs)("div",{className:"row",style:{maxHeight:"250px",overflowY:"scroll"},children:[Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"select-title mb-3",children:Object(ae.jsx)("h1",{children:"Select Information Type"})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"select-title mb-3",children:Object(ae.jsx)("h1",{children:"Select Category"})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-3",children:Object(ae.jsx)("div",{className:"select-title mb-3",children:Object(ae.jsx)("h1",{children:"Select Sub-category"})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-1",children:Object(ae.jsx)("div",{className:"select-title mb-3",children:Object(ae.jsx)("h1",{children:"Delete"})})}),Object(ae.jsx)("div",{className:"col-12 col-lg-2",children:Object(ae.jsx)("div",{className:"select-title mb-3",children:Object(ae.jsx)("h1",{children:"Figures"})})}),Object.entries(c).map((e=>{let[t,s]=e;return Object(ae.jsx)(wc,{row:s,rowId:t,handleDropdownChange:i,dropdownData:a,selectedCombinations:r,deleteRow:n},t)})),Object(ae.jsx)(X.a,{justify:"end",children:Object(ae.jsx)("div",{className:"pl-90",children:Object(ae.jsxs)(te.a,{onClick:()=>{const t={[Date.now().toString()]:{first:"",second:"",third:""}};e(Fa({...c,...t}))},style:{cursor:"pointer"},children:[Object(ae.jsx)(ee.a,{color:"#0d5ff9",variant:"subtle",size:"sm",children:Object(ae.jsx)(gt.a,{color:"#0d5ff9"})}),Object(ae.jsx)(G.a,{ml:-18,color:"#0d5ff9",size:"sm",children:"Add More"})]})})})]})]}),Object(ae.jsx)(nr,{})]})}),Object(ae.jsx)(zr,{})]})},Rr=a(959),_r=a(946),Lr=a(947),Br=a(948),Kr=a.p+"static/media/eaLogoRotate.0d85ab0c.svg",Ur=a(957),Hr=a(944),Wr=a(945);const qr=Object(Ne.a)((e=>({link:{...e.fn.focusStyles(),display:"flex",alignItems:"center",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:"#0d5ff9",borderRadius:e.radius.sm,fontWeight:500,"&":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#F3F6FF",color:"dark"===e.colorScheme?e.white:"#0d5ff9"},"&:hover":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF"}}})));var Yr=e=>{var t;let{user:a,roleName:s}=e;const{classes:c,cx:r}=qr(),o=Object(x.e)(),l=Object(p.b)();return Object(ae.jsx)("div",{children:Object(ae.jsxs)(Ur.a,{trigger:"hover",openDelay:100,closeDelay:400,styles:{dropdown:{border:"none",backgroundColor:"transparent"}},children:[Object(ae.jsx)(Ur.a.Target,{children:Object(ae.jsx)(sc.a,{sx:{width:"100%",padding:o.spacing.xs,borderRadius:o.radius.sm,color:"dark"===o.colorScheme?o.colors.dark[0]:"#0d5ff9","&:hover":{backgroundColor:"dark"===o.colorScheme?o.colors.dark[6]:"transparent",border:"none"}},children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)(Ke.a,{src:(null===a||void 0===a?void 0:a.avatarUrl)||"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=255&q=80",radius:"xl"}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsxs)(ze.a,{spacing:0,children:[Object(ae.jsx)(G.a,{size:"sm",weight:500,children:null===a||void 0===a||null===(t=a.email)||void 0===t?void 0:t.split("@")[0]}),Object(ae.jsx)(G.a,{color:"#0d5ff9",size:"xs",children:s})]}),Object(ae.jsx)(dc.a,{size:Object(Be.b)(18)})]})]})})}),Object(ae.jsx)(Ur.a.Dropdown,{children:Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(pe.a,{bg:"#F3F6FF",shadow:"xl",radius:"md",sx:{border:"1px solid #0d5ff9"},children:[Object(ae.jsx)(Me.a,{component:be.b,to:"/myAccount",label:"My Account",icon:Object(ae.jsx)(xe.a,{size:14}),className:r(c.link,c.linkIcon)}),Object(ae.jsx)(Me.a,{component:be.b,to:"/securitySettings",label:"Change Password",icon:Object(ae.jsx)(Hr.a,{size:14}),className:r(c.link,c.linkIcon)}),Object(ae.jsx)(Me.a,{component:"div",label:"Logout",color:"red",icon:Object(ae.jsx)(Wr.a,{size:14}),className:r(c.link,c.linkIcon),onClick:()=>(l(ca()),void l(xa()))})]})})})]})})};const Gr=Object(Ne.a)((e=>({link:{...e.fn.focusStyles(),display:"flex",alignItems:"center",textDecoration:"none",fontSize:e.fontSizes.sm,color:"dark"===e.colorScheme?e.colors.dark[1]:e.colors.gray[7],borderRadius:e.radius.sm,fontWeight:500,"&":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#F3F6FF",color:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff9"},"&:focus":{outline:"none"},"&:hover":{backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:"#0d5ff990",color:"dark"===e.colorScheme?e.white:"#FFFFFF",["& .".concat(Object(Ee.a)("icon"))]:{color:"dark"===e.colorScheme?e.white:e.black}}},linkIcon:{ref:Object(Ee.a)("icon"),color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6],marginRight:e.spacing.sm},linkActive:{"&, &:hover":{backgroundColor:"dark"===e.colorScheme?"#252D3B":"#0d5ff9",color:"dark"===e.colorScheme?e.white:"#FFFFFF",["& .".concat(Object(Ee.a)("icon"))]:{color:e.fn.variant({variant:"light",color:e.primaryColor}).color}}},stickyNavbar:{position:"sticky",height:"100%",top:0}})));var Vr=e=>{let{children:t}=e;const{classes:a,cx:c}=Gr(),r=Object(p.b)(),o=Object(g.g)(),[l,i]=Object(s.useState)(""),{user:n,users:d}=Object(p.c)((e=>e.auth)),j=Object(x.e)(),{userPermissions:b,getAllRolesPermissionsMappingsByUserStatus:u}=Object(p.c)((e=>e.rolePermission));function m(e,t){return e.some((e=>e.name===t))}Object(s.useEffect)((()=>{const e=o.pathname;i(e)}),[o.pathname]);const[h,O]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{setTimeout((()=>{O(!0)}),500)}),[]),Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(tc.a,{styles:{root:{backgroundImage:"linear-gradient(#00239c,#0d5ff9)",paddingTop:5,paddingRight:20}},height:{base:50},withBorder:!1,children:Object(ae.jsx)(X.a,{justify:"flex-end",children:Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(Ys,{}),Object(ae.jsx)(ee.a,{variant:"subtle",c:"white",children:Object(ae.jsx)(_r.a,{})}),Object(ae.jsx)(Ke.a,{p:2,bg:"white",size:"2.5rem",radius:"xl",src:Kr})]})})}),Object(ae.jsxs)("div",{style:{display:"flex"},children:[Object(ae.jsx)(pe.a,{shadow:"md",w:"290px",bg:"dark"==j.colorScheme?"":"#FFFFFF",sx:{transform:h?"translateX(0%)":"translateX(-100%)",transition:"transform 0.6s ease-out"},children:Object(ae.jsxs)(Te.a,{className:a.stickyNavbar,p:"xs",withBorder:!1,bg:"dark"==j.colorScheme?"":"transparent",children:[Object(ae.jsx)(Qs.a,{h:5}),Object(ae.jsx)(Te.a.Section,{children:d&&n&&n._id&&Object(ae.jsx)(Yr,{user:n,roleName:function(e){const t=d.find((t=>t.id===e));return t?(r(ra(t.role.name)),t.role.name):"User not found"}(n._id)})}),Object(ae.jsx)(Qs.a,{h:2}),Object(ae.jsxs)(ze.a,{children:[m(b,"profile_dashboard")&&Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/",label:"Dashboard",icon:Object(ae.jsx)(Zs.a,{size:"2rem",stroke:2}),className:c(a.link,{[a.linkActive]:"/"===l})}),m(b,"user_view")&&Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/users",label:"Users",icon:Object(ae.jsx)(Lr.a,{size:"2rem",stroke:2}),className:c(a.link,{[a.linkActive]:"/users"===l})}),m(b,"acl")&&Object(ae.jsxs)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/acl",label:"ACL",icon:Object(ae.jsx)(Br.a,{size:"2rem",stroke:2}),className:c(a.link,{[a.linkActive]:"/acl"===l}),children:[Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/acl/rolesvspermissions",label:"Roles vs Permission",icon:Object(ae.jsx)(Gs.a,{size:"1rem",stroke:2}),className:a.link}),Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/acl/permissions",label:"Permissions",icon:Object(ae.jsx)(Gs.a,{size:"1rem",stroke:2}),className:a.link}),Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/acl/userpermissions",label:"Users Permissions",icon:Object(ae.jsx)(Gs.a,{size:"1rem",stroke:2}),className:a.link})]}),m(b,"campaign_dashoard")&&Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/campaign",label:"Campaign",icon:Object(ae.jsx)(Vs.a,{size:"2rem",stroke:2}),className:c(a.link,{[a.linkActive]:"/campaign"===l})}),m(b,"customer_dashboard")&&Object(ae.jsx)(Me.a,{styles:{root:{boxShadow:"rgba(0, 0, 0, 0.35) 0px 5px 15px",transition:"transform 0.3s ease","&:hover":{transform:"translateY(5px)"}}},component:be.b,to:"/customers",label:"Customers",icon:Object(ae.jsx)(Js.a,{size:"2rem",stroke:2}),className:c(a.link,{[a.linkActive]:"/customers"===l||"/dashboard"===l})})]})]})}),Object(ae.jsx)("span",{style:{flexGrow:"1",width:"100px",height:"calc(100vh - 50px)",overflowY:"auto",backgroundImage:"radial-gradient(#F2F2F2 50% ,#F3F6FF)"},children:Object(ae.jsxs)("div",{style:{paddingLeft:"10px",paddingRight:"20px",marginTop:"20px",backgroundColor:"transparent"},children:[Object(ae.jsx)("div",{style:{display:"flex",justifyContent:"space-between",backgroundColor:"transparent"}}),t]})})]})]})},Jr=a(972),Zr=a(949),Qr=a(950);function Xr(e){return new Date(e).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"})}function $r(e){Bs.a.show({title:"Success",message:e,styles:e=>({root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}})})}var eo=e=>{let{isModalOpen:t,curr_user:a,handleModalClose:c,userRolesPermissions:r,userPermissionsOptions:o,classes:l,cx:i}=e;const n=Object.keys(r).length>0?r.map((e=>({id:e.id,permission:e.permission.name,isactive:e.isActive?"active":"disabled",created_at:Xr(e.created_at)}))):[],d=Object(x.e)(),j=Object(p.b)(),[b,u]=Object(s.useState)(n),[m,h]=Object(s.useState)(!1),[O,g]=Object(s.useState)(!1),[y,v]=Object(s.useState)(null);Array.isArray(b)&&b.map((e=>Object(ae.jsxs)("tr",{children:[Object(ae.jsx)("td",{children:e.permission?e.permission:Object(ae.jsx)(Xs.a,{label:"Permission",placeholder:"Select Permission",data:o,value:y,onChange:e=>v(e),withAsterisk:!0,required:!0})}),Object(ae.jsx)("td",{children:Object(ae.jsx)(uc.a,{onClick:()=>{return t=e.id,j(ha(t)),j(oa()),$r("changed status successfully"),void c();var t},checked:"active"==e.isactive,color:"teal",onLabel:"ACTIVE",offLabel:"DISABLE"})}),Object(ae.jsx)("td",{children:e.created_at})]},e.id)));return Object(ae.jsxs)(ae.Fragment,{children:[console.log(a),Object(ae.jsxs)(tt.a,{opened:t,title:"User Actions",onClose:c,overlayProps:{color:"dark"===d.colorScheme?d.colors.dark[9]:d.colors.gray[2],opacity:.55,blur:3},size:"lg",children:[Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(he.a.Col,{span:2,children:Object(ae.jsx)(Ke.a,{src:null,alt:"no image here",color:"indigo",radius:"0",size:50})}),Object(ae.jsx)(he.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Name:"})," ",a.email]})}),Object(ae.jsx)(he.a.Col,{span:5,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Role:"})," ",a.role]})}),Object(ae.jsx)(he.a.Col,{span:8,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Address:"})," ","123/street,Lorem ipsume Lorem ipsumeLorem ipsume"]})}),Object(ae.jsx)(he.a.Col,{span:4,style:{borderLeft:"1px solid #ccc",borderRadius:"4px"},children:Object(ae.jsxs)(G.a,{children:[Object(ae.jsx)(G.a,{c:"#4E70EA",fw:700,children:"Mobile:"})," ","987654321"]})})]}),Object(ae.jsx)(he.a,{children:Object(ae.jsxs)(he.a.Col,{span:12,children:[Object(ae.jsx)(Qs.a,{h:"xl"}),Object(ae.jsx)(f.a,{order:4,c:"#4E70EA",children:"User activity"}),Object(ae.jsx)(Qs.a,{h:"xl"}),Object(ae.jsxs)(Jr.a,{active:1,bulletSize:24,lineWidth:2,children:[Object(ae.jsxs)(Jr.a.Item,{bullet:Object(ae.jsx)(Zr.a,{size:12}),title:"User Created",children:[Object(ae.jsxs)(G.a,{color:"dimmed",size:"sm",children:[a.email,"' created at ",Xr(new Date)," ",Object(ae.jsx)(G.a,{variant:"link",component:"span",inherit:!0})]}),Object(ae.jsx)(G.a,{size:"xs",mt:4,children:"2 hours ago"})]}),Object(ae.jsxs)(Jr.a.Item,{bullet:Object(ae.jsx)(Qr.a,{size:12}),title:"Created Camapign",children:[Object(ae.jsxs)(G.a,{color:"dimmed",size:"sm",children:[a.email,"' created new campaign",Object(ae.jsx)(G.a,{variant:"link",component:"span",inherit:!0})]}),Object(ae.jsx)(G.a,{size:"xs",mt:4,children:"52 minutes ago"})]}),Object(ae.jsxs)(Jr.a.Item,{bullet:Object(ae.jsx)(Qr.a,{size:12}),title:"Closed Camapign",children:[Object(ae.jsxs)(G.a,{color:"dimmed",size:"sm",children:[a.email,"' closed new campaign",Object(ae.jsx)(G.a,{variant:"link",component:"span",inherit:!0})]}),Object(ae.jsx)(G.a,{size:"xs",mt:4,children:"52 minutes ago"})]})]})]})})]})]})};var to=e=>{let{isModalOpen:t,handleModalClose:a,handleEditUser:c,userData:r,rolesData:o}=e;const l=r||{firstname:"",lastname:"",email:"",mobile:""},[i,n]=Object(s.useState)(l);return Object(s.useEffect)((()=>{n(l)}),[l]),Object(ae.jsxs)(tt.a,{opened:t,onClose:a,title:"Edit User",style:{content:{maxHeight:"80vh"}},children:[Object(ae.jsxs)(oc.a,{cols:2,children:[Object(ae.jsx)(Ss,{placeholder:"First Name",label:"First Name",value:i.firstname,onChange:e=>n({...i,firstname:e.target.value}),withAsterisk:!0,required:!0}),Object(ae.jsx)(Ss,{placeholder:"Last Name",label:"Last Name",value:i.lastname,onChange:e=>n({...i,lastname:e.target.value}),withAsterisk:!0})]}),Object(ae.jsx)(nc,{placeholder:"Date Of Birth",label:"Date Of Birth",rightSection:Object(ae.jsx)(ee.a,{variant:"subtle",children:Object(ae.jsx)(lc.a,{})}),withAsterisk:!0,maxDate:new Date}),Object(ae.jsx)(Ss,{placeholder:"Email",label:"Email",value:i.email,onChange:e=>n({...i,email:e.target.value}),withAsterisk:!0,required:!0,type:"email"}),Object(ae.jsx)(Ss,{placeholder:"Mobile",label:"Mobile",type:"number",value:i.mobile,onChange:e=>n({...i,mobile:e.target.value}),withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"Pincode",label:"Pincode",type:"number",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"State",label:"State",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"City",label:"City",withAsterisk:!0}),Object(ae.jsx)(Ss,{placeholder:"Address",label:"Address",withAsterisk:!0}),Object(ae.jsx)(jc,{label:"Role",placeholder:"Select Role",data:o,value:i.role,onChange:e=>n({...i,role:e}),withAsterisk:!0,required:!0}),Object(ae.jsx)(ks,{className:"mt-4",onClick:()=>c(i),disabled:!i.firstname||!i.lastname||!i.email||!i.role,children:"Save Changes"})]})};var ao=()=>{const e=Object(Ne.a)((e=>({header:{position:"sticky",top:0,backgroundColor:"#F3F6FF",fontColor:"red",transition:"box-shadow 150ms ease","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:0,borderBottom:"".concat(Object(Be.b)(1)," solid ").concat("dark"===e.colorScheme?e.colors.dark[3]:e.colors.gray[2])}},scrolled:{boxShadow:e.shadows.lg}}))),{classes:t,cx:a}=e(),[c,r]=Object(s.useState)(!1),[o,l]=Object(s.useState)(!1),[i,n]=Object(s.useState)(!1),[d,j]=Object(s.useState)(null),b=Object(p.b)(),{rolesPermissions:u,roles:m,permissions:h}=Object(p.c)((e=>e.rolePermission)),{users:O}=Object(p.c)((e=>e.auth)),x={},[g,f]=Object(s.useState)({firstname:null,lastname:null,email:null,role:null,mobile:null}),[y,v]=Object(s.useState)(null);for(const s of u){const{userId:e,permission:{name:t}}=s;x.hasOwnProperty(e)?x[e].push(t):x[e]=[t]}const w=(null===O||void 0===O?void 0:O.map((e=>e.id)))||[];for(const s of w)x.hasOwnProperty(s)||(x[s]=[]);const C=e=>{v(e),l(!0)};Object(s.useEffect)((()=>{b(oa()),b($t()),b(ba()),b(ja())}),[]);const S=y&&u.filter((e=>e.userId===y.id)),k=[];y&&h.map((e=>{x[y.id].includes(e.name)||k.push({value:e.id,label:e.name})}));const F=Object.keys(x).length>0?O.map((e=>{return{id:e.id,roleId:e.roleId,email:e.email,isactive:"active",role:e.role.name,created_at:(t=e.created_at,new Date(t).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"}))};var t})):[],D=[{header:"Name",accessorKey:"email",Cell:e=>{let{row:t,column:a}=e;return Object(ae.jsx)(G.a,{variant:"light",onClick:e=>{e.preventDefault(),"email"===a.id&&C(t.original)},children:t.original.email.split("@").length>0?t.original.email.split("@")[0]:""})}},{header:"Email",accessorKey:"email",Cell:e=>{let{row:t,column:a}=e;return Object(ae.jsx)(G.a,{variant:"light",onClick:e=>{e.preventDefault(),"email"===a.id&&C(t.original)},children:t.original.email})}},{header:"Role",accessorKey:"role"},{header:"Status",accessorKey:"isactive",Cell:e=>{let{value:t}=e;return Object(ae.jsx)(je.a,{color:"teal",size:"xs",compact:!0,children:"active"})}},{header:"Created At",accessorKey:"created_at"},{header:"Action",accessorKey:"action",Cell:e=>{let{row:t,column:a}=e;return Object(ae.jsx)(ee.a,{variant:"light",onClick:e=>{var s;e.preventDefault(),"action"===a.id&&(s=t.original,j(s),n(!0))},children:Object(ae.jsx)(Gs.a,{size:"1rem"})})}}],A=m&&Array.isArray(m)&&m.map((e=>({value:e.id,label:e.name}))),P=()=>{c&&r(!1),o&&l(!1)},I=e=>{var t;n(!1),t="User data updated successfully",Bs.a.show({title:"Success",message:t,styles:e=>({root:{backgroundColor:"#4E70EA",borderColor:e.colors.blue[6],"&::before":{backgroundColor:e.white}},title:{color:e.white},description:{color:e.white},closeButton:{color:e.white,"&:hover":{backgroundColor:e.colors.blue[7]}}})})};return O&&0!==O.length?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(se,{columns:D,data:F,onRowClick:e=>console.log("Row clicked:",e)}),o&&Object(ae.jsx)(eo,{isModalOpen:o,handleModalClose:P,curr_user:y,userRolesPermissions:S,userPermissionsOptions:k,classes:t,cx:a}),Object(ae.jsx)(to,{isModalOpen:i,handleModalClose:()=>n(!1),handleEditUser:I,userData:d,rolesData:A})]}):Object(ae.jsx)(me.a,{visible:!0,overlayBlur:2,overlayColor:"#F3F6FF",loaderProps:{color:"#0d5ff9",size:"xl",variant:"dots"}})},so=a(958);var co=()=>{var e;const[t,a]=Object(s.useState)(null),{user:c}=Object(p.c)((e=>e.auth)),r=Object(so.a)({initialValues:{emailId:"",mobileNo:"",dateOfBirth:"",image:null},validate:{emailId:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:"Invalid email",mobileNo:e=>/^[6789]/.test(e)?10!==e.length?"Mobile number should be 10 digits":parseInt(e,10).toString()!==e?"Mobile number should only contain numbers":null:"Mobile number should start with 6, 7, 8, or 9",dateOfBirth:e=>{if(!e)return"Date of Birth is required";return new Date(e)>=new Date?"Date of Birth should be before today's date":null},image:e=>{if(!e)return null;if(e.size>5242880)return"File size should be less than 5MB";return["image/jpeg","image/png"].includes(e.type)?null:"Invalid file type. Only JPEG or PNG is allowed"}},validateInputOnChange:!0}),o=Object(s.useRef)(null);return Object(ae.jsx)(q.a,{children:Object(ae.jsx)(pe.a,{shadow:"lg",p:30,radius:"md",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(f.a,{mb:10,size:"lg",c:"#0d5ff9",children:"My Profile"}),Object(ae.jsx)(Ns.a,{c:"#0d5ff9"}),Object(ae.jsx)($.a,{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)(f.a,{size:30,c:"#0d5ff9",children:null===c||void 0===c||null===(e=c.email)||void 0===e?void 0:e.split("@")[0]})}),t&&Object(ae.jsx)(Ke.a,{size:"xl",src:t,radius:"xl"}),t&&Object(ae.jsx)($.a,{children:Object(ae.jsx)(ee.a,{onClick:()=>{a(null),r.setFieldValue("image",null),o.current.value=null,Object(Bs.b)({type:"info",title:"Image Removed",message:"Profile image has been removed."})},sx:{color:"#0d5ff9","&:hover":{backgroundColor:"#F3F6FF"}},children:Object(ae.jsx)(pt.a,{})})})]})}),Object(ae.jsxs)("form",{onSubmit:r.onSubmit((e=>{console.log(e),Object(Bs.b)({type:"default",title:"Profile saved successfully!",message:"Your profile details have been updated."})})),children:[Object(ae.jsx)(je.a,{variant:"outline",compact:!0,styles:{root:{borderColor:"#0d5ff9",color:"#0d5ff9","&:hover":{backgroundColor:"#F3F6FF",color:"#0d5ff9"}}},onClick:()=>o.current.click(),children:Object(ae.jsx)(G.a,{c:"dimmed",children:"Upload Image"})}),Object(ae.jsxs)(ze.a,{mt:30,children:[Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(Ss,{sx:{flexGrow:1},label:"Email ID",placeholder:null===c||void 0===c?void 0:c.email,...r.getInputProps("emailId"),disabled:!0}),Object(ae.jsx)(ee.a,{mt:15,c:"green",children:Object(ae.jsx)(ht.a,{})})]}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(Ss,{sx:{flexGrow:1},label:"Mobile No",placeholder:"9876543210",...r.getInputProps("mobileNo"),inputMode:"numeric",disabled:!0}),Object(ae.jsx)(ee.a,{mt:15,c:"green",children:Object(ae.jsx)(ht.a,{})})]}),Object(ae.jsx)(nc,{valueFormat:"DD MMM, YYYY",maxDate:new Date,label:"Date of Birth",...r.getInputProps("dateOfBirth")}),Object(ae.jsx)("input",{type:"file",ref:o,style:{display:"none"},onChange:e=>{const t=e.target.files[0];if(t)if(t.size>5242880||!["image/jpeg","image/png"].includes(t.type))Object(Bs.b)({type:"error",title:"Invalid Image",message:"Please upload a valid JPEG or PNG image less than 5MB."});else{r.setFieldValue("image",t);const e=URL.createObjectURL(t);a(e),Object(Bs.b)({type:"success",title:"Image uploaded successfully!",message:"Image is set for your profile. Please save"})}},accept:".jpeg, .jpg, .png"}),Object(ae.jsx)(ks,{type:"submit",children:"Save"})]})]})]})})})};var ro=()=>{const e=Object(so.a)({initialValues:{name:"",address:"",pincode:"",state:"",city:""}});return Object(ae.jsx)(q.a,{children:Object(ae.jsx)(pe.a,{shadow:"lg",p:30,radius:"md",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(f.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Edit Profile"}),Object(ae.jsx)(Ns.a,{c:"#0d5ff9"}),Object(ae.jsx)("form",{onSubmit:e.onSubmit((e=>{console.log(e),Object(Bs.b)({type:"default",title:"Profile updated successfully!",message:"Your profile details have been updated."})})),children:Object(ae.jsxs)(ze.a,{mt:30,children:[Object(ae.jsx)(Ss,{label:"Name",placeholder:"Enter your name",...e.getInputProps("name")}),Object(ae.jsxs)(te.a,{grow:!0,children:[Object(ae.jsx)(Ss,{label:"Pincode",placeholder:"Enter your pincode",...e.getInputProps("pincode"),inputMode:"numeric"}),Object(ae.jsx)(jc,{placeholder:"Select your state",label:"State",data:[],...e.getInputProps("state")}),Object(ae.jsx)(jc,{placeholder:"Select your city",label:"City",data:[],...e.getInputProps("city")})]}),Object(ae.jsx)(Ss,{w:"100%",label:"Address",placeholder:"Enter your address",...e.getInputProps("address")}),Object(ae.jsx)(ks,{type:"submit",children:"Update Profile"})]})})]})})})};var oo=()=>Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(he.a.Col,{span:5,children:Object(ae.jsx)(co,{})}),Object(ae.jsx)(he.a.Col,{span:7,children:Object(ae.jsx)(ro,{})})]})});var lo=e=>{let{onPasswordChange:t,canSave:a}=e;const c=Object(so.a)({initialValues:{oldPassword:"",newPassword:"",confirmPassword:""},validate:{confirmPassword:(e,t)=>e!==t.newPassword?"Password does not match":null}}),{user:r}=Object(p.c)((e=>e.auth)),o=c.values.newPassword;Object(s.useEffect)((()=>{t(o)}),[o,t]);return Object(ae.jsx)(pe.a,{shadow:"lg",p:30,radius:"md",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(f.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Change Password"}),Object(ae.jsx)(Ns.a,{c:"#0d5ff9"}),Object(ae.jsx)("form",{onSubmit:c.onSubmit((async e=>{try{if(a){const t=await i.a.post("".concat("https://custprofileapi.europ-assistance.in","/auth/change-password"),{email:r.email,oldPassword:e.oldPassword,newPassword:e.newPassword});200===t.status?Object(Bs.b)({type:"success",title:"Password changed successfully!",message:"Your password has been updated."}):Object(Bs.b)({type:"error",title:"Password change failed!",message:t.data.message||"Unexpected error occurred"})}else Object(Bs.b)({type:"warning",title:"Password change failed!",message:"Ensure all validations are met."})}catch(s){var t;Object(Bs.b)({type:"error",title:"Password change failed!",message:(null===(t=s.response)||void 0===t?void 0:t.data.message)||"Unexpected error occurred"})}})),children:Object(ae.jsxs)(ze.a,{mt:30,children:[Object(ae.jsx)(Cs,{label:"Old Password",...c.getInputProps("oldPassword")}),Object(ae.jsx)(Cs,{label:"Set New Password",...c.getInputProps("newPassword")}),Object(ae.jsx)(Cs,{label:"Confirm Password",...c.getInputProps("confirmPassword")}),Object(ae.jsx)(ks,{type:"submit",disabled:!a,children:"Save"})]})})]})})};var io=e=>{let{password:t="",onValidationChange:a}=e;const c=e=>e?"green":"red";return Object(s.useEffect)((()=>{const e=[t.length>=8,/[A-Z]/.test(t),/[a-z]/.test(t),/[0-9]/.test(t),/[^A-Za-z0-9\s]/.test(t)];a(e.every((e=>e)))}),[t,a]),Object(ae.jsx)(pe.a,{shadow:"lg",p:30,radius:"md",children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(f.a,{mb:10,size:"lg",c:"#0d5ff9",children:"Password Constraints"}),Object(ae.jsx)(Ns.a,{c:"#0d5ff9"}),Object(ae.jsx)(te.a,{children:Object(ae.jsx)(de.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:c(t.length>=8),checked:t.length>=8,label:Object(ae.jsx)(G.a,{c:c(t.length>=8),children:"Your password must be at least 8 characters in length"})})}),Object(ae.jsx)(te.a,{children:Object(ae.jsx)(de.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:c(/[A-Z]/.test(t)),checked:/[A-Z]/.test(t),label:Object(ae.jsx)(G.a,{c:c(/[A-Z]/.test(t)),children:"At least 1 Uppercase letters [A-Z]"})})}),Object(ae.jsx)(te.a,{children:Object(ae.jsx)(de.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:c(/[a-z]/.test(t)),checked:/[a-z]/.test(t),label:Object(ae.jsx)(G.a,{c:c(/[a-z]/.test(t)),children:"At least 1 Lowercase letters (a-z)"})})}),Object(ae.jsx)(te.a,{children:Object(ae.jsx)(de.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:c(/[0-9]/.test(t)),checked:/[0-9]/.test(t),label:Object(ae.jsx)(G.a,{c:c(/[0-9]/.test(t)),children:"At least 1 Number (0-9)"})})}),Object(ae.jsx)(te.a,{children:Object(ae.jsx)(de.a,{styles:{input:{border:"1px solid #0d5ff9"}},color:c(/[^A-Za-z0-9\s]/.test(t)),checked:/[^A-Za-z0-9\s]/.test(t),label:Object(ae.jsx)(G.a,{c:c(/[^A-Za-z0-9\s]/.test(t)),children:"At least 1 Symbols or special characters (excluding space)"})})})]})})};var no=()=>{const[e,t]=Object(s.useState)(""),[a,c]=Object(s.useState)(!1);return Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(lo,{onPasswordChange:t,canSave:a})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)(io,{password:e,onValidationChange:c})})]})})};a(951),a(492);var jo=()=>{const e=Object(p.c)((e=>e.widget2.distribution.data));return"loading"===Object(p.c)((e=>e.widget2.distribution.fetchStatus))?Object(ae.jsx)(q.a,{children:"Loading..."}):e&&0!==e.length?Object(ae.jsx)(q.a,{h:"400px",w:"full",pt:20,children:Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(jr.a,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[Object(ae.jsx)(br.a,{vertical:!1,strokeDasharray:"3 3"}),Object(ae.jsx)(ur.a,{dataKey:"label"}),Object(ae.jsx)(mr.a,{label:{value:"No. of Entities",angle:-90,position:"insideLeft",offset:0}}),Object(ae.jsx)(hr.a,{}),Object(ae.jsx)(pr.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(ae.jsx)(Or.a,{dataKey:"count",stroke:"#7366FF",strokeWidth:2.36,fill:"#7366FF",fillOpacity:.7})]})})}):Object(ae.jsx)(q.a,{h:"400px",w:"full",pt:20,display:"flex",alignItems:"center",justifyContent:"center",children:Object(ae.jsx)(G.a,{size:"lg",children:"No Data Available"})})};var bo=()=>{const[e,t]=Object(s.useState)("All"),[a,c]=Object(s.useState)("All"),[r,o]=Object(s.useState)("All"),[l,i]=Object(s.useState)([]),n=Object(p.b)(),{sources:d,years:j,months:b}=Object(p.c)((e=>e.widget2.menuItems)),u=new Date,m=u.getFullYear(),h=u.getMonth()+1;return Object(s.useEffect)((()=>{n(ds())}),[n]),Object(s.useEffect)((()=>{if("All"===a)i(b);else{const e=parseInt(a,10);if(e<m)i(b);else if(e===m){const e={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12},t=b.filter((t=>"All"===t.value||e[t.value]<=h));i(t)}else i([{value:"All",label:"All"}])}}),[a,b,m,h]),Object(s.useEffect)((()=>{n(js({source:e,year:"All"!==a?a:void 0,month:"All"!==r?r:void 0}))}),[n,e,a,r]),Object(ae.jsxs)(pe.a,{shadow:"md",radius:"md",children:[Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Customer Analysis"})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dr.a,{})})})]})}),Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(jc,{label:"Source(s)",placeholder:"Select Source",data:d,value:e,onChange:t}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(jc,{label:"Year",placeholder:"Select Year",data:j,value:a,onChange:e=>{c(e),o("All")}}),Object(ae.jsx)(jc,{label:"Month",placeholder:"Select Month",data:l,value:r,onChange:o,disabled:"All"===a})]})]})}),Object(ae.jsx)(he.a.Col,{span:9,children:Object(ae.jsx)(jo,{})})]})]})};var uo=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.widget3.distribution.data)),a=Object(p.c)((e=>e.widget3.distribution.fetchStatus));return Object(s.useEffect)((()=>{e(ms({source:"All"}))}),[e]),"loading"===a?Object(ae.jsx)(q.a,{children:"Loading..."}):t&&0!==t.length?Object(ae.jsx)(q.a,{h:"400px",w:"full",pt:20,children:Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(jr.a,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[Object(ae.jsx)(br.a,{vertical:!1,strokeDasharray:"3 3"}),Object(ae.jsx)(ur.a,{dataKey:"label"}),Object(ae.jsx)(mr.a,{label:{value:"No. of Entities",angle:-90,position:"insideLeft",offset:0}}),Object(ae.jsx)(hr.a,{}),Object(ae.jsx)(pr.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(ae.jsx)(Or.a,{dataKey:"count",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7})]})})}):Object(ae.jsx)(q.a,{h:"400px",w:"full",pt:20,display:"flex",alignItems:"center",justifyContent:"center",children:Object(ae.jsx)(G.a,{size:"lg",children:"No Data Available"})})};var mo=()=>{const[e,t]=Object(s.useState)("All"),[a,c]=Object(s.useState)("All"),[r,o]=Object(s.useState)("All"),l=Object(p.b)(),{sources:i,years:n,months:d}=Object(p.c)((e=>e.widget3.menuItems));return Object(s.useEffect)((()=>{l(us())}),[l]),Object(s.useEffect)((()=>{const t={source:e};"All"!==a&&(t.year=a,"All"!==r&&(t.month=r)),l(ms(t))}),[l,e,a,r]),Object(ae.jsxs)(pe.a,{shadow:"md",radius:"md",children:[Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Profile Analysis"})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dr.a,{})})})]})}),Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(jc,{label:"Source(s)",placeholder:"Select Source",data:i,value:e,onChange:t}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(jc,{label:"Year",placeholder:"Select Year",data:n,value:a,onChange:e=>{c(e),"All"===e&&o("All")}}),Object(ae.jsx)(jc,{label:"Month",placeholder:"Select Month",data:"All"!==a?d:["All"],value:r,onChange:o,disabled:"All"===a})]})]})}),Object(ae.jsx)(he.a.Col,{span:9,children:Object(ae.jsx)(uo,{})})]})]})};const ho=[{name:"Tech Enthusiastic",detractors:4e3,promotors:2400},{name:"Foodies",detractors:3e3,promotors:2210},{name:"Auto Lovers",detractors:2e3,promotors:2290},{name:"Gadget Freaks",detractors:2780,promotors:2e3},{name:"Sports Fans",detractors:1890,promotors:2181},{name:"Musicophile",detractors:2390,promotors:2500},{name:"Avid Traveller",detractors:3490,promotors:2100}];var po=()=>Object(ae.jsx)(q.a,{h:"400px",w:"870px",pt:20,children:Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(jr.a,{data:ho,margin:{top:20,right:30,left:20,bottom:5},children:[Object(ae.jsx)(br.a,{vertical:!1,strokeDasharray:"1"}),Object(ae.jsx)(ur.a,{dataKey:"name"}),Object(ae.jsx)(mr.a,{label:{value:"No. of Customers",angle:-90,position:"insideLeft",offset:0}}),Object(ae.jsx)(hr.a,{}),Object(ae.jsx)(pr.a,{iconType:"circle",verticalAlign:"top",align:"right",offset:-10,color:"yellow"}),Object(ae.jsx)(Or.a,{dataKey:"promotors",stroke:"#7366FF",strokeWidth:2.36,fill:"#7366FF",fillOpacity:.7}),Object(ae.jsx)(Or.a,{dataKey:"detractors",stroke:"#F73164",strokeWidth:2.36,fill:"#F73164",fillOpacity:.7})]})})}),Oo=a(995),xo=a(142);const go=["#FF638499","#36A2EB99","#FFCE5699","#FF999999","#66FF6699","#FF663399","#FFCC3399","#00CCCC99","#CC660099","#6666FF99","#33996699","#FF996699","#FF663399","#CCCC0099","#FFCCCC99","#66999999","#33669999","#99CC3399","#CC333399","#33CCCC99"],fo=e=>{const t=Math.PI/180,{cx:a,cy:s,midAngle:c,innerRadius:r,outerRadius:o,startAngle:l,endAngle:i,fill:n,payload:d,percent:j,value:b}=e,u=Math.sin(-t*c),m=Math.cos(-t*c),h=a+(o+10)*m,p=s+(o+10)*u,O=a+(o+30)*m,x=s+(o+30)*u,g=O+22*(m>=0?1:-1),f=x,y=m>=0?"start":"end";return Object(ae.jsxs)("g",{children:[Object(ae.jsx)(xo.a,{cx:a,cy:s,innerRadius:r,outerRadius:o,startAngle:l,endAngle:i,fill:n}),Object(ae.jsx)(xo.a,{cx:a,cy:s,startAngle:l,endAngle:i,innerRadius:o+6,outerRadius:o+10,fill:n}),Object(ae.jsx)("path",{d:"M".concat(h,",").concat(p,"L").concat(O,",").concat(x,"L").concat(g,",").concat(f),stroke:n,fill:"none"}),Object(ae.jsx)("circle",{cx:g,cy:f,r:2,fill:n,stroke:"none"}),Object(ae.jsx)("text",{x:g+12*(m>=0?1:-1),y:f,textAnchor:y,fill:"#333",style:{fontSize:"15px"},children:d.name}),Object(ae.jsx)("text",{x:g+12*(m>=0?1:-1),y:f,dy:18,textAnchor:y,fill:"#999",style:{fontSize:"15px"},children:"( ".concat((100*j).toFixed(2),"%)")})]})},yo=e=>{let{active:t,payload:a}=e;return t&&a&&a.length?Object(ae.jsx)("div",{style:{backgroundColor:"#fff",padding:"5px",border:"1px solid #ccc"},children:a.map(((e,t)=>Object(ae.jsx)("p",{children:"".concat(e.name,": ").concat(e.value)},"item-".concat(t))))}):null};var vo=()=>{const e=Object(p.c)((e=>e.profileCountWidget.distribution)),t=Object(p.c)((e=>e.profileCountWidget.status)),a=Object.keys(e).map(((t,a)=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:e[t],color:go[a%go.length]})));return Object(ae.jsx)(q.a,{sx:{height:300,width:"100%"},"data-testid":"pie-chart",children:"loading"===t?"Loading...":Object(ae.jsx)(Cc.a,{width:"100%",height:"100%",children:Object(ae.jsxs)(fr.a,{children:[Object(ae.jsx)(yr.a,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",activeShape:fo,children:a.map(((e,t)=>Object(ae.jsx)(vr.a,{fill:e.color||go[t%go.length]},"cell-".concat(t))))}),Object(ae.jsx)(hr.a,{content:Object(ae.jsx)(yo,{})}),Object(ae.jsx)(pr.a,{align:"center",verticalAlign:"bottom",layout:"horizontal"})]})})})};var wo=()=>{const e=Object(p.b)(),{menuItems:t,distribution:a,status:c,error:r}=Object(p.c)((e=>e.profileCountWidget)),[o,l]=Object(s.useState)(""),[i,n]=Object(s.useState)("");Object(s.useEffect)((()=>{e(rs())}),[e]);const d=[{value:"",label:"All"},...t.profileTypeItems.filter((e=>"All"!==e)).map((e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})))],j=[{value:"",label:"All"},...t.demographicItems.filter((e=>"all"!==e)).map((e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})))],b="loading"===c;return Object(ae.jsx)(X.a,{style:{width:"100%",height:"100%",flex:1,alignItems:"stretch"},children:Object(ae.jsx)(X.a,{style:{marginRight:"20px",flex:3},children:Object(ae.jsxs)(pe.a,{shadow:"lg",radius:"md",style:{width:"100%"},children:[r&&Object(ae.jsx)(Oo.a,{color:"red",children:r}),Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Profile"})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dr.a,{})})})]})}),Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(jc,{disabled:"loading"===c,label:"Profile Type",placeholder:"Select Profile Type",data:d,value:o,onChange:l}),Object(ae.jsx)(jc,{disabled:"loading"===c,label:"Demographics",placeholder:"Select Demographics",data:j,value:i,onChange:n}),Object(ae.jsx)(ks,{onClick:()=>{e(os({profileType:o,demographic:i}))},disabled:b,loading:"loading"===c,children:"Fetch"})]})}),Object(ae.jsx)(he.a.Col,{span:6,children:Object(ae.jsx)($.a,{children:"loading"===c?Object(ae.jsx)("div",{"data-testid":"loader",children:Object(ae.jsx)(V.a,{size:"lg"})}):Object(ae.jsx)(vo,{distribution:a})})})]})]})})})};var Co=()=>Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(wo,{}),Object(ae.jsx)(bo,{}),Object(ae.jsx)(mo,{}),Object(ae.jsxs)(pe.a,{shadow:"md",radius:"md",children:[Object(ae.jsx)(q.a,{children:Object(ae.jsxs)(X.a,{justify:"space-between",children:[Object(ae.jsx)($.a,{children:Object(ae.jsx)(G.a,{fw:"bold",c:"#0d5ff9",size:"sm",children:"Promoters vs Detractors"})}),Object(ae.jsx)($.a,{children:Object(ae.jsx)(be.b,{to:"/campaign",children:Object(ae.jsx)(ee.a,{c:"#0d5ff9",size:"sm",children:Object(ae.jsx)(dr.a,{})})})})]})}),Object(ae.jsxs)(he.a,{grow:!0,children:[Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(jc,{label:"Source(s)",placeholder:"All",data:["Test"]}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(jc,{label:"Year",placeholder:"All",data:["Test"]}),Object(ae.jsx)(jc,{label:"Month",placeholder:"All",data:["Test"]})]})]})}),Object(ae.jsx)(he.a.Col,{span:9,children:Object(ae.jsx)(po,{})})]})]}),Object(ae.jsx)(pe.a,{shadow:"md",radius:"md",children:Object(ae.jsx)(gr,{})})]})});function So(e){let{customerList:t}=e;const a=Object(p.b)(),c=Object(g.h)(),r=Object(p.c)((e=>e.customer.customerDetailsStatus));Object(s.useEffect)((()=>{"success"===r&&c("/dashboard"),console.log(r)}),[r,c]);return Object(ae.jsx)(q.a,{style:{marginTop:"30px"},children:Object(ae.jsx)(se,{columns:[{accessorKey:"customerName",header:"Name",minSize:400},{accessorKey:"email",header:"Email",minSize:400},{accessorKey:"source",header:"Source"},{accessorKey:"level",header:"Level"}],data:t,onRowClick:e=>{a(S(e.customerId))}})})}var ko=a(952);var Fo=()=>{const e=Object(p.b)(),t=Object(p.c)((e=>e.profileTypesCustomerMapping.profileTypes)),a=Object(p.c)((e=>e.profileTypesCustomerMapping.profileTypesStatus)),c=Object(p.c)((e=>e.profileTypesCustomerMapping.profileTypesStatus)),r=Object(p.c)((e=>e.profileTypesCustomerMapping.profileMappings)),o=Object(p.c)((e=>e.profileTypesCustomerMapping.profileMappingsStatus)),[l,i]=Object(s.useState)(!1),[n,d]=Object(s.useState)({}),j={technology:"https://imgur.com/a/cweY8fX",sports:"https://imgur.com/a/9NKkaqR",music:"https://imgur.com/a/zlQUb16",gadget:"https://imgur.com/kQHQ4IS",food:"https://imgur.com/a/hxhCUq9",fitness:"https://imgur.com/eFsmreM",travel:"https://imgur.com/iUw4buI",automobile:"https://imgur.com/B4aIhl5"};Object(s.useEffect)((()=>{e(I()),e(Ge())}),[e]);return"loading"===a?Object(ae.jsx)("div",{children:"Loading..."}):"failed"===a?Object(ae.jsxs)("div",{children:["Error: ",c]}):Object(ae.jsxs)("div",{children:[Object(ae.jsx)("h1",{children:"Profile Types"}),Object(ae.jsx)(he.a,{children:l?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(je.a,{onClick:()=>i(!1),variant:"text",children:[Object(ae.jsx)(ko.a,{})," Back"]}),Object(ae.jsx)("br",{}),"loading"===o?Object(ae.jsx)(ae.Fragment,{children:"Loading ..."}):"failed"===o?Object(ae.jsx)(ae.Fragment,{children:"Something went wrong"}):"succeeded"===o?Object(ae.jsx)(So,{customerList:r}):void 0]}):t.map((t=>Object(ae.jsx)(he.a.Col,{span:3,children:Object(ae.jsxs)(pe.a,{shadow:"sm",padding:"lg",component:"a",target:"_blank",children:[Object(ae.jsxs)(pe.a.Section,{children:[console.log(j[t.name]),Object(ae.jsx)(gs.a,{src:j[t.name],style:{width:"200px",height:"200px"}})]}),Object(ae.jsxs)(pe.a.Section,{style:{padding:"10px"},children:[Object(ae.jsx)(G.a,{fw:500,size:"lg",style:{display:"inline-block",marginRight:"10px",cursor:"pointer"},onClick:()=>{return a=t.id,e(Ve(a)),void i(!0);var a},children:t.name}),Object(ae.jsx)(uc.a,{checked:n[t.id]||!1,onChange:e=>{return a=t.id,s=e.currentTarget.checked,void d((e=>({...e,[a]:s})));var a,s},style:{display:"inline-block",float:"right"}})]})]})},t.id)))})]})};var Do=function(){const[e,t]=Object(s.useState)("light"),a=Object(p.b)(),{isLoggedIn:c}=Object(p.c)((e=>e.auth)),{rolesPermissionsStatus:r,rolesPermissions:o,userPermissions:l,getAllRolesPermissionsMappingsByUserStatus:n}=Object(p.c)((e=>e.rolePermission));function d(e,t){return e.some((e=>e.name===t))}return Object(s.useEffect)((()=>{if("login"in localStorage){const e=JSON.parse(localStorage.getItem("login"));i.a.defaults.headers.common.authorization="Bearer ".concat(e.token)}}),[c]),Object(g.h)(),Object(s.useEffect)((()=>{const{isLoggedIn:e}=JSON.parse(localStorage.getItem("login"))||{};e&&a(sa())}),[a,c]),Object(ae.jsx)(O.a,{colorScheme:e,toggleColorScheme:a=>t(a||("dark"===e?"light":"dark")),children:Object(ae.jsxs)(x.a,{theme:{colorScheme:e},withGlobalStyles:!0,withNormalizeCSS:!0,children:[Object(ae.jsx)(Rr.a,{}),Object(ae.jsxs)(g.d,{children:[Object(ae.jsx)(g.b,{path:"/login",element:Object(ae.jsx)(Fs,{})}),Object(ae.jsx)(g.b,{path:"/register",element:Object(ae.jsx)(ue,{})}),Object(ae.jsx)(Vr,{children:Object(ae.jsxs)(g.d,{children:[d(l,"profile_dashboard")?Object(ae.jsx)(Os,{path:"/",element:Object(ae.jsx)(Co,{})}):Object(ae.jsx)(Os,{path:"/",element:Object(ae.jsx)(fc,{})}),d(l,"customer_dashboard")?Object(ae.jsx)(Os,{path:"/customers",element:Object(ae.jsx)(re,{})}):Object(ae.jsx)(Os,{path:"/customers",element:Object(ae.jsx)(fc,{})}),Object(ae.jsx)(Os,{path:"/campaign",element:Object(ae.jsx)(Tr,{})}),Object(ae.jsx)(Os,{path:"/myAccount",element:Object(ae.jsx)(oo,{})}),Object(ae.jsx)(Os,{path:"/securitySettings",element:Object(ae.jsx)(no,{})}),d(l,"user_view")?Object(ae.jsx)(Os,{path:"/users",element:Object(ae.jsx)(ao,{})}):Object(ae.jsx)(Os,{path:"/users",element:Object(ae.jsx)(fc,{})}),d(l,"customer_dashboard")?Object(ae.jsx)(Os,{path:"/dashboard/*",element:Object(ae.jsx)(Vt,{})}):Object(ae.jsx)(Os,{path:"/dashboard/*",element:Object(ae.jsx)(fc,{})}),d(l,"acl")?Object(ae.jsx)(Os,{path:"/acl/*",element:Object(ae.jsx)(gc,{})}):Object(ae.jsx)(Os,{path:"/acl/*",element:Object(ae.jsx)(fc,{})}),Object(ae.jsx)(g.b,{path:"/mobileSimulation",element:Object(ae.jsx)(Is,{})}),Object(ae.jsx)(g.b,{path:"/agent",element:Object(ae.jsx)(Us,{})}),Object(ae.jsx)(Os,{path:"/pd",element:Object(ae.jsx)(fc,{})}),Object(ae.jsx)(Os,{path:"/profile",element:Object(ae.jsx)(Fo,{})})]})})]})]})})};const Ao=Object(n.a)({});i.a.defaults.baseURL="https://custprofileapi.europ-assistance.in",o.a.render(Object(ae.jsx)(c.a.StrictMode,{children:Object(ae.jsx)(p.a,{store:ps,children:Object(ae.jsx)(be.a,{children:Object(ae.jsx)(d.a,{theme:Ao,children:Object(ae.jsx)(s.Suspense,{fallback:"...loading",children:Object(ae.jsx)(Do,{})})})})})}),document.getElementById("root"))}},[[792,1,2]]]);
//# sourceMappingURL=main.ed8f64c9.chunk.js.map